##区块链3.0是什么样子

依据区块链实际发展的情况,区块链1.0是数字现金,区块链2.0是数字资产,而期望区块链3.0可成为应用平台.曾有人类比,区块链3.0可能是像操作系统一样的应用平台.仔细分析EOS等典型的区块链3.0后,可认为区块链3.0可能是价值交易的云服务平台,即不把区块链看成运行应用的操作系统,而是将之看成类似亚马逊云(Amazon Web Services,AWS)、阿里云等云服务平台.

###区块链3.0的三种类比:操作系统、网站与云服务

####1)类比为操作系统

有人曾以移动互联网类比认为,区块链领域将可能出现类似苹果iOS、谷歌研发的安卓等移动操作系统.以操作系统类比区块链容易等到推论,未来可能少数几个区块链系统会成为产业主导,就像曾经在桌面计算机、服务器和移动操作系统上发生的一样:桌面系统是Windows与苹果的macOS,服务器系统是Windows Server、Linux等,移动操作系统是iOS与Android.
	
	苹果的iOS和谷歌开发的Android是一个有意思的类比:
	
	+ iOS是苹果专属的系统,特点是硬件和软件的紧密结合,大量的iPhone手机装机量以及成熟的开发和应用生态;
	+ Android则是完全不一样的选择,谷歌将其开发出来后其以近乎开源系统的方式运作,手机厂商自己定义硬件规格和屏幕尺寸,市场上出现了多种对之进行深度改造的系统,如小米的MIUI.
	
	以太坊选择的路径可认为是iOS,而EOS的路径则相当于Android,除了支持社区运行一个EOS主网外还鼓励其他人采用其开源的EOSIO开源软件架设自己的区块链网络.

在2016出版的《商业区块链》中,区块链专家威廉穆贾雅以"数以百万计的区块链"(Getting to millions of blockchains)作为一个小节标题.从整体上其展望的未来图景是:"随着公有、私有、半私有、特殊目的以及其他类型的区块链的增长扩散,数以百万计的区块链世界将会实现."其说法可能展现了最可能的区块链未来图景.

比特币区块链的大量替代币与后来比特币的多个分叉币让很多人觉得多条链式错误的发展方向,只应该有一条区块链即最初的那条比特币区块链.站在比特币中心的视角,以太坊等众多新区块链项目也曾被认为是"替代链"(alt chain),虽然以太坊是一个参考比特币区块链思路开发的全新项目.之后虽然以太坊成为被接受的主要区块链之一且看起来至少有多条区块链存在,但大家仍在不断按操作系统类比预测哪条区块链会成为新主导者.

但威廉·穆贾雅的“数以百万计的区块链”可能才是区块链的未来；反过来数百万条不同的区块链——这个正在涌现的图景又暗示了，操作系统的类比可能无助于更好地思考区块链的应用可能。

####2)类比为网站

威廉穆贾雅还做了一种不太准确却容易理解的类比————"区块链将成为新网站".回顾从20世纪90年代开始的网站发展史后其类比指出"每个公司一定会拥有或参与各种各样的区块链,无论它们是私有的、半私有的或公共的."

从区块链至今为止的发展路径继续观察,其由分布式账本与去中心网络组成,可在数字世界中做价值表示和价值转移,通证使区块链的数字资产大量涌现.

区块链不是一个纯粹的软件系统,其应用也不是软件,对其未来的合理类比可能不是"操作系统".当下的区块链不是面向普通用户的应用,可能也不是"网站".

####3)类比为云服务平台

未来各个区块链可能更加类似于互联网上的云服务平台,但和现有云服务平台不同其核心功能是价值交易(见下图)

![区块链3.0的可能:价值交易应用的云服务平台](qukuailian3.0dekenengjiazhijiaoyiyingyongdeyunfuwupingtai.jpg)

###作为云服务的区块链3.0

从区块链的技术演进历程中去看作为云服务的区块链3.0

区块链1.0,比特币时期,为创建一种新的数字货币,开发者修改比特币源代码形成新的区块链和替代币.

区块链2.0,以太坊占据主导的时期,区块链主要应用依然是创建数字货币,但不需再建立自己的区块链,而是编写以太坊的智能合约并在其上创建通证.

这些通证技术上的有效性靠以太坊的分布式网络保障,以太坊曾将自己定位为一台"全球分布式计算机",《区块链革命》中,商业思想家唐塔普斯科特如此写:"区块链上运行的所有计算资源可在整体上视为一台计算机."

对于区块链3.0,可期待除了管理链上原生的、映射自线上的、映射自线下的各种数字资产外,区块链上能运行复杂的价值交易应用,也即从区块链2.0的一个个通证进化到区块链3.0的一个个应用(见下图).区块链3.0要成为"应用的平台",会使其基础模型和已知的以太坊模型有很大差别.

![区块链如何应用:从区块链1.0到区块链3.0](qukuailianruheyingyongcongqukuailian1.0daoqukuailian3.0.jpg)

如今从区块链2.0到区块链3.0,人们关注的焦点往往是性能问题,比如以太坊计划通过改用POS共识机制(casper)和分片技术(sharding)提升性能,又如EOS采用委托权益证明机制(DPOS)提升性能.

但为了让区块链可变成应用的平台,架构的变化同样重要.

要看待这一个个应用(App),可有两种方式:既可以将其看成区块链操作系统 上软件,其用一条区块链的分布式账本和去中心网络;也可将其看成类似于一条条链,其有着自己的分布式账本与去中心网络.

但这两者的区别并不大,类比地看,云服务出现之前若要开发一个网站或应用性要自己架设和运维服务器;而有了云服务后,可在云服务上开发自己的应用.采用云服务时一个个应用有自己的一组专用服务器,像之前一样.类似地,若采用类似的架构开发区块链应用则可认为一个个应用也像有自己的一条条独立区块链.

故未来区块链3.0整体构成方式可能类似于现在的云服务器.现在各个作为基础公链的区块链项目做的正是云服务;以开源软件系统、分布式账本、去中心网络为基础,提供一系列和价值有关的云计算服务(见下图).

![云服务vs区块链:同样的构成方式](yunfuwuvsqukuailiantongyangdegouchengfangshi.jpg)

诸如亚马逊云等云服务的出现是亚马逊将自己的基础设施通用化向所有人开放:                        
1.开发亚马逊云的软件系统；     
2.部署和维护一个包括数十万台服务器的计算机网络;               
3.为其他公司与开发者提供云计算软件服务;                 

现在对试图在各个领域或产业找那个实际应用区域链的人,若要在区块链上开发应用需要一个类似的云服务架构;区块链的软件系统、分布式账本与去中心网络以及一系列云计算软件服务.

故可模仿网络服务或云服务(web services)称这一系列软件服务为价值网络服务或区块链云服务(value web services)

区块链云服务与现有云服务也有很多不同:          
1.它提供的云计算软件服务基于分布式账本与去中心网络.                
2.软件系统通常不由一家公司开发而是由社区开发并以开源方式发布.          
3.去中心网络不由一家公司运维,而是由不同主体出于经济激励自主提供.                         
4.一系列云计算软件服务不由一家公司提供而由社区提供

###走向应用的五条路径

让超级账本(HyperLedger)为代表的联盟链软件是重要思路之一,其由IBM最初提出与研发,现在由开源软件组织Linux基金会管理,是开发区块链应用的重要软件平台.

与比特币、以太坊等公有链完全开放任何人都可接入不同,联盟链需要经过许可才可接入,也称许可链(permissioned blockchain),参与到区块链系统中的每个节点都需经过许可,未经许可的节点无法接入.联盟链有其特殊用途,较适合大型公司在自己内部部署使用或部署后在自己的产业链生态中邀请合作伙伴接入,亦可由产业联盟共同部署.

但根据互联网发展经验看,若要让区块链真正成为应用平台,主航道还是比特币与以太坊所开辟的道路,这条主航道常被称为"基础公链"或"底层公链".其目标是开发一条通用功能或专一功能的公有链,并同时做三件事:开发软件、运行系统、运营社区.

####基础公链:通用类(general)

在这条路径上，以太坊已经做了开创性尝试且仍在持续发展。它是完全通用的，是通用类的基础公链。类似的项目还有不少，其中最热门的是 EOS，以及现在市值处于前 20 名的小蚁（NEO）、新经币（XEM）等。其中，按到现在为止的产品情况看，对 EOS 的设计思路最简单的描述或许是：一个更快、更好、更适合应用开发的以太坊。

####基础公链:功能类(functional)

基础公链的路径之二是开发专用于某类功能的区块链，比如市值处于前20名的有专用于物联网的 IOTA 等。区块链的经典项目之一是 Steem 区块链和它的博客平台 Steemit，它是专用于数字内容的，在中国有类似的数字内容项目，如币乎。又比如，中国区块链社区巴比特开发的比原链（Bytom）是专用于数字资产交换的，按白皮书披露的信息它要做到的是，连通比特世界与原子世界，实现“比特资产”（原生的数字货币、数字资产）和“原子资产”（有传统物理世界对应物）的交互与流转。

####基础公链:行业类(sectoral)

基础公链的路径之三十开发专用于某个行业的区块链,充分考虑该行业特点提供相关功能,比如保险、供应链金融、游戏、政务等.

除以上内容外,还有一大类新区块链项目目标是做技术的基础设施,可称为基础服务(basic services),这里列举两种可能方向.

其中一组是这些项目看到的事实是在区块链的世界中必然有多条链甚至有非常多条链共存,链与链之间的功能或资产连接就变得非常重要.其关注的焦点是跨链的资产交易.              

2018年年初,新区块链项目区块基石(ArcBlock)自称区块链3.0,其核心是提供跨链协议,并以云服务的形式为开发者提供便利.另一个新项目梵塔网络(Penta)则定位在做"区块链世界的连接器",要实现三大连接————链与链的连接、链与中心化系统的连接、链上与链上价值的连接,即为了推进区块链的应用不只是连接不同的链,连接链上与链下,更要在需要时连接链与中心化系统.

在鲸准研究院与节点资本研究中心的"侧链跨链研究报告"(2018年)中,其认为侧链与跨链在技术上大体相似,只有在谈到它们的服务对象时才需做细致的区分:一般来说,侧链服务于主链,而跨链视图改进链之间价值和功能的连通.其实,现在区块链领域的主要应用之一"币币交易所"实质上做的也是跨链资产交易,只是目前采用的主要还是中心化的方式.目前主要的交易所都推出了自己的通证(一般称平台币)并公布基础公链计划即准备用区块链技术改进自身业务.

在基础服务方面另一组可能方向是随着去中心化应用的出现各种基础性技术服务成为刚需.比如文件存储就是一个需要解决的问题,星际文件系统(InterPlanetary File System,IPFS)等项目备受关注.随着区块链应用的发展在周边将出现更多技术需求,分布式文件存储仅是其中之一.

综合以上讨论,在通向区块链3.0即应用平台路上,大体上出现了五条路径:通用类基础公链、功能类基础公链、行业类基础公链、联盟链开源软件及基础服务(见下图).还可再回到云服务的视角展望区块链的发展路径,通常云服务可分为不同层次:IaaS(基础架构即服务)、PaaS(平台即服务)、SaaS(软件即服务).

![区块链3.0:通向应用平台的五条可能路径](qukuailian3.0tongxiangyingyongpingtaidewutiaokenenglujing.jpg)

类似地有的基础公链提供最底层的区块链服务如通用类基础公链;有的提供PaaS,有的提供SaaS，其覆盖的范围是功能类基础公链和行业类基础公链,当然要注意现有云服务和区块链分类方式不是一一对应的关系(见下图).

![作为云服务的区块链](zuoweiyunfuwudequkuailian.jpg)

###[讨论]从多个网到多条链

雷纳特卡桑辛(Renat Khasanshyn)曾展示他基于联盟链理解的区块链应用未来.现在各类系统如相互连接在一起的金融系统是由多个中心化的数据库组成.用区块链技术改造这些系统其设想是在合适的地方用相应的区块链取代原来的数据库(见下图),从下图可看出,中心化的数据库被去中心化的区块链取代.

也可看到,就像现有系统由多个数据库以分散方式连接在一起,新的系统由多条区块链组成其也以分散方式连接在一起.要注意这里绘制的是几乎所有中心化数据库都被去中心化区块链取代,而实际情况可能是适合区块链的会被区块链取代,适合中心化的仍保留原有状态.如现在在区块链中多条链之间的资产交换主要有效方式是高度中心化的交易所.

![未来的可能图景](weilaidekenengtujing.jpg)

##EOS是什么？EOS和比特币、以太坊有何区别?

现在从加密数字货币市值看,除了比特币、以太坊等之外,市值最高的项目是企业操作系统(Enterprise Operating System,EOS).从关注度看,EOS也是2017~2018年明星项目并常被认为是区块链3.0的主要竞争者.

EOS是由Block.one公司开发的一个新区块链软件系统,其目标是将一切去中心化(decentralize everything).从2017年年中开始,经过一年代币众筹后,于2018年6月15通过由数十个区块生产者(block producer,BP,又称超级节点)组成的社区上线了主网,EOS主网这条主要的区块链开始正式运转.

	通过EOS Tracker可查看EOS区块链网络(EOS主网)的情况,网址为:[https://eostracker.io/](https://eostracker.io/);对应的,以太坊网络可通过以下网址查看:[https://etherscan.io/](https://etherscan.io/);比特币网络可通过以下网址查看:[https://blockchain.info/](https://blockchain.info/).
	
	虽然有一个EOS主网,但实际情况复杂很多,任何人都可用EOS提供的EOSIO开源软件建立自己的一条链且EOS鼓励开发者这样做.

然后分几个主题介绍EOS这个基础公链和其应用开发,EOS这个基础公链可说是为应用而生.

###EOS VS 以太坊

从开发目标上,比特币、以太坊、EOS是渐进的,分别是区块链1.0、区块链2.0、区块链3.0，重心分别是货币、合约、应用.以太坊实际应用中是通证为主,以太坊、EOS均是借鉴与延续之前思路重新开发,以太坊是比特币的改进,EOS是以太坊的改进.

用比喻的方式对比比特币、以太坊、EOS,见下图.

![比特币、以太坊、EOS的对比](bitebiyitaifangEOSdeduibi.jpg)

比特币设计思路类似黄金,数字世界中按工作量证明共识机制挖矿节点进行加密计算获得比特币形式的挖矿奖励.挖矿节点也可获得交易费收益,不过虽然在比特币网络中的资产价值高,但交易并不频繁,交易费收益目前在矿工收益中占比并不高.

以太坊的设计思路类似于高速公路,在这条收费高速公路上,车辆行驶需要付费.它早期募集资金,建设"高速公路",早期投资者享有"高速公路"的主要权益.之后一起建设与维护"高速公路“的挖矿节点也可获得挖矿奖励与交易费收益.以太坊网络中,由于各类项目已经基于它生成了大量通证,以太坊网络交易量较多,挖矿节点获得的交易费收益占比高于比特币.

EOS设计思路类似于房地产开发,Block.one公司将土地售卖出去后,逻辑上其用获得的资金进行基础开发,此后每年再以类似填海造田方式增加5%土地.EOS繁荣主要取决于已经竞购得到大量土地的开发商是不是开发和经营好自己的地块.EOS网络要依靠超级节点(即区块生产者)来各自建设、共同运营,按现在的设计这些节点共同获得每年1%新增发的EOS作为回报.

与以太坊不同,EOS网络设计是不再收取网络交易费,持有EOS通证则拥有对应网络使用权利.但若一个应用开发不持有足够的EOS通证可能就要从市场中购买和付费租用以获得使用主网权利.类比看这种设计类似于购买或租用办公楼.

以上用比喻方式讨论只是为了便于理解,EOS实际情况是:Block.one公司募集资金开发一个名为EOSIO的开源软件,EOS社区用这个软件运行EOS主网,且从逻辑上说这个主网并非由Block.one公司运行而是由社区运行.另外,其他人也用EOSIO这个开源软件建立替代网(altnet).

	替代网(altnet)模仿替代币(altcoin)而创造出来,社区运行EOS主网(mainnet)之外,EOS鼓励其他人用EOSIO开源软件架设新的区块链网络,这些区块链网络类似于替代币的替代网。比特币的替代币与比特币的价值无关,类似地替代网也与EOS主网无关。

EOS是对以太坊的改进,各个用EOSIO开源软件运行的区块链网络可以做几乎所有以太坊能做的事,如编写智能合约、发行通证.

###为何EOS有超级节点竞选

EOS采用的共识机制是DPOS(委托权益证明),即一些节点在获得足够多的投票支持后,成为见证人(witness)节点或EOS中所说的区块生产者(BP,也称超级节点),负责区块链的区块生成.

对于比特币系统,任何人都可接入网络以算力竞争记账权利生成区块.而对于EOS,只有超级节点才有资格生产区块.这是因为两者采用的共识机制不同:比特币和以太坊采用工作量证明共识机制,EOS采用DPOS(委托权益证明)共识机制.

POW与DPOS的比较主要在能源消耗、效率、安全等方面.但也可从去中心网络形成角度来做下比较,为何DPOS是一种可行选择.

基于区块链思路开发的软件系统有三个关键要求:

+ 一是性能,其去中心网络整体性能能否支撑大量应用；
+ 二是网络,其共识机制、经济激励和社区运营能否吸引足够多节点加入形成一个安全可靠的去中心网络;
+ 三是功能,无论目标是通用类、功能类还是行业类,其是否提供了应用开发所需必备技能.

一个基础公链成败关键正是以上三点:性能、功能与网络(见下图),EOS已经在性能与功能上做了很多努力,而DPOS共识机制与超级节点竞选是EOS在"网络"这个角上所作努力.

![基础公链的三角:功能-性能-网络](jichugongliandesanjiaogongnengxingnengwangluo.jpg)

对比特币和以太坊网络,较长周期内其以挖矿经济激励的方式逐渐吸引了足够多的节点加入.对于一些基础公链区块链项目由于各种原因,其主要节点由基金会或关联方运行.其中较为典型的是小蚁(NEO),其拥有较大的交易吞吐量(TPS),但官方节点不到10个.

在2017年12月报告中,NEO理事会提到其网络的去中心化计划并解释:"我们希望至少有3个节点由外部的实体运行……去中心化的初期阶段：2个节点将由 City of Zion运行，1个节点将由社区运行，并将由社区资助(独立于基金会)，2个节点将由以盈利为目的的区块链公司运行，2个节点将由NEO理事会运行."

	NEO的共识机制是DBFT，全称为Delegated Byzantine Fault Tolerant，是一种通过代理投票来实现大规模节点参与共识的拜占庭容错型共识机制(见NEO白皮书：http://docs.neo.org/zh-cn/).

EOS则用超级节点竞选的方式刺激形成一个活跃的去中心网络并且超级节点竞选与其共识机制DPOS(委托权益证明)高度匹配.按现在的设计,获得投票的21个活跃生产者和179个候补生产者一起生产EOS这条区块链的区块,即运行这个区块链网络.这些区块生产者是动态的,时刻根据投票动态调整.

	EOS 的区块链生产者的收益分配机制是，区块生产者一共可获得每年新增出来的 1% 的 EOS 通证作为回报，其中 0.25% 按每个区块来进行奖励，0.75% 按所获投票来进行分配。可参见 2018 年 5 月 12 日项目发布的信息。

从2018年年初到6月15日EOS主网上线,围绕超级节点(BP)的竞争已经显示这个机制相对成功地调动了众多参与者竞争,促成了EOS去中心网络形成,其是一条务实、有效的路径。

从另一个相关的机制设计,也可看到EOS团队的精心设计.与其他代币发行的项目不同，EOS通证的发行持续了一年之久，这一方面吸引关注，另一方面或许更重要的是这种做法使得EOS通证相对分散地存在于众多持有者手中，在一定程度上保障了它所使用的委托权益证明共识机制的有效性。

###EOS的体系架构:与比特币、以太坊的对比

EOS被认为是区块链3.0的有力竞争者,来看下比特币、以太坊和EOS三者体系架构的差异.

	从 EOS 系统架构看BM的野心，唐煜/文，2018 年 4 月 24 日，https://mp.weixin.qq.com/s/pJQmZngnginnQL-OwcVMag。

![EOS体系架构](EOStixijiagou.jpg)

最基础的层次————数据层与网络层,EOS和比特币、以太坊并没有太大区别.

EOS共识机制采用了与之前较为不同的DPOS(委托权益证明)共识机制.由于采用DPOS共识机制,EOS网络的激励层就可看成不再单独存在(图中也未表示出来).EOS网络每年新增发5%的EOS币,其中1%按一定规则分配给区块生产者,另外4%进入社区的提案系统(worker proposal system)资金池待分配.

EOS的智能合约和以太坊略有差异但基本上采取了相似设计,EOS应用也与以太坊相似.因此对于合约层和应用层,两者相似.

EOS的体系设计创新在于工具层和生态层.为让EOS适用于应用开发,EOS团队为其设计了账户、持续化数据库(Multi-Index DB)等工具与接口.故这里延续唐煜的分类认为在合约层和应用层之间存在一个工具层使得EOS区块链上开发应用更便利.

EOS另一个特殊设计在于其将自己的EOS主网和EOSIO软件分开,鼓励开发者采用EOSIO软件建立行业专用、领域专用的区块链网络(应采用新网络名),并建立自己的一系列应用.在体系架构最上层可能出现一个生态层,这一层采用EOSIO软件的区块链,比如专为游戏、物流、金融、社交、能源、医疗开发的公链.

---
##EOS的共识机制与区块生成

《EOSIO技术白皮书》中,对EOS的共识机制BFT-DPOS(拜占庭容错算法+权益委托共识机制进行了说明,其中拜占庭容错算法(Byzantin eFault Tolerance)的用途是:

	所有的出块者都要对所有区块签名，以确保在同一时间戳或者同一区块高度上，没有区块生产者能够同时在两个区块上签名。一旦一个区块有了 15 个区块生产者的签名，该区块就被认为是不可逆的。任一区块生产者如果想在同一时间戳或者同一区块高度的两个区块上签名，就会留下密码学证据。在这一模式下，一秒之内就可以达成不可逆的共识。

白皮书中,EOS对其区块的出块机制进行了介绍,转摘如下:

根据这一算法，在使用 EOSIO 软件构建的区块链上持有通证的人，可以通过一个持续进行的投票系统来选择区块生产者。任何人都可以选择参加区块生产，只要能够说服通证持有人为其投票，就会有机会参与区块的生产。

EOSIO 软件可以让区块每 0.5 秒生成一个。在任何时刻，只有一个生产者被授权生产区块。如果在计划的某个时间内没有成功出块，则跳过该块。如果有一个或更多的区块被跳过，则在区块链上会有 0.5 秒或者更久的空白。

使用 EOSIO 软件，区块的产生以 126 个区块（每个出块者六个区块，乘以 21 个出块者）为一个周期。在每个出块周期开始时，软件会根据通证持有人所投票数选出 21 个区块生产者。被选中的区块生产者的出块顺序要获得 15 个及以上的区块生产者的同意。

如果出块者错过了一个块，并且在最近 24 小时内没有产生任何块，则这个出块者将被剔除在考虑范围之外，直到他们通知区块链可以重新开始产生区块。这确保了网络的顺利运行，把被证明为不可靠的区块生产者排除在出块排序之外，这一方式使得错过区块的数量最小化。

资料来源:   

+ 中文译文摘自:   
[http://blog.eosdata.io/index.php/2018/04/28/eos-io-whitepaper-v2/](http://blog.eosdata.io/index.php/2018/04/28/eos-io-whitepaper-v2/)

+ 英文版见:
[https://github.com/EOSIO/Documentation/blob/master/TechnicalWhitePaper.md](https://github.com/EOSIO/Documentation/blob/master/TechnicalWhitePaper.md)

---
##丹尼尔·拉瑞莫(BM):EOS的主要开发者

EOS的主要开发者是区块链的传奇人物丹尼尔拉瑞莫(Daniel Larimer),其网名是ByteMaster,网上也被称为BM,BM个人参与创建了三个主要区块链公链项目,EOS是第三个,见下图.

![丹尼尔拉瑞莫开发了三个主要区块链项目与一个共识机制](dannierlaruimokaifalesangezhuyaoqukuailianxiangmuyuyigegongshijizhi.jpg)

BM开发的第一个主要区块链项目是比特股(Bitshares X,BTS),此项目创建了一个去中心化的银行和交易所,使用区块链账本创造可互换数字资产,这些资产可市场化锚定美元、黄金、汽油等任何东西的价值.

这个区块链的共识机制正是所谓DPOS共识机制([https://bitshares.org/technology/delegated-proof-of-stake-consensus/](https://bitshares.org/technology/delegated-proof-of-stake-consensus/)).DPOS是BM于2013年12月8日提出,同年7月其已经利用这一共识机制开发了比特股.比特股的DPOS共识机制被抽象成了石墨烯(graphene)框架,业界中被广泛使用,技术文档见:[http://docs.bitshares.org/](http://docs.bitshares.org/)

BM开发的第二个主要区块链项目是内容区块链Steem和基于它的博客平台Steemit.加密数字货币发展初期,这个博客平台激励了很多关于数字货币、区块链的内容写作,Steem区块链采用的共识机制也是DPOS.

BM曾经与中本聪在邮件组进行交流并提出要改变比特币的工作量证明共识机制以让交易进行得更快.中本聪回应了去中心化的重要性后给BM的回应成为比特币与区块链世界中的名言:如果你没理解或者不相信,我也没空去说服你,抱歉.("If you don’t believe me or don’t get it,I don’t have time to try to convince you,sorry.")中文世界中,这几句话也被戏谑地翻译并戏称为区块链世界的信条:"爱信信,不信滚."

BM曾透露,自己的理想是"找到一个能够保障人们生活、自由和财产安全的自由市场方案"(to find free marekt solutions to secure life,liberty,and property for all)

BM的故事还可参考如下报道文章:            
[https://hackernoon.com/dan-larimer-visionary-programmer-of-bitshares-steem-and-eos-7e6d94b241d7](https://hackernoon.com/dan-larimer-visionary-programmer-of-bitshares-steem-and-eos-7e6d94b241d7)

EOS创始人BM(Dan Larimer)的小传:
[https://zhuanlan.zhihu.com/p/33771609](https://zhuanlan.zhihu.com/p/33771609)

---
##一张图理解EOS是什么

从比特币到以太坊再到EOS,其背后的组织渐趋复杂.比特币处于完全自运转的状态,以太坊由以太坊基金会开发软件和运转该区块链网络,出于各种原因EOS显得更加复杂.其至少包括以下三部分:

+ 第一,EOSIO软件,这个开源软件由Block.one公司开发,严格来说这是一个社区开发的开源软件,任何人都可参与开发、提交代码;
+ 第二,EOS币(EOS通证),EOS币由Block.one公司在以太坊上按ERC20通证标准发售.按发售条款,发售获得的ETH资金归属Block.one公司,历时一年的发售于2018年6月2日结束,之后EOS币被映射到上线的EOS主网,其现在是EOS主网的原生数字货币.
+ 第三,EOS主网.通过竞选,一批区块生产者(BP,超级节点)被选出来,其启动EOS主网.EOS主网于2018年6月初由EOS社区上线.但可合理推测EOS社区中Block.one公司有非常大的影响力.

主网外还出现了一些未获得EOS社区广泛认同的可视为EOS替代网(altnet,是一个之前造的与替代币(altcoin)、替代链(altchain)相对应的词)

EOSIO是一个开源软件,Block.one公司也支持各方使用这个开源软件架设自己的区块链网络.不过也出现了一些有争议的替代网,比如有的替代网试图混淆自己与EOS主网,开发者还可用EOSIO软件建立单节点测试网、多节点测试网.

到此可看到,EOS组成部分与多数基础公链项目一致,包括三部分(一条链、一个通证、一个软件):EOS主网、EOS通证、EOSIO开源软件.EOS主网也由分布式账本与去中心网络组成.与其他基础公链较大不同的是,其鼓励更多的人在主网之外使用和运行EOSIO开源软件.

如下图所示,EOS的主网包括三层:最核心层是由区块生产者(BP)组成的EOSIO核心网,中间层是EOSIO接入网,外层是EOSIO用户.

EOSIO开源软件包括一系列软件,其中主要有三个:nodeos、cleos、keosd.

+ nodeos:EOS的核心程序,是EOS节点的后台程序.
+ cleos:管理EOS区块链和钱包的命令程序
+ keosd:管理EOS钱包的程序

EOS主网账户包括两种:外部账户(由私钥控制的外部账户)和合约账户.和账户相关的概念是钱包与权限,钱包是保存秘钥的客户端,而权限包括两个基础权限类别(owner 与 active),应用可自定义各种权限.

![一张图看懂EOS区块链与EOSIO开源软件](yizhangtukandongEOSqukuailianyuEOSIOkaiyuanruanjian.jpg)

###EOS的智能合约

EOS的智能合约关联在各个合约账户上,在EOSIO系统中"合约"沿用了区块链的专业术语,但其含义非常接近Linux操作系统的后台应用,比如节点启动时会包括四个缺省合约如eosio.bios、eosio.token等.

EOS智能合约可通过两种方式调用,一是用户通过命令调用;二是通过EOSIO软件的send方法调用.一个账户通过转账等动作触发另一个合约账户的合约运行后,这个合约可通过软件代码调用其他合约.

EOS智能合约现在用C++语言编写,文件格式分别为<kbd>*.hpp/*.cpp</kbd>,编译后变为WebAssembly格式文件WASM(*.wast)与应用头文件(*.abi)

---
##区块链"不可能三角"

一个基础公链要同时兼顾功能、性能、网络三要素.区块链设计中,还有一个更知名的"不可能三角"(见下图),指一个区块链项目无法同时满足三个条件,最多只能同时满足两个条件:

+ 可扩展性(scalability)
+ 去中心化(decentralization)
+ 安全(security)

![区块链的不可能三角](qukuailiandebukenengsanjiao.jpg)

对比比特币和EOS:比特币系统看重去中心化和安全而牺牲了可扩展性;EOS一定程度上牺牲了去中心化而追求可扩展性与安全.

很多领域中都有这样的不可能三角,我们要在三个因素间权衡:

+ 比如在软件工程中的时间（time）、成本（money）、功能性（scope）。
+ 比如在分布式系统中的一致性（consistency）、可用性（availability）、网络分区（partition tolerance）。
+ 比如在货币汇率政策中的三元悖论或保罗·克鲁格曼所画的永恒的三角形，即调节性（adjustment）、置信度（confidence）、流动性（liquidity）(见下图)

![保罗克鲁格曼的永恒三角形](baoluokelugemandeyonghengsanjiaoxing.jpg)

---

###区块链应用(去中心化应用)是什么样子
EOS的技术白皮书给出了应用所需六个条件,而EOS的软件设计的确是对应这些条件设计.这里重点讨论EOS的三个为应用而做的特别设计:用户免费、账户体系、存储.

区块链应用的六个条件:
1.支持百万级别用户,需能够处理数千万日活跃用户的区块链技术;       
2.使用免费,应用开发人员需具备灵活性,能够为用户提供免费服务,用户不必为了使用平台或从平台服务中受益而收费;          
3.轻松升级和故障修复,区块链平台必须对软件和智能合约的升级提供支持;         
4.延迟低,及时反馈是良好用户体验的基础;           
5.串行性能,有些应用程序由于必须顺序执行命令,无法用并行算法实现,区块链需提供强大的串行性能支持;              
6.并行性能,大型应用程序需在多个CPU和计算机之间分配工作负载.            

> 《EOSIO技术白皮书》翻译版:[http://blog.eosdata.io/index.php/2018/04/28/eos-io-whitepaper-v2/](http://blog.eosdata.io/index.php/2018/04/28/eos-io-whitepaper-v2/);英文版:[https://github.com/EOSIO/Do-cumentation/blob/master/TechnicalWhitePaper.md#accounts](https://github.com/EOSIO/Do-cumentation/blob/master/TechnicalWhitePaper.md#accounts)

###区块链应用要去中心化到什么程度

类似于互联网,让区块链变得有用的所有期待都寄托在应用上,通常人们也称之为去中心化应用(DAPP).讨论EOS为应用所做特别设计前,先讨论区块链应用或所谓去中心化应用架构,这是区块链落地应用最前沿.

对于应用的前景,《区块链革命》一书中,唐塔普斯科特曾展望:"我们在进入数字化革命的一个新纪元，人们可以进行分布式软件的编程和分享。就如区块链协议本身是分布式的那样，一个分布式的应用程序或 DAPP（去中心化应用程序）会在很多计算机上运行，而不是在一个单一的服务器上运行."

现在被认同的发展前景是,互联网将从信息互联网跨越到基于区块链的价值互联网.信息互联网的应用是网站与移动APP.展望应用时,很多人认为在区块链上将出现原生的区块链应用或去中心化应用.

这样形成的结构如下图a:网站、移动APP对应的是信息互联网，而所谓区块链应用/去中心化应用对应着区块链.早期应用确实存在这样的状态,如区块浏览器、每个区块链自己的钱包等.每条区块链都是分布式账本与去中心化网络,其提供数据与功能.早期应用与这些 区块链交互.

但普通用户使用区块链时,应用可能变成类似b)的样子:网站与移动APP中有一个与区块链进行数据和功能交互的"区块链应用",而普通用户看到的还是网站与移动应用.对于普通用户,可能根本没有什么区块链应用或去中心化应用,只有应用.

![信息互联网和去中心化应用分开](xinxihulianwanghequzhongxinhuayingyongshifenkaide.jpg)

若单独看一条区块链应用,情形可能如下图所示.               

+ 这条区块链是分布式账本与去中心网络,其提供一系列与价值相关的数据与功能.
+ 多个应用接入区块链网络.这些应用中,有的可能是普通用户可用,是网站/移动App与区块链应用的组合;有的可能是纯粹的区块链应用.

![区块链应用的可能性](qukuailianyingyongdekenengxing.jpg)

有的应用可能接入多个区块链如现在常见的应用交易所、钱包.             

基于Steem区块链的Steemit博客应用是少有的普通用户可使用的应用。Steem区块链上,上述应用架构展现较为明晰:

+ Steem区块链上存储价值(STEEM币、SP、SBD等三种通证),并按照内容贡献进行价值分配.
+ 基于这条区块链建立有多个应用:普通用户可用的Steemit博客平台、视频平台DTube等;常备的应用如区块链浏览器steemd.com网站,其社区较为活跃,还有许多其他应用.

Steem 的主要开发者也是 EOS 的主要开发者丹尼尔·拉瑞莫（BM），EOS 是将 Steem 区块链通用化，并做了很多改进。比如，对比 Steem 与 EOS 我们可以看到，EOS 不再采用把内容存放在区块链上这个不合理的设计，但它继续扩展了 Steem 中已经有的账号与权限体系。

比特币系统完成了用区块链进行价值表示和价值转移的概念验证，而 Steem 区块链和 Steemit 博客平台这个早期项目可能完成了区块链应用的概念验证。现在，EOS 将其之前的很多设计发扬光大。

在《去中心化应用》一书中，开发者西拉杰·拉瓦尔对去中心化应用的去中心化程度进行了一番讨论。他认为，区块链可能在四个过去集中化的方面完成去中心化：

+ 将数据去中心化（decentralized data）
+ 将财富去中心化（decentralized wealth）
+ 将身份去中心化（decentralized identity）
+ 将计算去中心化（decentralized computing）

区块链的核心功能是去中心化的价值表示和价值转移，它们分别对应的是以上分类中的财富与计算。当试图构建应用时，我们应把重点放在这两者上面。和其他主要的区块链一样，EOS 在这两个方面做得很好。它还试图大幅度改进区块链本身的核心性能，即每秒事务处理量（TPS）。

或许同样重要的是，与其他区块链相比，EOS 为开发一个普通用户可用的应用，提供了更多的功能与特性。接下来讨论 EOS 为应用而做的三件事：用户免费、账户与权限体系、存储系统。

###用户免费
讨论应用所需条件时,EOS白皮书写道:"用户不必为了使用平台或从平台的服务中受益而付费."            
用户免费是EOS与比特币、以太坊相对而言的显著差别.在比特币、以太坊系统中,普通用户若进行转账交易等操作,需支付相应交易费.而EOS将承担这个费用的压力转移给了应用提供者.

用户免费和EOS的通证经济设计紧密相关.使用一个区块链应用通常需要三种资源.对于熟悉计算机的人,带宽资源和计算资源容易理解,但状态资源是区块链专用术语.如之前讨论,区块链账本中存储状态,如交易账本、账户余额等,按其名字缩写为RAM,其性质大约相当于内存.          

EOS特别举例说明什么应该存入状态,什么不应该存入状态.如,一个区块链应用程序的逻辑不需读取博客文章的内容和评论,因此其不应存储在区块链状态中.但博客文章或评论是否存在、投票数及其他属性,需存在区块链状态中.

> 特别,BM之前设计与开发了内容专用区块链Steem,Steem中博客文章和评论文本存储在区块链的区块(区块链账本)中.BM实践中可能意识到正确做法应该是只在区块链账本中存储于交易相关信息.

简单地说,区块链用于交易,区块链状态是交易账本,则与交易相关信息应存入交易账本,而与交易无关的信息不应存入交易账本.

EOS区块链三种资源消耗机制是这样：区块生产者(BP)公布可用带宽(bandwidth)、计算(computation)和状态(state)容量.

EOSIO系统允许每个账户消耗一定比例可用资源,这个比例根据账户将自己持有通证存入"三天抵押合约"数量决定.

例如假设有一个基于EOS的应用,若一个账户持有总通证的1%,则这个账户可利用1%的状态存储容量.因此,对于如何做到对用户免费,EOS设计关键是如下两点.

<b>第一,用户不用直接向区块链付费,而由应用处理</b>

在以太坊区块链网络中,若要将以太币或其他基于ERC20标准的通证转移给他人,作为交易发起人 ,需自己设定一个交易费(gas),给区块链网络直接付费从而让以太坊网络处理这一交易.

EOS设计逻辑基于这样的假设:"没有任何网站要求访问者为维护服务器而支付小额费用.因此去中心化应用程序不该强迫其用户为使用区块链而向区块链支付直接费用."

EOS虽然以"接收方付费"作为一个讨论部分的小标题,但其思路其实是由应用自己决定采取什么样的方式.通常为了应用能够便于用户使用,其基本逻辑应该是应用自行解决费用,最终用户使用区块链网络是免费的.

<b>第二,将交易成本与通证价值区分开.</b>

以太坊区块链网络中,支付交易费支付的是以太币,随着以太币价格涨跌,交易成本随着通证价格波动.而EOS设计逻辑是:"将交易成本与通证价值区分开."

EOS区块链网络做法是,一个应用拥有的带宽、计算、状态等资源,是与其持有的通证数量有关.

若作为应用开发者不持有足够通证则EOS区块链网络还提供一种租用机制,这个机制是"将资源能力授权出去"(delegating capacity):通证持有人可能不需要立即消耗可用带宽的全部或部分资源,其可选择将未消耗的带宽委托或租赁给他人.

但要注意这句话:"带宽和计算可以授权给他人,但是对应用程序状态的存储需要开发者持有通证,直至状态删除为止.如果程序的状态永不删除，那么这部分通证就退出了流通."

> 根据 EOSIO 文档，这里的状态可认为指的是一个应用所占用的区块链网络的 RAM 存储空间。原文为：Storage of application state will require an application developer to hold tokens until that state is deleted.If state is never deleted,then the tokens are effectively removed from circulation.

> 对比以太坊和 EOS 我们可以看到，在以太坊中进行交易，个人用户需要支付交易费，而在 EOS 中进行交易，则是应用提供者需要承担成本，现在看来其中主要的成本是与 RAM 存储空间相关的。

###账户与权限体系

EOS与比特币、以太坊一大不同点是,其允许用户创建一个不超过12位长的用户名,这个用户名代表我们的账户.

####以太坊账户

比特币区块链根本没有账户概念,比特币只有地址;以太坊设计了账户,但远没有EOS这么完备的账户权限相关功能.先看下从比特币到以太坊的"从地址到账户",再看EOS的账户设计.

比特币没有账户,所有比特币交易都是地址之间的交换.所持有的比特币是各个地址中比特币总和,比特币系统中没有账户、余额.

以太坊引入了账户的概念:以太坊账户.每个账户包括四个信息:一个随机数、账户余额、合约代码(若有)、存储(通常为空).

以太坊包括两类账户:

+ 外部由私钥控制的账户;
+ 合约控制的账户.

对比特币,其只有由外部私钥控制的地址.以太坊外部账户没有代码,可创建和签署一个交易发出信息,而一个合约账户收到信息后可执行相应代码和处理存储.这里"合约"代码相当于存在于以太坊执行环境中的"自治代理",其拥有自己的以太坊账户,其收到信息后相当于被捅了一下,然后自动执行一段代码.

和比特币一样,以太坊的区块中存储的也是交易,其包括字段主要有:接受者(接受的账户)、发送者的签名、发送者发给接受者的以太币金额等.

####EOS的账户

EOS的账户系统复杂很多,其更像银行的账户系统或在互联网应用(如谷歌、微信等)中的账户系统.

一个EOS账户系统可发送动作(action)给另一个账户,而每个账户都可设定一个处理器(handler)自动处理发送给自己的动作.动作与处理器的结合就是EOS的智能合约(见下图).

每个账户都有自己的内部数据库(private database),这个账户内部的内部数据库只有自己的动作处理器可访问.

![EOS账户交互:动作与处理器](EOSzhanghujiaohudongzuoyuchuliqi.jpg)

EOS系统提供了标准的基于角色的权限系统(role based permission management),这使得所有基于EOS开发的应用都可采用这个账户体系与权限系统,而不必自己重新造轮子.

在BM之前开发的Steem区块链中基于角色的权限系统被引入区块链中,其在Steem中硬编码了三种用户权限:owner、active、posting.

> EOS白皮书在讨论Steem时说:"posting 权限只能执行诸如投票和发布等社交行为，而 active 权限除了更改所有者之外，还可以做其他任何事情。owner 权限用作冷存储，它能够做所有事情"

EOS对此进一步改进,对这个基于角色的权限系统进行了通用化,"允许每个账户持有者定义自己的权限层次结构以及动作的分组",这样做给了应用开发者更多自由度.

> 在EOS开发者文档中,有关于账户与权限的开发信息,见[ https://developers.eos.io/eosio-nodeos/docs/accounts-and-permissions]( https://developers.eos.io/eosio-nodeos/docs/accounts-and-permissions)

EOS的账户权限系统中有两个缺省的权限组:最高级别的缺省权限组是owner，第二个缺省权限组是active,其可做出除更改外所有者之外所有事.其他权限组都可由active派生,这些 权限组用户可自行定义.如,开发一个博客应用,就可自定义一个publish权限组.

![EOS白皮书中的一个权限系统示例](EOSbaipishuzhongdeyigequanxianxitongshili.jpg)

###存储系统

> EOS 存储的白皮书见：https://github.com/EOSIO/Docum-entation/blob/master/EOS.IO%20Storage.pdf。其中，它强调区块链的区块中不应存储文件.

只有与交易相关的信息应存储于区块链的区块中,则对于去中心化的应用其他数据应存储在何处?绝大多数基础公链都没有解决这个周边问题而聚焦于区块链的核心任务————交易.但为了让EOS更好用于开发应用,EOS2017年9月就发布了EOS存储的独立白皮书,解释了其在存储方面的开发设想.

讨论了星际文件系统(IPFS)、分布式存储项目(Filecoin、Maidsafe、Siacoin、Storj),以及现有中心化存储(如DropBox、GoogleDriver、苹果的iCloud)等后,其提出了用自己的通证与IPFS结合,形成一个用于EOS应用开发的存储.

有了基于IPFS的文件存储系统后,在2017年12月12日,EOS团队发表文章给出了其建议的EOS应用开发架构(见下图).从图可看到,在其建议的应用开发框架中,EOS的应用是被建议存储在基于IPFS的EOS存储中(即图中的IPFS File Storage).目前为止,EOS在存储方面仅仅提供了一个设想,离真正落实还有距离.

总的来说,区块链将价值表示和价值转移这俩个与价值有关的核心功能区中心化了,区块链应用可通过接口与区块链交互数据(通证)和计算(通证交易).EOS作为当下最热门新区块链系统,其特色在于在这两个核心功能外其为应用的开发提供了各种便利,可能促进更多应用出现.

![EOS应用开发框架](EOSyingyongkaifakuangjia(2017.12).jpg)

区块链的第七第八个定义如下图所示.

![区块链的定义之七之八](qukuailiandedingyizhiqizhiba.jpg)

---

##EOS密钥被盗后如何恢复

EOS的账户体系还有一个与绝大多数区块链项目不同的特征,其提供了"密钥被盗后的恢复".对其他区块链项目,密钥丢失则一切都丢失无法恢复,而EOS基于其用户权限机制提供了恢复功能.

这争议很大,但可能是需要的.过去区块链项目假设你需要管理好自己的密钥,没人为你负责.但现实生活中当丢掉了银行的密码之后，我们希望在提供相关证明之后，银行能帮忙找回密码,帮我们找回自己的钱.

当然EOS提供的恢复功能只有在非常严格的情况下才可以做到：假设你的私钥被黑客盗走了,在这种情况下,你可以用过去30天中有效的owner权限对应的私钥,和你预先设定的账户恢复合作伙伴(account recovery partner)重置账户的私钥.这样你可能夺回了账户的所有权.

> EOS 白皮书讨论说：“这个过程与简单的多重签名机制有极大的不同。通过多重签名的交易，有一个对象会执行并参与每一笔交易。然而，账户恢复合作伙伴仅参与了恢复的过程，并没有权力参与日常的交易。这极大地降低了相关参与者的成本和法律责任。”

按照BM之前设计的Steem区块链,要保证账户中的数字资产不被盗走,还需要其他机制的协同.如果黑客获得你的账户的所有权,可以立刻将你的账户中的数字资产转走,则你的数字资产就丢失了,你即便恢复了账户也毫无用处.

在Steem区块链中有这样的机制的示例.比如如果我们把STEEM币存入一个储蓄账户(也就是转化所谓的STEEM Power),则我们要从中把STEEM币取出来，首先要经过一个7天的等待期，然后在接下来的13周中，每周可以取出1/13.如果有这样的机制,那么只要在一定的时间内进行了账户恢复,重新获得账户的控制权,我们的数字资产就还没有被全部盗走.

[教程链接](http://c.biancheng.net/view/1939.html)