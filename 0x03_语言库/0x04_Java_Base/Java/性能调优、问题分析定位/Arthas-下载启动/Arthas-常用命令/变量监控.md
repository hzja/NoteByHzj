Java Arthas
<a name="7XBR0"></a>
### `ognl`-查看类属性变量的值
<a name="NXH5C"></a>
#### ognl '@包名.类名@字段名' ：（对于`final`修饰的`static`变量不可查看）
```bash
[arthas@4084]$ sc -d -f com.smart.util.CapitalUtil
 class-info        com.smart.util.CapitalUtil
 code-source       /D:/LinkSpace/Work/WorkSpace/Code/IDEA/finchain-web/target/
 name              com.smart.util.CapitalUtil
 isInterface       false
 isAnnotation      false
 isEnum            false
 isAnonymousClass  false
 isArray           false
 isLocalClass      false
 isMemberClass     false
 isPrimitive       false
 isSynthetic       false
 simple-name       CapitalUtil
 modifier          public
 annotation
 interfaces
 super-class       +-java.lang.Object
 class-loader      +-sun.misc.Launcher$AppClassLoader@18b4aac2
                     +-sun.misc.Launcher$ExtClassLoader@6ff29830
 classLoaderHash   18b4aac2
 fields            name     N
                   type     []
                   modifier private,static
                   value    [C@7ef8eeac

                   name     U
                   type     []
                   modifier private,static
                   value    [C@51d1795f

                   name     X
                   type     []
                   modifier private,static
                   value    [C@13ad7386


Affect(row-cnt:1) cost in 13 ms.
[arthas@4084]$ ognl '@com.smart.util.CapitalUtil@N'
@char[][
    @Character[闆禲,
    @Character[澹筣,
    @Character[璐癩,
    @Character[鍙乚,
    @Character[鑲哴,
    @Character[CR],
    @Character[闄哴,
    @Character[鏌抅,
    @Character[鎹宂,
    @Character[鐜朷,
]
[arthas@4084]$
```
![image.png](https://cdn.nlark.com/yuque/0/2020/png/396745/1595039907675-39b877bf-e2dc-418e-b5a0-77e44ed5a1a2.png#averageHue=%233d3d3d&height=687&id=WUdL0&originHeight=2060&originWidth=1942&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1439522&status=done&style=none&title=&width=647.3333333333334)
<a name="Ft8pG"></a>
#### 对于`final`修饰的变量不可查看和更改
```bash
[arthas@4084]$ sc -d -f com.smart.service.impl.KmsServiceImpl
 class-info        com.smart.service.impl.KmsServiceImpl
 code-source       /D:/LinkSpace/Work/WorkSpace/Code/IDEA/finchain-web/target/
 name              com.smart.service.impl.KmsServiceImpl
 isInterface       false
 isAnnotation      false
 isEnum            false
 isAnonymousClass  false
 isArray           false
 isLocalClass      false
 isMemberClass     false
 isPrimitive       false
 isSynthetic       false
 simple-name       KmsServiceImpl
 modifier          public
 annotation        org.springframework.stereotype.Service
 interfaces        com.smart.service.KmsService
 super-class       +-java.lang.Object
 class-loader      +-sun.misc.Launcher$AppClassLoader@18b4aac2
                     +-sun.misc.Launcher$ExtClassLoader@6ff29830
 classLoaderHash   18b4aac2
 fields            name       baseUrl
                   type       java.lang.String
                   modifier   private
                   annotation org.springframework.beans.factory.annotation.Value

                   name       keySpec
                   type       java.lang.String
                   modifier   private
                   annotation org.springframework.beans.factory.annotation.Value

                   name     CREATE_KRY
                   type     java.lang.String
                   modifier final,private,static
                   value    createKey

                   name     CHANGE_PWD
                   type     java.lang.String
                   modifier final,private,static
                   value    changePwd


Affect(row-cnt:1) cost in 11 ms.
[arthas@4084]$ ognl '@com.smart.service.impl.KmsServiceImpl@CREATE_KEY'
Failed to execute ognl, exception message: ognl.OgnlException: Could not get static field CREATE_KEY from class com.smart.service.impl.KmsServiceImpl [java.lang.NoSuchFieldException: CREATE_KEY], please check $HOME/logs/arthas/arthas.log for more details.
```
![image.png](https://cdn.nlark.com/yuque/0/2020/png/396745/1595040605914-9aefd5c0-3fe1-4dac-9dfa-3fb37541916c.png#averageHue=%233d3d3d&height=583&id=jqzQx&originHeight=1750&originWidth=3323&originalType=binary&ratio=1&rotation=0&showTitle=false&size=2035256&status=done&style=none&title=&width=1107.6666666666667)
<a name="paDmw"></a>
#### `ognl`的其他操作-调用包装类的方法
<a name="434ro"></a>
##### 静态变量 `hashSet` 值
```bash
[arthas@19856]$ ognl '@com.Arthas@hashSet'
@HashSet[
    @String[count1],
    @String[count2],
    @String[count29],
    @String[count28],
    @String[count0],
    @String[count27],
    @String[count5],
```
<a name="9JwoX"></a>
##### 静态变量 `hashSet` 大小
```bash
[arthas@19856]$ ognl '@com.Arthas@hashSet.size()'
    @Integer[57]
```
<a name="QLVEa"></a>
##### 静态变量 `hashSet` 进行操作
```bash
[arthas@19856]$ ognl  '@com.Arthas@hashSet.add("test")'
    @Boolean[true]
[arthas@19856]$
# 查看添加的字符
[arthas@19856]$ ognl  '@com.Arthas@hashSet' | grep test
    @String[test],
[arthas@19856]$
```

