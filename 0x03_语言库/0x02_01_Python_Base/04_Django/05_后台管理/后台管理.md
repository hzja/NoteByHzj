# **后台管理**

## 1.语言和时区的本地化

~~~ python
# settings.py

LANGUAGE_CODE = 'zh-hans'
TIME_ZONE = 'Asia/Shanghai'
~~~



## 2. 创建管理员

~~~ python
python manage.py createsuperuser
~~~



## 3. 创建模型类

~~~ python
# models.py

from django.db import models

class User(models.Model):
    gender = (
        ("man", "男"),
        ("weman", "女"),
    )
    username = models.CharField(max_length=128, unique=True)
    password = models.CharField(max_length=256)
    email = models.EmailField(unique=True)
    sex = models.CharField(max_length=32, choices=gender, default="男")
    c_time = models.DateTimeField(auto_now_add=True)

    # 页面显示姓名
    def __str__(self):
        return self.username
	
    # 自定义类名，默认是User
    class Meta:
        # 按创建时间的反序排列
        ordering = ["-c_time"]
        # 自定义表名
        db_table = 'User'
        # 自定义下图那个用户名
        verbose_name = "用户"
        verbose_name_plural = verbose_name
~~~

![1586857314517-3a1a1917-6189-46cd-b046-9d71c73cffee](D:\Note\python\Django\图片\1586857314517-3a1a1917-6189-46cd-b046-9d71c73cffee.png)



## 4. 自定义管理页面

自定义模型管理类。模型管理类就是告诉django在生成的管理页面上显示哪些内容。

~~~ python
from django.contrib import admin
from app.models import User


class UserInfoAdmin(admin.ModelAdmin):
    # 指定每页显示10条数据
    list_per_page = 10
    list_display = ['username', 'password', 'email', 'sex', 'c_time']
    # 列表页右侧过滤栏
    list_filter = ['username']
    # 列表页上方的搜索框
    search_fields = ['username']

# 注册模型类
admin.site.register(User, UserInfoAdmin)
~~~

![1586856832172-beacb1c2-020e-40be-8bc9-6c1e641b2eab](D:\Note\python\Django\图片\1586856832172-beacb1c2-020e-40be-8bc9-6c1e641b2eab.png)