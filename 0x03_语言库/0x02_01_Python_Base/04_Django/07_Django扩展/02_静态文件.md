# 静态文件

项目中的CSS、图片、js都是静态文件。一般会将静态文件放到一个单独的目录中，以方便管理。在html页面中调用时，也需要指定静态文件的路径，Django中提供了一种解析的方式配置静态文件路径。静态文件可以放在项目根目录下，也可以放在应用的目录下，由于有些静态文件在项目中是通用的，所以推荐放在项目的根目录下，方便管理。



## 静态加载

1. 在settings.py文件中定义静态文件存放的物理目录。

~~~ python
# 设置访问静态文件对应的url地址
STATIC_URL = '/static/'

STATIC_ROOT = os.path.join(BASE_DIR, '/static/')

# 设置静态文件存放的物理目录
STATICFILES_DIRS = [
    os.path.join(BASE_DIR, "static"),
]
~~~



2. 在项目根目录下创建static目录，再创建img、css、js目录。

![1580704300466-b0664b5c-4918-4269-a7cf-0fb3f7331a72](..\图片\1580704300466-b0664b5c-4918-4269-a7cf-0fb3f7331a72.png)



3. 在booktest/views.py中定义视图static_test。

~~~ python 
def static_test(request):
    return render(request,'booktest/static_test.html')
~~~



4. 在booktest/urls.py中配置url。

~~~ python
url(r'^static_test/$',views.static_test),
~~~



5. templates/booktest/下创建static_test.html文件。

~~~ html
<html>
<head>
    <title>静态文件</title>
</head>
<body>
<img src="/static/img/sg.png"/>
</body>
</html>
~~~



6. 保存图片到static/img/目录下，名称为sg.png。



7. 运行服务器，浏览效果如下图：

![1580704549173-61ed82d2-6bb4-4544-9d28-3ee9c02abadc](D:\Note\python\Django\图片\1580704549173-61ed82d2-6bb4-4544-9d28-3ee9c02abadc.png)



## 动态加载（常用）

1. 在应用下创建static文件，在static目录下分别创建css、js、images



2. settings.py中配置静态文件存放的物理目录

~~~ python
# 设置访问静态文件对应的url地址
STATIC_URL = '/static/'

STATIC_ROOT = os.path.join(BASE_DIR, '/static/')

# 设置静态文件存放的物理目录
STATICFILES_DIRS = [
    os.path.join(BASE_DIR, "static"),
]
~~~



3. templates下新建html文件

~~~ html
{% load staticfiles %}
#动态获取STATIC_URL,拼接文件路径。
~~~



例如动态获取图片文件

~~~ html
<img src=”{ % static ‘images/1.jpg’ % }”>
~~~

查找顺序：先去你配置的静态文件存放的物理目录下找，再去app下的静态文件目录下找