# 富文本编辑器

借助富文本编辑器，网站的编辑人员能够像使用offfice一样编写出漂亮的、所见即所得的页面。

在虚拟环境中安装包。

~~~ python
pip install django-ckeditor
~~~

安装完成后，可以使用在Admin管理中，也可以自定义表单使用。



## 示例

1）在settings.py中为INSTALLED_APPS添加编辑器应用。

~~~ python
INSTALLED_APPS = (
    ...
    'ckeditor',  # 添加ckeditor富文本编辑器
    'ckeditor_uploader',  # ckeditor进行文件上传
)
...
# 配置MEDIA_URL和MEDIA_ROOT, 上传路径的根目录就是以MEDIA_ROOT
CKEDITOR_UPLOAD_PATH = "uploads/",
~~~



2） urls.py

~~~ python
urlpatterns = [
    ...
	re_path(r'^ckeditor/', include('ckeditor_uploader.urls')),
]
~~~



3）在models.py中设置：用django-ckeditor库自己的富文本字段RichTextField替换普通的文本字段TextField

~~~ python
from ckeditor.fields import RichTextField


class Article(models.Model):
    title = models.CharField(max_length=100, verbose_name='标题')
    desc = models.CharField(max_length=256, verbose_name='简介')
    content = RichTextField(verbose_name='内容')
~~~



4）迁移和同步

~~~ python
python manage.py makemigrations
python manage.py migrate
~~~



5）修改comment/admin.py文件，将评论模块注册到后台中

~~~ python
from django.contrib import admin
from .models import Article

admin.site.register(Article)
~~~

![1587540628460-a1db4cdb-c4a2-45fa-ab3b-54a3291f4c55](D:\Note\python\Django\图片\1587540628460-a1db4cdb-c4a2-45fa-ab3b-54a3291f4c55.webp)



6）ckeditor允许你在settings.py中进行自定义配置

~~~ python
my_blog/settings.py
...
CKEDITOR_CONFIGS = {
    # django-ckeditor默认使用default配置
    'default': {
        # 编辑器宽度自适应
        'width':'auto',
        'height':'250px',
        # tab键转换空格数
        'tabSpaces': 4,
        # 工具栏风格
        'toolbar': 'Custom',
        # 工具栏按钮
        'toolbar_Custom': [
            # 表情 代码块
            ['Smiley', 'CodeSnippet'], 
            # 字体风格
            ['Bold', 'Italic', 'Underline', 'RemoveFormat', 'Blockquote'],
            # 字体颜色
            ['TextColor', 'BGColor'],
            # 链接
            ['Link', 'Unlink'],
            # 列表
            ['NumberedList', 'BulletedList'],
            # 最大化
            ['Maximize']
        ],
        # 加入代码块插件
        'extraPlugins': ','.join(['codesnippet']),
    }
}
~~~

