<a name="TF-IDF"></a>
## TF-IDF

TF-IDF算法(Term Frequency-Inverse Document Frequency，词频-逆文档频次算法)由两部分组成：TF算法以及IDF算法。TF算法是统计一个词在一篇文档中出现的频次，其基本思想是，一个词在文档中出现的次数越多，则其对文档的表达能力越强。而IDF算法则是统计一个词在文档集的多少个文档中出现，其基本思想是，如果一个词在越少的文档中出现，则其对文档的区分能力也就越强。

**TF的计算常用式：**![](./img/5c6caf82210dea05a0c29373e5fd6978.svg)

其中![](./img/20f462cf01b3cd1486e2f778344f188b.svg)表示词![](./img/865c0c0b4ab0e063e5caa3387c1a8741.svg)在文档![](./img/363b122c528f54df4a0446b6bab05515.svg)中出现的频次，但是仅用频次来表示，那长文本的词出现频次高的概率更大，这会影响到比较。所以计算时会对词频进行归一化，分母部分就是统计文档中每个词出现次数的总和，也就是文档的总词数。

**IDF的计算常用式：![](./img/0701983f7b6f6bdf49e2e058ec17c592.svg)**

其中![](./img/a2d2184975ac156e22c2994baecc5a3a.svg)为文档集中总文档数，![](./img/7a796e0ba082a76dffba65af5ab4c862.svg)为文档集中出现词![](./img/865c0c0b4ab0e063e5caa3387c1a8741.svg)的文档数量。分母加![](./img/c4ca4238a0b923820dcc509a6f75849b.svg)是采用了拉普拉斯平滑，避免有部分新的词没有在语料库中出现过而导致分母出现零的情况。

**TF-IDF的计算常用式：![](./img/2dac0c067ccc32557c84620111f03e64.svg)**

TF和IDF公式怎么融合，是相乘还是相加，IDF要不要取对数，经过理论推导与实验研究后，发现上式为较有效的计算方式之一。

<a name="TextRank"></a>
## TextRank

TextRank算法可以脱离语料库的背景，仅对单篇文档进行分析就可以提取该文档的关键词。TextRank算法的基本思想来源于PageRank算法。PageRank的基本思想有两条：

1. 链接数量。一个网页被越多的其他网页链接，说明这个网页越重要。
2. 链接质量。一个网页被一个越高权值的网页链接，说明这个网页越重要。

![](./img/9dda75dd19a2d1c86acb764cd8762de9.svg)为![](./img/3aa80d7d51539d94036ba2e47b2c0c49.svg)的入链集合，![](./img/2f7b5c709fe1180d1c741fab2426c12a.svg)为![](./img/3aa80d7d51539d94036ba2e47b2c0c49.svg)的出链集合，![](./img/20da41f34c8b9f1a37a848ddccf6652f.svg)为![](./img/3aa80d7d51539d94036ba2e47b2c0c49.svg)的出链数量，每个网页将它自身的分数平均贡献给每个出链。若![](./img/7ea483603117938601e6502688bf45c3.svg)链向![](./img/3aa80d7d51539d94036ba2e47b2c0c49.svg)， 则![](./img/81c490ebfef454bde40cf6667acbbdac.svg)即为![](./img/7ea483603117938601e6502688bf45c3.svg)贡献给![](./img/3aa80d7d51539d94036ba2e47b2c0c49.svg)的分数。将![](./img/3aa80d7d51539d94036ba2e47b2c0c49.svg)的所有入链贡献给他的分数全部加起来，就是![](./img/3aa80d7d51539d94036ba2e47b2c0c49.svg)自身的得分：

![](./img/6e8ec87f199673381a94f8b1a8c33340.svg)

算法开始时会将所有网页的得分初始化为![](./img/c4ca4238a0b923820dcc509a6f75849b.svg)，然后通过多次迭代来对每个网页分数进行收敛。收敛时的得分就是网页的最终得分，如不收敛则限定最大迭代数，停止时的分数为网页得分。为避免一些没有出链入链的网页得分为![](./img/cfcd208495d565ef66e7dff9f98764da.svg)的情况，我们加入阻尼系数![](./img/8277e0910d750195b448797616e091ad.svg)来帮助平滑，即从所有总分中分出一部分给这些网页：

![](./img/ae55ab3e1391e49eec36594f346502d2.svg)

以上是PageRank的理论，也是TextRank的基础。不同的是PageRank是有向无权图，而TextRank则是有权图，因为在计分时除了考虑链接句的重要性外，还要考虑两个句子间的相似性。计算每个句子给它链接句的贡献时，需要通过计算权重占总权重的比例来分配。在这里，权重就是两个句子的相似度，相似度的计算可采用编辑距离，余弦距离等。另外，我们在对一篇文章进行自动摘要时，默认每个句子和其他所有句子都是有链接关系的，也就是一个有向完全图。

![](./img/f6606d3c3d358482311152e9b69b31ab.svg)

当TextRank用于关键词抽取时，与应用在自动摘要时有两点不同：1、词与词之间的关联没有权重；2、每个词不是与文档中所有词都有链接。

基于第一点不同，TextRank与PageRank就一致了(链接无权重)，即

![](./img/173c5c969bc4c4e4d321578bd8f5d66c.svg)

基于第二点不同，每个词不是与所有词链接，我们使用滑窗界定谁与谁链接，如下例：

“世界献血日，学校团体、献血服务志愿者等可到血液中心...”，经分词后“世界，献血，日，学校，团体，献血，服务，志愿者，等”，现窗口设为![](./img/e4da3b7fbbce2345d7772b0674a318d5.svg)，则得：

1)[世界，献血，日，学校，团体]    2)[献血，日，学校，团体，献血]

3)[日，学校，团体，献血，服务]    4)[学校，团体，献血，服务，志愿者]

每个窗口内所有的词都有链接关系。得到了链接关系，我们就可以套用TextRank公式，对每个词进行得分计算，最后选择最高的![](./img/7b8b965ad4bca0e41ab51de7b31363a1.svg)个词作为关键词。
