# C

## 1、数组下标
C语言中访问数组元素一般都写成：
```java
arrayName[index]
```
但其实也可以写成：
```java
index[arrayName]
```
请看下面的代码：
```java
#include <stdio.h>
int main(void){
    int arr[5] = {1, 2, 3, 4, 5};
    printf("%d\n", 2[arr]);
    return 0;
}
```
运行结果：
```
3
```


## 2、符号替换
早期 IBM 在计算机产业中的地位非常重要，但是它的键盘没有中括号和花括号按键，所以在C语言中可以使用其它的组合符号来替代，并且一直保留到现在。<br />可以使用`<:`和`:>`来代替`[`和`]`，使用`<%`和`%>`来替换`{`和`}`。<br />例如，下面的代码是可以正常编译运行的：
```java
#include <stdio.h>
int main(void)
<%
    int arr<:5:> = {1, 2, 3, 4, 5};
    printf("%d\n", 2<:arr:>);
    return 0;
%>
```
<a name="YRR5x"></a>
## 3、趋近运算符
C语言有一种“趋近运算符”，写作`-->`或者`<--`，可以让一个变量的值逐渐趋近于某个数字。<br />请看下面的代码：
```java
#include <stdio.h>
int main(void){
    int x = 10;
    do{
        printf("%d ", x);
    }while(0<--x);
    return 0;
}
```
运行结果：
```
10 9 8 7 6 5 4 3 2 1
```
其实，这不过是假象罢了，趋近运算符只是一种奇巧淫技而已。<br />`<--`可以拆分成两个运算符，分别是小于运算符`<`和自减运算符`--`，而`--`的优先级大于`<`，所以先执行`--`，再执行`<`。<br />while 循环中的正确逻辑如下：

- x 先自减 1；
- 判断 x 是否大于 0；
- 回到 do 循环体打印 x。
<a name="uZYI7"></a>
## 4、字符串拼接
将两个由`" "`包围的字符串放在一起，它们会自动拼接成一个字符串，请看下面的代码：
```java
#include <stdio.h>
int main(void){
    const char* str = "C "  "C++"  "Python";
    puts(str);
    return 0;
}
```
运行结果：
```
C C++ Python
```
由`""`包围的字符串默认是不能换行的，如果文本内容比较长，可以使用`\`来换行。请看下面的代码：
```java
#include <stdio.h>
int main(void){
    const char* str = "C is the foundation. \
C++ C + + is a C-based extension. \
Python is a scripting language.";
    puts(str);
    return 0;
}
```
运行结果：
```
C is the foundation. C++ C + + is a C-based extension. Python is a scripting language.
```
注意，`\`必须放在当前行的末尾。
<a name="tu80q"></a>
## 5、long 不一定比 int 长
C语言有三种基本的整数类型，分别是 short、int、long，很多初学者认为，后者的长度大于前者的长度，这个其实是不对的。<br />C语言并没有严格规定 short、int、long 的长度，只做了宽泛的限制：

- short 至少占用 2 个字节。
- int 建议为一个机器字长。32 位环境下机器字长为 4 字节，64 位环境下机器字长为 8 字节。
- short 的长度不能大于 int，long 的长度不能小于 int。<br />所以它们的长度（所占字节数）关系为：

2 ≤ short ≤ int ≤ long<br />这就意味着，short 并不一定真的”短“，long 也并不一定真的”长“，它们有可能和 int 占用相同的字节数。<br />在 16 位环境下，short 的长度为 2 个字节，int 也为 2 个字节，long 为 4 个字节。16 位环境多用于单片机和低级嵌入式系统，在PC和服务器上已经见不到了。<br />对于 32 位的 Windows、Linux 和 Mac OS，short 的长度为 2 个字节，int 为 4 个字节，long 也为 4 个字节。PC和服务器上的 32 位系统占有率也在慢慢下降，嵌入式系统使用 32 位越来越多。<br />在 64 位环境下，不同的操作系统会有不同的结果，如下所示：

| 操作系统 | short | int | long |
| --- | --- | --- | --- |
| Win64（64位 Windows） | 2 | 4 | 4 |
| 类Unix系统（包括 Unix、Linux、Mac OS、BSD、Solaris 等） | 2 | 4 | 8 |

目前使用较多的PC系统为 Win 7、Win 10、Win 11、Mac OS、Linux，在这些系统中，short 和 int 的长度都是固定的，分别为 2 和 4，大家可以放心使用，只有 long 的长度在 Win64 和类 Unix 系统下会有所不同，使用时要注意移植性。
<a name="pLUbB"></a>
## 6、1Byte 不一定等于 8Bit
人们通常认为 1Byte 等于 8Bit，就好像公理一样，但其实C语言标准并没有这样说。<br />C语言标准只是规定一个 Byte 必须能够以正数的方式容纳整个 ASCII 编码表，但是具体实现还要依赖编译器。虽然理论上不会出现 1Byte=7Bit 这种情况，但是说不好哪天有个脑袋进水的家伙搞出来一个编译器，规定 1Byte=9Bit。<br />可以通过 CHAR_BIT 这个宏来获得当前编译环境的字节长度，如下所示：
```java
#include <stdio.h>
#include <limits.h>


int main(void){
    printf("%d", CHAR_BIT);
    return 0;
}    
```
