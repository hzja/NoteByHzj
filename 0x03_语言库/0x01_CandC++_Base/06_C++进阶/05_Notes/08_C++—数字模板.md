# C++ 数字模板

## 数字模板范例和非类型参数
### [arraytp.h](https://github.com/Fcscanf/Pro1/commit/8b9404043d5bfe51302d3fe79f478ba8d394e734#diff-c3f420eb03eb4a3f95508d32ff2df9c9c210fb26b5d9ddf85c162e54bd98bcb9)
```cpp
#ifndef PRO1_ARRAYTP_H
#define PRO1_ARRAYTP_H

#include <iostream>
#include <cstdlib>

using namespace std;

template <class T, int n>
class ArrayTP {
private:
    T ar[n];
public:
    ArrayTP(){};
    explicit ArrayTP(const T & v);
    virtual T &operator[](int i);
    virtual T operator[](int i) const ;
};

template <class T, int n>
ArrayTP<T, n>::ArrayTP(const T &v) {
    for (int i = 0; i < n; i++) {
        ar[i] = v;
    }
}

template <class T, int n>
T & ArrayTP<T, n>::operator[](int i){
    if (i < 0 || i >= n) {
        cerr << "Error in array limits: " << i << "is out of range\n";
        exit(EXIT_FAILURE);
    }
    return ar[i];
}

template <class T, int n>
T ArrayTP<T, n>::operator[](int i) const {
    if (i < 0 || i >= n) {
        cerr << "Error in array limits: " << i << "is out of range\n";
        exit(EXIT_FAILURE);
    }
    return ar[i];
}

#endif //PRO1_ARRAYTP_H
```
<a name="SmOGc"></a>
### [arraytp.cpp](https://github.com/Fcscanf/Pro1/commit/8b9404043d5bfe51302d3fe79f478ba8d394e734#diff-9f9651b5d0c80a4cd5c581ab58dce3b14816c1862ab5ebee07e34b94d1609625)
```cpp
#include "arraytp.h"
```
<a name="LreKW"></a>
## 数字模板的使用范例
<a name="n9yzU"></a>
### [main.cpp](https://github.com/Fcscanf/Pro1/commit/213fa9c0c34039f2b6f0063c3526b0a20b54ccee#diff-608d8de3fba954c50110b6d7386988f27295de845e9d7174e40095ba5efcf1bb)
```cpp
#include <iostream>
#include "module11_class_template/arrry/arraytp.h"

using namespace std;

// 数组模板的使用
void useArrayTemplate(){
    ArrayTP<int, 10> sums;
    ArrayTP<double , 10> aves;
    ArrayTP<ArrayTP<int, 5>, 10> twodee;
    int i, j;
    for (int i = 0; i < 10; i++) {
        sums[i] = 0;
        for (int i = 0; i < 5; i++) {
            twodee[i][j] = (i + 1)*(j + 1);
            sums[i] += twodee[i][j];
        }
        aves[i] = (double)sums[i] / 10;
    }
    for (int i = 0; i < 10; i++) {
        for (int i = 0; i < 5; i++) {
            cout.width(2);
            cout << twodee[i][j] << ' ';
        }
        cout << " :sum = ";
        cout.widen(3);
        cout << sums[i] << ", average = " << aves[i] << endl;
    }
    cout << "Done.\n";
}

int main() {
    useArrayTemplate();
    return 0;
}
```
