数据科学<br />用可视化方式展现变量之间的关系。R-GGally包就可以轻松绘制配对图矩阵、散点图矩阵、平行坐标图和生存图等。主要内容如下：

- R-GGally包简介
- R-GGally包主要函数示例
<a name="FZsgo"></a>
## R-GGally包简介
作为R-ggplot2的拓展包，其可以通过添加定义好的绘图函数绘制例如散点图矩阵、平行坐标图等统计图表。
<a name="cb9XW"></a>
### 官网
[https://ggobi.github.io/ggally/index.html](https://ggobi.github.io/ggally/index.html)
<a name="H59Sc"></a>
### 主要绘图函数简介

- `ggmatrix()`：用于管理矩阵状布局中的多图的绘图函数，其可适应任何数量的行和列。
- `ggpairs()`：作为`ggmatrix()`的一种特殊形式，可实现对多元数据进行成对比较。默认情况下，`ggpairs()`: 提供每对列的两次不同比较，并沿对角线显示相应变量的密度或计数。通过不同的参数设置，可将对角线替换为轴值或者变量标签。
- `ggduo()`：在绘图矩阵中用于显示两个分组数据，比较适用于多时间序列分析和回归分析。
- `ggally_*()`：用于绘制多种高级图表。
- `ggbivariate()`：用于地绘制一个结果和几个解释变量之间的双变量关系的可视化图。
- `ggnostic()`：用于显示每个给定解释变量的完整模型诊断。
- `ggscatmat()`：用于数字矩阵图绘制。
- `ggtable()`：用于绘制绘制离散变量的交叉表。
- `ggcoef_model()`：用于绘制模型的系数。
- `ggnetworkmap()`：用于绘制各种精美的地图。

以上就是R-GGally包较为常用的绘图包。
<a name="swuGx"></a>
## R-GGally包主要函数示例
<a name="spDgR"></a>
### `ggmatrix()`绘图函数
```r
plotList <- list()
for (i in 1:6) {
  plotList[[i]] <- ggally_text(paste("Plot #", i, sep = ""),color = I("#0057FF"))
}
#可视化绘制
ggmatrix <- GGally::ggmatrix(
      plotList,
      nrow = 2, ncol = 3,
      xAxisLabels = c("A", "B", "C"),
      yAxisLabels = c("D", "E"),
      title = "Matrix Title",
      byrow = FALSE) +
    labs(
        title = "Example of <span style='color:#D20F26'>GGally::ggmatrix function</span>",
        subtitle = "processed charts with <span style='color:#1A73E8'>ggmatrix()</span>",
        caption = "Visualization by <span style='color:#DD6449'>DataCharm</span>") +
    hrbrthemes::theme_ipsum(base_family = "Roboto Condensed") +
    theme(
    plot.title = element_markdown(hjust = 0.5,vjust = .5,color = "black",face = 'bold',
                                  size = 20, margin = margin(t = 1, b = 12)),
    plot.subtitle = element_markdown(hjust = 0,vjust = .5,size=15),
    plot.caption = element_markdown(face = 'bold',size = 12))
```
![2021-05-24-23-28-18-116428.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1621870348071-bcf61e1e-8b37-468b-abdb-118ee4e305ee.png#clientId=u291d7444-8785-4&from=ui&id=ufd4ec98b&originHeight=743&originWidth=1080&originalType=binary&size=2412028&status=done&style=shadow&taskId=u7a884f64-8bc1-486f-9234-dc70d4fab10)<br />Example of ggmatrix
<a name="R91Wi"></a>
### `ggpairs()`绘图函数
```r
data(tips, package = "reshape")
ggpairs <- GGally::ggpairs(tips, mapping = aes(fill = sex,color=sex), 
                   columns = c("total_bill", "time", "tip")) +
  ggsci::scale_fill_jco() +
  ggsci::scale_color_jco() +
  labs(
        title = "Example of <span style='color:#D20F26'>GGally::ggpairs function</span>",
        subtitle = "processed charts with <span style='color:#1A73E8'>ggpairs()</span>",
        caption = "Visualization by <span style='color:#DD6449'>DataCharm</span>") +
    #hrbrthemes::theme_ipsum(base_family = "Roboto Condensed") +
    theme_bw(base_family = "Roboto Condensed")+
    theme(
    plot.title = element_markdown(hjust = 0.5,vjust = .5,color = "black",face = 'bold',
                                  size = 20, margin = margin(t = 1, b = 12)),
    plot.subtitle = element_markdown(hjust = 0,vjust = .5,size=15),
    plot.caption = element_markdown(face = 'bold',size = 12))
```
![2021-05-24-23-28-18-167262.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1621870376409-976de7e2-ebf6-4250-b034-5356118dc214.png#clientId=u291d7444-8785-4&from=ui&id=u235481a7&originHeight=743&originWidth=1080&originalType=binary&size=2412028&status=done&style=shadow&taskId=u30014545-6716-49f6-9de5-30896936e4a)<br />Example of ggpairs
<a name="adE4O"></a>
### ggally_*系列
<a name="I4qR7"></a>
#### `ggally_cross()`
```r
plot01 <- ggally_cross(tips, aes(x = day, y = smoker, fill = smoker)) +
   ggsci::scale_fill_jco() +
  labs(
        title = "Example of <span style='color:#D20F26'>GGally::ggally_cross function</span>",
        subtitle = "processed charts with <span style='color:#1A73E8'>ggally_cross()</span>",
        caption = "Visualization by <span style='color:#DD6449'>DataCharm</span>") +
    hrbrthemes::theme_ipsum(base_family = "Roboto Condensed") +
    theme(
    plot.title = element_markdown(hjust = 0.5,vjust = .5,color = "black",face = 'bold',
                                  size = 20, margin = margin(t = 1, b = 12)),
    plot.subtitle = element_markdown(hjust = 0,vjust = .5,size=15),
    plot.caption = element_markdown(face = 'bold',size = 12))
```
![2021-05-24-23-28-18-271981.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1621870435473-e6ee9f8d-160c-4fcf-9542-edbfbe056163.png#clientId=u291d7444-8785-4&from=ui&id=u94c70986&originHeight=743&originWidth=1080&originalType=binary&size=2412028&status=done&style=shadow&taskId=ua9ed9a32-3bf3-41af-b289-fc2ad530ada)<br />Example of ggally_cross
<a name="WUsuI"></a>
#### `ggally_densityDiag()`
```r
plot02 <- ggally_densityDiag(tips, aes(x = day, fill = time)) +
  ggsci::scale_fill_jco() +
  labs(
        title = "Example of <span style='color:#D20F26'>GGally::ggally_densityDiag function</span>",
        subtitle = "processed charts with <span style='color:#1A73E8'>ggally_densityDiag()</span>",
        caption = "Visualization by <span style='color:#DD6449'>DataCharm</span>") +
    hrbrthemes::theme_ipsum(base_family = "Roboto Condensed") +
    theme(
    plot.title = element_markdown(hjust = 0.5,vjust = .5,color = "black",face = 'bold',
                                  size = 20, margin = margin(t = 1, b = 12)),
    plot.subtitle = element_markdown(hjust = 0,vjust = .5,size=15),
    plot.caption = element_markdown(face = 'bold',size = 12))
```
![2021-05-24-23-28-18-414598.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1621870479357-af873236-3fa1-4226-8fe1-529152974d53.png#clientId=u291d7444-8785-4&from=ui&id=u118383d6&originHeight=743&originWidth=1080&originalType=binary&size=2412028&status=done&style=shadow&taskId=u5adb70fa-885b-48bc-9e1f-1086b94c064)<br />Example of ggally_densityDiag
<a name="dddPo"></a>
### `ggbivariate()`绘图函数
```r
ggbivariate <- ggbivariate(tips, outcome = "smoker", 
                           explanatory = c("day", "time", "sex", "tip"),
                           rowbar_args = list(
                                            colour = "white",
                                            size = 3,
                                            fontface = "bold",
                                            label_format = scales::label_percent(accurary = 1)
                                          )) +
  ggsci::scale_fill_jco() +
  labs(
        title = "Example of <span style='color:#D20F26'>GGally::ggbivariate function</span>",
        subtitle = "processed charts with <span style='color:#1A73E8'>ggbivariate()</span>",
        caption = "Visualization by <span style='color:#DD6449'>DataCharm</span>") +
    #hrbrthemes::theme_ipsum(base_family = "Roboto Condensed") +
    theme_light(base_family = "Roboto Condensed") +
    theme(
    plot.title = element_markdown(hjust = 0.5,vjust = .5,color = "black",face = 'bold',
                                  size = 20, margin = margin(t = 1, b = 12)),
    plot.subtitle = element_markdown(hjust = 0,vjust = .5,size=15),
    plot.caption = element_markdown(face = 'bold',size = 12))
```
![2021-05-24-23-28-18-520770.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1621870499121-573c3035-cbe6-497c-804f-3e9d9945c2af.png#clientId=u291d7444-8785-4&from=ui&id=u179288d0&originHeight=743&originWidth=1080&originalType=binary&size=2412028&status=done&style=shadow&taskId=ub9953342-30f4-4324-9ff9-216b6735b5e)<br />Example of ggbivariate
<a name="T9IAL"></a>
### `ggnostic()`绘图函数
```r
# 构建模型
flea_model <- step(lm(head ~ ., data = flea), trace = FALSE)
ggnostic <- ggnostic(flea_model) +
  labs(
        title = "Example of <span style='color:#D20F26'>GGally::ggnostic function</span>",
        subtitle = "processed charts with <span style='color:#1A73E8'>ggnostic()</span>",
        caption = "Visualization by <span style='color:#DD6449'>DataCharm</span>") +
    #hrbrthemes::theme_ipsum(base_family = "Roboto Condensed") +
    theme_light(base_family = "Roboto Condensed") +
    theme(
    plot.title = element_markdown(hjust = 0.5,vjust = .5,color = "black",face = 'bold',
                                  size = 20, margin = margin(t = 1, b = 12)),
    plot.subtitle = element_markdown(hjust = 0,vjust = .5,size=15),
    plot.caption = element_markdown(face = 'bold',size = 12))
```
![2021-05-24-23-28-18-580637.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1621870526313-5b1d707c-b580-4a38-8d7b-a730c2239ff3.png#clientId=u291d7444-8785-4&from=ui&id=u3107cd2d&originHeight=743&originWidth=1080&originalType=binary&size=2412028&status=done&style=shadow&taskId=ufc96cbb5-0499-4d83-8ef5-fa416ff5686)<br />Example of ggnostic
<a name="N7lPh"></a>
### `ggcoef_model()`绘图函数
```r
library(labelled)
# 数据处理
tips_labelled <- tips %>%
  labelled::set_variable_labels(
    day = "Day of the week",
    time = "Lunch or Dinner",
    total_bill = "Bill's total"
  )

mod_labelled <- lm(tip ~ day + time + total_bill, data = tips_labelled)
ggcoef_model <- ggcoef_model(mod_labelled,colour_guide = TRUE) +
ggsci::scale_color_aaas() +
   labs(
        title = "Example of <span style='color:#D20F26'>GGally::ggcoef_model function</span>",
        subtitle = "processed charts with <span style='color:#1A73E8'>ggcoef_model()</span>",
        caption = "Visualization by <span style='color:#DD6449'>DataCharm</span>") +
    #hrbrthemes::theme_ipsum(base_family = "Roboto Condensed") +
    theme_light(base_family = "Roboto Condensed") +
    theme(
    plot.title = element_markdown(hjust = 0.5,vjust = .5,color = "black",face = 'bold',
                                  size = 20, margin = margin(t = 1, b = 12)),
    plot.subtitle = element_markdown(hjust = 0,vjust = .5,size=15),
    plot.caption = element_markdown(face = 'bold',size = 12))
```
![2021-05-24-23-28-18-688321.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1621870563945-d0244fb6-d477-4ea5-9d9c-acebb3bb75d1.png#clientId=u291d7444-8785-4&from=ui&id=uc6f6e08b&originHeight=743&originWidth=1080&originalType=binary&size=2412028&status=done&style=shadow&taskId=u1fa68401-417d-41d3-b6f2-1f5475eecab)<br />Example of ggcoef_model()
