R 可视化 
<a name="UXmfW"></a>
## R-ggChernoff包绘制表情符号
R-ggChernoff包作为ggplot2的拓展包，其提供的`geom_chernoff()`绘图函数与`geom_point()`函数语法类似，只不过，其绘制的为带笑脸的表情符号，而不是常规的点。这种笑脸表情符号制作过程依据如下：脸部特征会根据连续值的相对大小变换成微笑或者皱眉。默认情况下，平均值将生成笔直的脸😑，而较高的值将产生笑脸😊，而较低的值将产生皱眉😢。如果没有映射到相应变量，默认将全部都是笑脸。更多详细内容可参考[R-ggChernoff包官网](https://github.com/Selbosh/ggChernoff)<br />接下来，将通过几个例子进行该包的解释：
<a name="ytZX8"></a>
### 「样例一」：
```r
library(ggChernoff)
library(tidyverse)
library(ggtext)
library(hrbrthemes)
library(LaCroixColoR)

geom_chernoff_plot01 <- ggplot() +
  geom_chernoff(data = iris,aes(Petal.Width, Petal.Length, fill = Species),
               size=5) +
   scale_fill_manual(values = lacroix_palette(type = "paired"))+
   labs(
    title = "Example of <span style='color:#D20F26'>ggChernoff::geom_chernoff function</span>",
    subtitle = "processed charts with <span style='color:#1A73E8'>geom_chernoff()</span>",
    caption = "Visualization by <span style='color:#0057FF'>DataCharm</span>") +
  hrbrthemes::theme_ipsum(base_family = "Roboto Condensed") +
  theme(
    plot.title = element_markdown(hjust = 0.5,vjust = .5,color = "black",
                                  size = 20, margin = margin(t = 1, b = 12)),
    plot.subtitle = element_markdown(hjust = 0,vjust = .5,size=15),
    plot.caption = element_markdown(face = 'bold',size = 12))
```
![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1624000564108-08695ce4-9e68-4a4f-a0f5-b618c62e2c92.webp#clientId=u62d04db2-e3f2-4&from=paste&id=u4ade135b&originHeight=810&originWidth=1080&originalType=url&ratio=3&status=done&style=shadow&taskId=u682f05b7-b05f-42dc-9ca0-3281c2040d9)<br />Example01 of ggChernoff
<a name="QJEb0"></a>
### 「样例二」：
```r
test_data <- lattice::barley %>% filter(site==c("University Farm","Waseca","Morris"))
geom_chernoff_plot02 <- ggplot() +
  geom_chernoff(data=test_data,aes(x = year, y = variety, smile = yield, brow = yield),
                fill = 'goldenrod1',size=8) +
  scale_x_discrete(limits = c('1931', '1932')) +
  #分面处理
  facet_wrap(~ site) +
  labs(
    title = "Example of <span style='color:#D20F26'>ggChernoff::geom_chernoff function</span>",
    subtitle = "processed charts with <span style='color:#1A73E8'>geom_chernoff()</span>",
    caption = "Visualization by <span style='color:#0057FF'>DataCharm</span>") +
  hrbrthemes::theme_ipsum(base_family = "Roboto Condensed") +
  theme(
    plot.title = element_markdown(hjust = 0.5,vjust = .5,color = "black",
                                  size = 20, margin = margin(t = 1, b = 12)),
    plot.subtitle = element_markdown(hjust = 0,vjust = .5,size=15),
    plot.caption = element_markdown(face = 'bold',size = 12))
```
![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1624000564061-d79aee2a-18c3-443a-912c-20bdfb059c49.webp#clientId=u62d04db2-e3f2-4&from=paste&id=ub3e84392&originHeight=810&originWidth=1080&originalType=url&ratio=3&status=done&style=shadow&taskId=u0928e84b-ff9e-42ba-9b0e-1a8fc21945b)<br />Example02 of ggChernoff<br />以上两个例子很好的解释了`geom_chernoff()` 绘图函数的绘图原理(其实就是将数值映射到`smile`、`brow`等参数上)，大家可根据自己的数据进行合理的数值映射即可。接下来，小编再介绍另一个绘制符号字体的R包。
<a name="NCmti"></a>
## R-emojifont包绘制表情符号
R-emojifont包不同于上面介绍的R包，其支持的符号字体(emoji font)也更加丰富，主要包括：Emoji characters(表情符号字符) 和 Font Awesome。更多信息可参考[R-emojifont包官网]()<br />接下来，通过几个例子进行简单描述：
<a name="JhA0F"></a>
### 「样例一」：
```r
data <- data.frame(
  name=c("A","B","C","D","E") ,  
  value=c(3,10,19,28,45),
  label = c(emoji('smiley'), emoji('smile'),emoji('sweat_smile'), 
            emoji('smiley_cat'),emoji('smirk'))
)

Barplot <- ggplot(data, aes(x=name, y=value,label=label,fill=name)) + 
  geom_bar(stat = "identity",color="black",width = .8) +
  geom_text(aes(y=value+6,color=name),family="EmojiOne", 
            size=8) +
  hrbrthemes::scale_color_ipsum()+
  hrbrthemes::scale_fill_ipsum()+
  labs(
    title = "Example of <span style='color:#D20F26'>emojifont::EmojiOne</span>",
    subtitle = "processed charts with <span style='color:#1A73E8'>EmojiOne</span>",
    caption = "Visualization by <span style='color:#0057FF'>DataCharm</span>") +
  hrbrthemes::theme_ipsum(base_family = "Roboto Condensed")+
  theme(plot.title = element_markdown(hjust = 0.5,vjust = .5,color = "black",
                                      size = 20, margin = margin(t = 1, b = 12)),
        plot.subtitle = element_markdown(hjust = 0,vjust = .5,size=15),
        plot.caption = element_markdown(face = 'bold',size = 12))
```
![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1624000564065-d17ce3f7-9e9e-4752-8696-2e93dede41e2.webp#clientId=u62d04db2-e3f2-4&from=paste&id=u325a96ed&originHeight=878&originWidth=1080&originalType=url&ratio=3&status=done&style=shadow&taskId=u06e75228-1ef7-4f33-b33e-aa771d4ac20)<br />Example01 of emojifont<br />这里可以看出，在每个柱形图的上方添加了对于的表情符合，当然，还可以单独使用表情符号进行绘制：
<a name="qCkTQ"></a>
### 「样例二」：
```r
##plot2
x = seq(0, 2*pi, length=30)
y = sin(x)
ggplot() + geom_emoji('heartbeat', x=x, y=y, 
                      size=10,color = "red") +
  labs(
    title = "Example of <span style='color:#D20F26'>emojifont::geom_emoji</span>",
    subtitle = "processed charts with <span style='color:#1A73E8'>geom_emoji()</span>",
    caption = "Visualization by <span style='color:#0057FF'>DataCharm</span>") +
  hrbrthemes::theme_ipsum(base_family = "Roboto Condensed")+
  #theme_ft_rc(base_family = "Roboto Condensed") +
  theme(plot.title = element_markdown(hjust = 0.5,vjust = .5,color = "black",
                                      size = 20, margin = margin(t = 1, b = 12)),
        plot.subtitle = element_markdown(hjust = 0,vjust = .5,size=15),
        plot.caption = element_markdown(face = 'bold',size = 12),
        # 去除刻度线和网格线
        axis.text.x = element_blank(),
        axis.text.y = element_blank(),
        axis.title.x = element_blank(),
        axis.title.y = element_blank(),
        panel.grid.major = element_blank(),
        panel.grid.minor = element_blank())
```
![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1624000564078-51149984-55ee-41d9-b812-c265cba7b653.webp#clientId=u62d04db2-e3f2-4&from=paste&id=u2b4b7247&originHeight=878&originWidth=1080&originalType=url&ratio=3&status=done&style=shadow&taskId=uc98e65fb-8931-4f08-a63e-7267d788075)<br />Example of geom_emoji()
<a name="sVNZc"></a>
### 「样例三」：
```r
df<-read_excel("test_data.xlsx")

##数据处理
df <- df %>% mutate(
  emoji_label = if_else(gender == "Male",fontawesome("fa-mars-double"),
                        fontawesome("fa-venus-double")))

example <- ggplot(data = df,aes(decade, category, color = as.numeric(prop), label = emoji_label)) +
  geom_tile(fill = "grey25", color = "grey20", size = 1) +
  geom_text(family = 'fontawesome-webfont', size = 6) +
  facet_grid(. ~ gender) +
  scale_color_scico(palette = "buda", name = NULL, na.value = "grey25",
                    guide = guide_colorbar(direction = "horizontal",
                                           barheight = unit(3, units = "mm"), 
                                           barwidth = unit(150, units = "mm"),
                                           draw.ulim = FALSE, title.position = 'bottom',
                                           title.hjust = 0.5, label.hjust = 0.5)) +
  labs(
    title = "Example of emojifont library",
    subtitle = "processed charts with geom_text()")+
  theme(
    strip.text = element_blank(),
    rect = element_rect(fill = "grey20", colour = "grey20", size = 0.4, 
                        color = "grey20",linetype = 1),
    plot.background = element_rect(color = "grey20"),
    panel.background = element_rect(fill = NA, colour = NA), 
    panel.border = element_rect(colour = "grey85", fill = NA, color = "grey20",size = rel(1)),
    panel.grid = element_blank(),
    plot.title = element_text(size = 15, hjust = 0.5, vjust = 1, face = "bold",colour = "white"),
    plot.subtitle = element_text(size = 12, hjust = 0.5, vjust = 1,colour = "white"),
    axis.text = element_text(size = 9,colour = "grey85"),
    legend.position = "bottom",
    legend.text = element_text(colour = "white"),
    axis.ticks = element_blank(),
    axis.title = element_blank()
    axis.text = element_text(size=10))
```
![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1624000564056-0e114240-a34d-419c-92df-1a7c04329b48.webp#clientId=u62d04db2-e3f2-4&from=paste&id=udf513778&originHeight=468&originWidth=1080&originalType=url&ratio=3&status=done&style=none&taskId=u8bcba3eb-d1c1-4fe1-ae21-7deac8bac17)<br />Example03 of emojifont
