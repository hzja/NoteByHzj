Linux 脚本<br />在平时工作的时候，为了测试产品的一些功能，会写一系列的脚本，并且把它们放在同一个目录下。在做测试的时候，经常会依次执行这些脚本，然后记录测试结果。<br />这样做的弊端是显而易见的，那就是效率太低。
<a name="H59N9"></a>
### 1. run-parts  
首先推荐一个很实用，但不是很熟悉的命令：`run-parts` 。它的基本用法如下：
```bash
$ run-parts option <directory-path>
```
但是，并不是目录下所有的脚本都会被执行，还是会有一些命名要求的。脚本的名字满足以下条件才会被执行：大/小写、数字、下划线（_）、短杠线（-）。<br />为了能选出满足条件的脚本，通常需要加上 `--regex` 选项。<br />由于脚本一般是以 `.sh` 结尾，所以如果命名都符合规则的话，想要执行所有脚本的话，可以这样操作：
```bash
$ run-parts --regex 'sh$' .
```
如果只想要执行以 `s` 开头，`sh` 结尾的脚本，可以结合如下正则表达式：
```bash
$ run-parts --regex '^s.*sh$' .
```
可以根据自己的脚本情况，写出对应的正则表达式。<br />为了防止误操作，在脚本真正执行之前，可以先看下将被执行的脚本会有哪些。可以加上 `--list` 选项：
```bash
$ run-parts --list --regex '^s.*sh$' .
```
加上 `--list` 选项后，它只会列出将要执行的脚本，便于执行处理前的核对，并不会真正去执行这些脚本。
<a name="N6tVR"></a>
### 2. find  
但是，`run-parts` 这个命令还是比较小众，估计很多人并不知道这个命令，更不用说知道怎么去使用了。另一个执行目录下所有脚本的方法是使用 `find` 命令，这个大家会更熟悉一些。<br />具体来讲，可以使用 `find` 命令来找到目标目录下所有的脚本，然后再使用 `-exec` 选项去执行找到的脚本。
```bash
$ find ~/scripts -maxdepth 1 -type f -executable -name 's*' -exec {} \;
STAY
HOME
STAY
SAFE
```
上面的命令是指定了只在 `scripts/` 目录这个层级下找脚本，但是还可以去掉这个限制，就可以搜索当前目录及其子目录下所有的脚本了：
```bash
$ find -maxdepth 1 -type f -executable -name '*.sh' -exec {} \;
```
<a name="09s0a"></a>
### 3. for  
如果 Shell 的水平不错的话，那么 `for` 循环也是一个不错的选择。比如想执行目录下所有以 `s` 开头的脚本，可以这样写：
```bash
$ for f in ~/scripts/s* ; do [ -x "$f" ] && [ ! -d "$f" ] && "$f" ; done
STAY
HOME
STAY
SAFE
```
如果想执行目录下所有的脚本，可以做一个小小的改动：
```shell
$ for f in ~/scripts/*.sh ; do [ -x "$f" ] && [ ! -d "$f" ] && "$f" ; done
Hello，Fcant
STAY
HOME
STAY
SAFE
```
