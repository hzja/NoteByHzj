可视化是一种方便的观察数据的方式，可以一目了然地了解数据块。经常使用柱状图、直方图、饼图、箱图、热图、散点图、线状图等。这些典型的图对于数据可视化是必不可少的。除了这些被广泛使用的图表外，还有许多很好的却很少被使用的可视化方法，这些图有助于完成工作，下面看看有那些图可以进行。<br />![](https://cdn.nlark.com/yuque/0/2022/png/396745/1669780913361-8f9dad5a-ae97-4e27-95f6-68566313a92e.png#averageHue=%23ada576&clientId=uaf185ebf-6afe-4&from=paste&id=u806d1041&originHeight=810&originWidth=1080&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u7135b325-2eac-496e-bcc7-9a0109b063f&title=)
<a name="Z287g"></a>
## 1、平行坐标图（Parallel Coordinate）
最多可以可视化 3 维数据。但是有时需要可视化超过 3 维的数据才能获得更多的信息。经常使用 PCA 或 t-SNE 来降维并绘制它。在降维的情况下，可能会丢失大量信息。在某些情况下，需要考虑所有特征， 平行坐标图有助于做到这一点。<br />![鸢尾花数据集的平行坐标图](https://cdn.nlark.com/yuque/0/2022/png/396745/1669780913563-5b71389b-aabe-4dd7-80fe-de9f7bd8ff42.png#averageHue=%23ede4d2&clientId=uaf185ebf-6afe-4&from=paste&id=udbfacbad&originHeight=525&originWidth=680&originalType=url&ratio=1&rotation=0&showTitle=true&status=done&style=none&taskId=u5c5aba95-51f2-4a01-939f-1c913b550da&title=%E9%B8%A2%E5%B0%BE%E8%8A%B1%E6%95%B0%E6%8D%AE%E9%9B%86%E7%9A%84%E5%B9%B3%E8%A1%8C%E5%9D%90%E6%A0%87%E5%9B%BE "鸢尾花数据集的平行坐标图")<br />上面的图片。横线(平行轴)表示鸢尾花的特征(花瓣长、萼片长、萼片宽、花瓣宽)。分类是Setosa, Versicolor和Virginica。上图将该物种编码为Setosa→1,Versicolor→2,Virginica→3。每个平行轴包含最小值到最大值(例如，花瓣长度从1到6.9，萼片长度从4.3到7.9，等等)。例如，考虑花瓣长度轴。这表明与其他两种植物相比，濑蝶属植物的花瓣长度较小，其中维珍属植物的花瓣长度最高。<br />有了这个图，可以很容易地获得数据集的总体信息。数据集是什么样子的?来看看。<br />![](https://cdn.nlark.com/yuque/0/2022/png/396745/1669780913473-c1bf15ea-6f6d-47a0-8c6e-bfb880fb52a1.png#averageHue=%23f4f6f9&clientId=uaf185ebf-6afe-4&from=paste&id=u5c778c5b&originHeight=673&originWidth=1080&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uf85e612c-8856-4e59-b2b3-41467701d70&title=)<br />用Plotly Express库可视化数据。Plotly库提供了一个交互式绘图工具。
```python
import plotly.express as px
df = px.data.iris()
fig = px.parallel_coordinates(df, color="species_id", labels={"species_id": "Species",
                                                              "sepal_width": "Sepal Width", "sepal_length": "Sepal Length",
                                                              "petal_width": "Petal Width", "petal_length": "Petal Length", },
                              color_continuous_scale=px.colors.diverging.Tealrose,
                              color_continuous_midpoint=2)
fig.show()
```
![](https://cdn.nlark.com/yuque/0/2022/png/396745/1669780913604-17d9e752-3b95-4fdc-bd76-3f288794e81e.png#averageHue=%23efe9dc&clientId=uaf185ebf-6afe-4&from=paste&id=u9f1d5584&originHeight=802&originWidth=1080&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u36a2585e-6ad0-4637-a4b4-1f50393129e&title=)<br />除了上图以外还可以使用其他库，如pandas、scikit-learn和matplotlib来绘制并行坐标。
<a name="wVeiU"></a>
## 2、六边形分箱图 （Hexagonal Binning）
六边形分箱图是一种用六边形直观表示二维数值数据点密度的方法。
```python
ax = df.plot.hexbin(x='sepal_width', y='sepal_length',
                    gridsize=20,color='#BDE320')
```
![](https://cdn.nlark.com/yuque/0/2022/png/396745/1669780913582-da6b1edf-7d37-48a1-b474-be4642664a93.png#averageHue=%23d1e49b&clientId=uaf185ebf-6afe-4&from=paste&id=u0b8c2a24&originHeight=872&originWidth=1078&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u4844113e-09d0-4a04-a886-f1662eedd55&title=)<br />考虑了上一节的数据集来绘制上面的六边形分箱图。Pandas 允许绘制六边形 binning。已经展示了用于查找 sepal_width 和 sepal_length 列的密度的图。<br />如果仔细观察图表，会发现总面积被分成了无数个六边形。每个六边形覆盖特定区域。注意到六边形有颜色变化。六边形有的没有颜色，有的是淡绿色，有的颜色很深。根据图右侧显示的色标，颜色密度随密度变化。比例表示具有颜色变化的数据点的数量。六边形没有填充颜色，这意味着该区域没有数据点。<br />其他库，如 matplotlib、seaborn、bokeh（交互式绘图）也可用于绘制它。
<a name="RSR3O"></a>
## 3、等高线密度图（Contour ）
二维等高线密度图是可视化特定区域内数据点密度的另一种方法。这是为了找到两个数值变量的密度。例如，下面的图显示了在每个阴影区域有多少数据点。
```python
import plotly.express as px
fig = px.density_contour(df, x="sepal_width", y="sepal_length")
fig.update_traces(contours_coloring="fill", contours_showlabels = True)
fig.show()
```
![](https://cdn.nlark.com/yuque/0/2022/png/396745/1669780914064-831d0a15-9f92-4791-9c1a-e68a73d4d8fe.png#averageHue=%23f6f8f8&clientId=uaf185ebf-6afe-4&from=paste&id=ub560ce63&originHeight=756&originWidth=1080&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u56cae552-8483-4655-9187-ed66fe4db2c&title=)<br />为了生成上面的图表，这里使用了plotly库，因为它可以方便地绘制交互式的图表。这里绘制了两个变量 sepal_width 和 sepal_length 的密度。<br />当然，也可以使用其他库，如seaborn、matplotlib等。
<a name="woldW"></a>
## 4、QQ-plot
QQ plot是另一个有趣的图。QQ是Quantile - Quantile plot的缩写（Quantile/percentile是一个范围，在这个范围内数据下降了指定百分比。例如，第10个quantile/percentile表示在该范围下，找到了10%的数据，90% 超出范围）。这是一种直观地检查数值变量是否服从正态分布的方法。解释一下它是如何工作的。<br />![(a)样本分布(b)标准正态分布](https://cdn.nlark.com/yuque/0/2022/png/396745/1669780914195-e1735b0d-ee1e-43f5-bff0-01db69bf8c81.png#averageHue=%23fcfcfc&clientId=uaf185ebf-6afe-4&from=paste&id=u72d8e9e8&originHeight=429&originWidth=1080&originalType=url&ratio=1&rotation=0&showTitle=true&status=done&style=none&taskId=uc08955f9-839b-4546-9726-ba291f7b6ad&title=%28a%29%E6%A0%B7%E6%9C%AC%E5%88%86%E5%B8%83%28b%29%E6%A0%87%E5%87%86%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83 "(a)样本分布(b)标准正态分布")<br />图（a）是样本分布；(b) 是标准正态分布。对于样本分布，数据范围从 10 到 100（100% 数据在 10 到 100 之间）。但对于标准正态分布，100% 的数据在 -3 到 3（z 分数）的范围内。在 QQ 图中，两个 x 轴值均分为 100 个相等的部分（称为分位数）。如果针对 x 和 y 轴绘制这两个值，将得到一个散点图。<br />![QQ-plot](https://cdn.nlark.com/yuque/0/2022/png/396745/1669780914312-5bb1fffa-0efe-4b62-81d9-fd513584ec3c.png#averageHue=%23f7f5e9&clientId=uaf185ebf-6afe-4&from=paste&id=ub6ee8ead&originHeight=855&originWidth=1080&originalType=url&ratio=1&rotation=0&showTitle=true&status=done&style=none&taskId=uc46ef12b-4a25-4f4b-919a-bbf67c40208&title=QQ-plot "QQ-plot")<br />散点图位于对角线上。这意味着样本分布是正态分布。如果散点图位于左边或右边而不是对角线，这意味着样本不是正态分布的。<br />导入必要的库
```python
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
```
生成正态分布数据。
```python
np.random.seed(10)
# Generate Univariate Observations
gauss_data = 5 * np.random.randn(100) + 50
```
绘制数据点的分布。
```python
sns.histplot(data=gauss_data, kde=True)
```
![](https://cdn.nlark.com/yuque/0/2022/png/396745/1669780914342-1b1dd407-6f37-4a47-af93-bfdf18a56627.png#averageHue=%23dce6ed&clientId=uaf185ebf-6afe-4&from=paste&id=u17768681&originHeight=714&originWidth=1080&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ub5fcb136-7ba0-4303-904c-5aa7dd40b52&title=)<br />该图显示数据是正态分布的。用数据点做qq-plot来检验它是否正态分布。
```python
import statsmodels.api as sm
# q-q plot
sm.qqplot(gauss_data, line='s')
plt.show()
# 更多精彩内容，欢迎关注公众号：数据STUDIO
```
![](https://cdn.nlark.com/yuque/0/2022/png/396745/1669780914564-662b9957-e87f-4a5a-85ad-2ddad40e7d79.png#averageHue=%23fbfbfb&clientId=uaf185ebf-6afe-4&from=paste&id=u21d17b17&originHeight=768&originWidth=1080&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u7c323bc1-1017-430f-90cc-61e05005fc1&title=)<br />该图显示散点位于对角线上。所以它是正态分布的。
<a name="bjI4I"></a>
## 5、小提琴图(Violin Plot)
小提琴图与箱线图相关。能从小提琴图中获得的另一个信息是密度分布。简单来说就是一个结合了密度分布的箱线图。将其与箱线图进行比较。<br />在小提琴图中，小提琴中间的白点表示中点。实心框表示四分位数间距 (IQR)。上下相邻值是异常值的围栏。超出范围，一切都是异常值。下图显示了比较。<br />![盒状图和小提琴状图的常见组成。所有学术级别的薪酬总额](https://cdn.nlark.com/yuque/0/2022/png/396745/1669780914567-7716db71-d28e-4c6e-a64f-53483dbf76bf.png#averageHue=%23f6f6f6&clientId=uaf185ebf-6afe-4&from=paste&id=u1e0c17b6&originHeight=361&originWidth=476&originalType=url&ratio=1&rotation=0&showTitle=true&status=done&style=none&taskId=u766a38d7-4534-4de7-b12c-c068dee9bff&title=%E7%9B%92%E7%8A%B6%E5%9B%BE%E5%92%8C%E5%B0%8F%E6%8F%90%E7%90%B4%E7%8A%B6%E5%9B%BE%E7%9A%84%E5%B8%B8%E8%A7%81%E7%BB%84%E6%88%90%E3%80%82%E6%89%80%E6%9C%89%E5%AD%A6%E6%9C%AF%E7%BA%A7%E5%88%AB%E7%9A%84%E8%96%AA%E9%85%AC%E6%80%BB%E9%A2%9D "盒状图和小提琴状图的常见组成。所有学术级别的薪酬总额")<br />看看小提琴图的可视化。
```python
import seaborn as sns
sns.violinplot(data=df, y="sepal_width")
```
![](https://cdn.nlark.com/yuque/0/2022/png/396745/1669780914738-4b97504d-3c9e-4164-8d1b-94de381c43b5.png#averageHue=%23fafafa&clientId=uaf185ebf-6afe-4&from=paste&id=u3b75bba8&originHeight=730&originWidth=1080&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ub4e56884-22f2-4a92-bafa-457515e3b5f&title=)<br />还可以通过传递名称来绘制不同物种的小提琴图。
```python
import seaborn as sns
sns.violinplot(data=df,x='species', y="sepal_width")
```
![](https://cdn.nlark.com/yuque/0/2022/png/396745/1669780914831-2645be64-c28e-4c4a-bc88-3ae82f67bd8e.png#averageHue=%23f5f1ed&clientId=uaf185ebf-6afe-4&from=paste&id=u90374638&originHeight=432&originWidth=567&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uabbb11ef-3b1b-43ce-bb1f-7908cee68f5&title=)<br />还可以使用其他库，如plotly、matplotlib等来绘制小提琴图。
<a name="JrxJo"></a>
## 6、箱线图的改进版(Boxen plot)
Boxenplot 是 seaborn 库引入的一种新型箱线图。对于箱线图，框是在四分位数上创建的。但在 Boxenplot 中，数据被分成更多的分位数。它提供了对数据的更多内存。<br />鸢尾花数据集的 Boxenplot 显示了 sepal_width 的数据分布。
```python
sns.boxenplot(x=df["sepal_width"])
```
![](https://cdn.nlark.com/yuque/0/2022/png/396745/1669780914963-f167d054-8aab-4e7a-8eca-c659e2ecf6a6.png#averageHue=%23f7f7f7&clientId=uaf185ebf-6afe-4&from=paste&id=u025ddb61&originHeight=433&originWidth=528&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uc3ca60d9-2cde-43ad-af22-fcb1daac9a5&title=)<br />上图显示了比箱线图更多的盒。这是因为每个框代表一个特定的分位数。
```python
sns.boxenplot(data=df, x="species",y='sepal_width')
```
![](https://cdn.nlark.com/yuque/0/2022/png/396745/1669780915050-9d200d1e-81c9-4e4d-9e02-b0c0f7b6707b.png#averageHue=%23f5f2ef&clientId=uaf185ebf-6afe-4&from=paste&id=uabcc92ae&originHeight=435&originWidth=567&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u7f990e57-0640-47b5-9308-8dc5b62ac04&title=)<br />不同物种sepal_width的Boxenplot图。
<a name="U8H3U"></a>
## 7、点图
下图中有一些名为误差线的垂直线和其他一些连接这些垂直线的线。看看它的确切含义。<br />![](https://cdn.nlark.com/yuque/0/2022/png/396745/1669780915009-ffcb2659-966b-4655-a525-68d8b8c72899.png#averageHue=%23faf8ed&clientId=uaf185ebf-6afe-4&from=paste&id=u0686118d&originHeight=797&originWidth=1080&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ue11da07e-7938-43b1-aeee-6e3bf8b13e0&title=)<br />点图是一种通过上图中显示的点的位置来表示数值变量集中趋势的方法，误差条表示变量的不确定性（置信区间）。绘制线图是为了比较不同分类值的数值变量的变异性。<br />举一个实际的例子—-继续使用 seaborn 库和 iris 数据集（在平行坐标部分中提到）。
```python
import seaborn as sns
sns.pointplot(data=df,x="species", y="sepal_width")
```
![](https://cdn.nlark.com/yuque/0/2022/png/396745/1669780915219-8748dd68-0ca7-4f45-9a3b-57d0ce114bcf.png#averageHue=%23fbfbfb&clientId=uaf185ebf-6afe-4&from=paste&id=u9735fe07&originHeight=432&originWidth=567&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u9f97a5ed-aaa7-46f3-986a-4bf62841af6&title=)<br />该图表显示了不同花的萼片宽度的变异性。还可以绘制多个点图。
<a name="V8Rd2"></a>
## 8、分簇散点图（Swarm plot）
Swarm plot 是另一个受“beeswarm”启发的有趣图表。通过此图可以轻松了解不同的分类值如何沿数值轴分布。它在不重叠数据点的情况下绘制数据。但它不适用于大型数据集。
```python
import seaborn as sns
sns.swarmplot(data=df,x="species", y="sepal_width")
```
![](https://cdn.nlark.com/yuque/0/2022/png/396745/1669780915242-eb5f120c-6d49-4aaf-ad8c-44811cc21418.png#averageHue=%23fbfbfb&clientId=uaf185ebf-6afe-4&from=paste&id=ud9b5994e&originHeight=435&originWidth=567&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ue83c7fb5-56af-4b99-80dc-5c03a85e491&title=)
<a name="SUUCJ"></a>
## 9、旭日图（Sunburst Chart）
它是圆环图或饼图的定制版本，将一些额外的层次信息集成到图中。<br />![Sunburst Chart](https://cdn.nlark.com/yuque/0/2022/png/396745/1669780915287-c4e811e0-93d3-49ed-948f-4c666178e310.png#averageHue=%23fffffe&clientId=uaf185ebf-6afe-4&from=paste&id=u58e0c3da&originHeight=492&originWidth=522&originalType=url&ratio=1&rotation=0&showTitle=true&status=done&style=none&taskId=ufc714c04-6d9b-4887-8287-77d5812bc37&title=Sunburst%20Chart "Sunburst Chart")<br />整个图表被分成几个环(从内到外)。它保存层次结构信息，其中内环位于层次结构的顶部，外环位于较低的阶。<br />![以上日暴图的数据](https://cdn.nlark.com/yuque/0/2022/png/396745/1669780915473-e6a57708-1b09-497d-994a-0c7b24fd8e8e.png#averageHue=%23b9d3ea&clientId=uaf185ebf-6afe-4&from=paste&id=ua5c1c3c0&originHeight=406&originWidth=368&originalType=url&ratio=1&rotation=0&showTitle=true&status=done&style=none&taskId=u986400b6-4213-47e0-95be-c69fb14ad22&title=%E4%BB%A5%E4%B8%8A%E6%97%A5%E6%9A%B4%E5%9B%BE%E7%9A%84%E6%95%B0%E6%8D%AE "以上日暴图的数据")
```python
import plotly.express as px
df = px.data.tips()
```
![](https://cdn.nlark.com/yuque/0/2022/png/396745/1669780915657-802d4956-892e-4b87-a99e-55c5016f5fa4.png#averageHue=%23f8f9fa&clientId=uaf185ebf-6afe-4&from=paste&id=uefa4068a&originHeight=361&originWidth=1080&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u9954cfd8-b9bc-4503-ac66-eefc30568cd&title=)<br />绘制旭日图
```python
fig = px.sunburst(df, path=['sex', 'day', 'time'], 
                  values='total_bill', color='time')
fig.show()
```
![](https://cdn.nlark.com/yuque/0/2022/png/396745/1669780915711-2de8996a-4a77-44d0-a817-43e353f10000.png#averageHue=%23fefefd&clientId=uaf185ebf-6afe-4&from=paste&id=u3372725d&originHeight=880&originWidth=1008&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uee26183e-b1c5-4c7f-9254-2603109ee86&title=)<br />sunburst类的path属性提供了层次结构，其中性别位于层次结构的顶部，然后是日期和时间。
<a name="fHirY"></a>
## 10、词云（Word Cloud）
词云图的想法非常简单。假设有一组文本文档。单词有很多，有些是经常出现的，有些是很少出现的。在词云图中，所有单词都被绘制在特定的区域中，频繁出现的单词被高亮显示(用较大的字体显示)。有了这个词云，可以很容易地找到重要的客户反馈，热门的政治议程话题等。<br />数据集：[https://opendatacommons.org/licenses/odbl/1-0/](https://opendatacommons.org/licenses/odbl/1-0/)
```python
import pandas as pd
data=pd.read_csv('/work/android-games.csv')
data.head()
```
![](https://cdn.nlark.com/yuque/0/2022/png/396745/1669780915782-09145df3-9051-4b2a-b8dc-4f6c47502e3a.png#averageHue=%23f7f8f9&clientId=uaf185ebf-6afe-4&from=paste&id=u96af4651&originHeight=459&originWidth=1080&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uebd315e3-7e2b-4e45-83e0-4a482ec4ec7&title=)<br />统计每个类别的数据数量
```python
data.category.value_counts()
```
```
GAME CARD            126
GAME WORD            104
GAME ACTION          100
GAME ADVENTURE       100
GAME STRATEGY        100
GAME PUZZLE          100
GAME SIMULATION      100
GAME CASUAL          100
GAME ARCADE          100
GAME ROLE PLAYING    100
GAME TRIVIA          100
GAME BOARD           100
GAME CASINO          100
GAME RACING          100
GAME EDUCATIONAL     100
GAME SPORTS          100
GAME MUSIC           100
Name: category, dtype: int64
```
进行可视化。
```python
#importing the module from wordcloud library
from wordcloud import WordCloud
import matplotlib.pyplot as plt

#creating a text from the category column by taking only the 2nd part of the category.
text = " ".join(cat.split()[1] for cat in data.category)

#generating the cloud
word_cloud = WordCloud(collocations = False, background_color = 'black').generate(text)
plt.imshow(word_cloud, interpolation='bilinear')
plt.axis("off")
plt.show()
# 更多精彩内容，欢迎关注公众号：数据STUDIO
```
![](https://cdn.nlark.com/yuque/0/2022/png/396745/1669780915743-db8d1ef1-3a1a-408c-b545-fee894b454be.png#averageHue=%236f6a0c&clientId=uaf185ebf-6afe-4&from=paste&id=u3bb9aa37&originHeight=268&originWidth=515&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ua2dfad09-5a5d-469f-9d1a-f971b34d486&title=)<br />该图表显示了频率最高的所有类别。也可以用这个图从文本中找到经常出现的单词。
<a name="gUQC4"></a>
## 总结
数据可视化是数据科学中不可缺少的一部分。在数据科学中，与数据打交道。手工分析少量数据是可以的，但当处理数千个数据时它就变得非常麻烦。如果不能发现数据集的趋势和洞察力，可能无法使用这些数据。
