Python
<a name="C9eUc"></a>
### 安装
```bash
pip install progressbar2
```
py2 使用`pip install progressbar`安装。
<a name="YmCEI"></a>
### 使用
在progress库中，只用到它的**「三个实例方法」**，就可实现一个进度条的动作：
```python
start(max_value=None, init=True)：Starts measuring time, and prints the bar at 0%。

update(value=None, force=False, **kwargs)：Updates the ProgressBar to a new value。

finish(end='\n') ：Puts the ProgressBar bar in the finished state
```
**「start」** 进度条初始化，给它一个目标上限值，例如到 100% 结束，max_value 参数给个 100 就 OK 了。<br />**「update」** 更新进度条进度，这个方法执行一次，进度条就会更新一次，value 参数就是要更新的值。<br />**「finish」** 关闭进度条，不想再对进度条进行操作，执行它。
<a name="ho6no"></a>
### 代码实例
```python
import time
import progressbar
 
p = progressbar.ProgressBar() # 实例化进度条
max_value = 100     # 满值100
p.start(max_value)

init_num = 0
n = 0
update_value = 1

while n < 100:
    p.update(n)     # 更新
    n += update_value
    time.sleep(0.1)

p.finish()
```
上面的代码，会执行 10 秒，每秒累加 10 次 1：<br />执行结果：
```
100% (100 of 100) |######################################################################################| Elapsed Time: 0:00:10 Time:  0:00:10
```
当然，这边显示的是已经运行完成的，实际效果这个进度条是动态增加的。<br />知道用法之后，把这个套路套进原先的爬虫代码中：<br />（截取主要代码）
```python
def run():
    p = progressbar.ProgressBar()
    links_num =  len(get_detail_link(index_url))
    p.start(links_num)
    for num, link in enumerate(get_detail_link(index_url)):
        download_document(link)
        p.update(num)
    p.finish()

if __name__ == '__main__':
    run()
```
运行脚本后：<br />![](./img/1671343635771-fe70b7cc-4b2c-4ed5-a3f7-f4339fd10fb0.png)<br />代码 finish 关闭进度条实例，达到 100% 后会自动退出。
<a name="uF3ab"></a>
### 定制化进度条
如果觉得这样的显示有点怪，那就定制化它：<br />修改 widget 参数，并传入`progressbar.ProgressBar()`。
```python
widgets = [ 'Progress Name :',' [', progressbar.Timer(), '] ',progressbar.Bar('+'), ' (', progressbar.ETA(), ') ']
    p = progressbar.ProgressBar(widgets=widgets)
```
`Bar('+')`：调用进度条步进框，并以‘+’符号显示；<br />`Timer()`：已用时间；<br />`ETA()`：预计剩余时间；<br />`Percentage()`：进度百分比；<br />![](./img/1671343635690-c751fe0d-0b4a-4a7f-96b0-5e9d65c54d5a.png)
