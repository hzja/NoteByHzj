Python<br />å°†æ±‰å­—è½¬ä¸ºæ‹¼éŸ³ï¼Œå¯ä»¥ç”¨äºæ‰¹é‡æ±‰å­—æ³¨éŸ³ã€æ–‡å­—æ’åºã€æ‹¼éŸ³æ£€ç´¢æ–‡å­—ç­‰å¸¸è§åœºæ™¯ã€‚<br />ç°åœ¨äº’è”ç½‘ä¸Šæœ‰è®¸å¤šæ‹¼éŸ³è½¬æ¢å·¥å…·ï¼ŒåŸºäºPythonçš„å¼€æºæ¨¡å—ä¹Ÿä¸å°‘ï¼Œä»‹ç»ä¸€ä¸ªåŠŸèƒ½ç‰¹æ€§æœ€å¤šçš„æ¨¡å—:  pypinyin ï¼Œå®ƒæ”¯æŒä»¥ä¸‹ç‰¹æ€§ï¼š

1. æ ¹æ®è¯ç»„æ™ºèƒ½åŒ¹é…æœ€æ­£ç¡®çš„æ‹¼éŸ³ã€‚
2. æ”¯æŒå¤šéŸ³å­—ã€‚
3. ç®€å•çš„ç¹ä½“æ”¯æŒ, æ³¨éŸ³æ”¯æŒã€‚
4. æ”¯æŒå¤šç§ä¸åŒæ‹¼éŸ³/æ³¨éŸ³é£æ ¼ã€‚
5. å‘½ä»¤è¡Œå·¥å…·ä¸€é”®è½¬åŒ–
<a name="yUSMs"></a>
## 1ã€å‡†å¤‡
å¼€å§‹ä¹‹å‰ï¼Œè¦ç¡®ä¿Pythonå’Œpipå·²ç»æˆåŠŸå®‰è£…åœ¨ç”µè„‘ä¸Šã€‚
```bash
pip install pypinyin
```
<a name="GLSyx"></a>
## 2ã€åŸºæœ¬ä½¿ç”¨
æœ€æ™®é€šçš„æ‹¼éŸ³è½¬åŒ–æ–¹æ³•å¦‚ä¸‹ï¼š
```python
from pypinyin import pinyin, lazy_pinyin, Style
pinyin('ä¸­å¿ƒ')
# [['zhÅng'], ['xÄ«n']]
```
è¯†åˆ«å¤šéŸ³å­—ï¼š
```python
from pypinyin import pinyin, lazy_pinyin, Style
pinyin('ä¸­å¿ƒ', heteronym=True) # å¯ç”¨å¤šéŸ³å­—æ¨¡å¼
# [['zhÅng', 'zhÃ²ng'], ['xÄ«n']]
```
è®¾ç½®è¾“å‡ºé£æ ¼ï¼Œåªè¯†åˆ«é¦–å­—æ¯ï¼š
```python
from pypinyin import pinyin, lazy_pinyin, Style
pinyin('ä¸­å¿ƒ', style=Style.FIRST_LETTER) # è®¾ç½®æ‹¼éŸ³é£æ ¼
# [['z'], ['x']]
```
ä¿®æ”¹éŸ³è°ƒè¾“å‡ºä½ç½®ï¼Œåœ¨ç›¸åº”å­—æ¯çš„åé¢æ˜¾ç¤ºéŸ³è°ƒï¼Œæˆ–è€…æ‹¼éŸ³çš„æœ€åæ˜¾ç¤ºéŸ³è°ƒï¼š
```python
from pypinyin import pinyin, lazy_pinyin, Style

# TONE2 åœ¨ç›¸åº”å­—æ¯çš„åé¢æ˜¾ç¤ºéŸ³è°ƒ
pinyin('ä¸­å¿ƒ', style=Style.TONE2, heteronym=True)
# [['zho1ng', 'zho4ng'], ['xi1n']]

# TONE3 æ‹¼éŸ³çš„æœ€åæ˜¾ç¤ºéŸ³è°ƒ
pinyin('ä¸­å¿ƒ', style=Style.TONE3, heteronym=True)
# [['zhong1', 'zhong4'], ['xin1']]
```
ä¸è€ƒè™‘å¤šéŸ³å­—çš„æƒ…å†µï¼š
```python
from pypinyin import pinyin, lazy_pinyin, Style
lazy_pinyin('ä¸­å¿ƒ') # ä¸è€ƒè™‘å¤šéŸ³å­—çš„æƒ…å†µ
# ['zhong', 'xin']
```
ä¸ä½¿ç”¨væ¥ä»£æ›¿Ã¼:
```python
from pypinyin import pinyin, lazy_pinyin, Style
lazy_pinyin('æˆ˜ç•¥', v_to_u=True) # ä¸ä½¿ç”¨ v è¡¨ç¤º Ã¼
# ['zhan', 'lÃ¼e']
```
æ ‡è®°è½»å£°ï¼š
```python
from pypinyin import pinyin, lazy_pinyin, Style
# ä½¿ç”¨ 5 æ ‡è¯†è½»å£°
lazy_pinyin('è¡£è£³', style=Style.TONE3, neutral_tone_with_five=True)
# ['yi1', 'shang5']


ä½¿ç”¨å‘½ä»¤è¡Œä¸€é”®è¯†åˆ«æ‹¼éŸ³ï¼š
python -m pypinyin éŸ³ä¹
# yÄ«n yuÃ¨
```
<a name="jcubj"></a>
## 3ã€é«˜çº§ä½¿ç”¨
<a name="QkloZ"></a>
### è‡ªå®šä¹‰æ‹¼éŸ³æ˜¾ç¤ºé£æ ¼
å¯ä»¥é€šè¿‡ `register()` æ¥å®ç°è‡ªå®šä¹‰æ‹¼éŸ³é£æ ¼çš„éœ€æ±‚ï¼š
```python
from pypinyin import lazy_pinyin

from pypinyin.style import register

@register('kiss')
def kiss(pinyin, **kwargs):
    return 'ğŸ˜˜ {0}'.format(pinyin)

  
lazy_pinyin('ä¹ˆä¹ˆ', style='kiss')
# ['ğŸ˜˜ me', 'ğŸ˜˜ me']
```
å¯ä»¥è§åˆ°ï¼Œé€šè¿‡å®šä¹‰ä¸€ä¸ª kiss å‡½æ•°ï¼Œä½¿ç”¨ register è£…é¥°å™¨ï¼Œç”Ÿæˆäº†ä¸€ä¸ªæ–°çš„ styleï¼Œè¿™ä¸ª style å¯ä»¥ç›´æ¥è¢«ç”¨äºæ‹¼éŸ³çš„è½¬æ¢å‚æ•°ï¼Œéå¸¸æ–¹ä¾¿ã€‚<br />å¦å¤–ï¼Œæ‰€æœ‰æ¨¡å—è‡ªå¸¦çš„ style åŠå…¶æ•ˆæœå¦‚ä¸‹ï¼š
```python
@unique
class Style(IntEnum):
    """æ‹¼éŸ³é£æ ¼"""

    #: æ™®é€šé£æ ¼ï¼Œä¸å¸¦å£°è°ƒã€‚å¦‚ï¼šä¸­å›½ -> ``zhong guo``
    NORMAL = 0
    #: æ ‡å‡†å£°è°ƒé£æ ¼ï¼Œæ‹¼éŸ³å£°è°ƒåœ¨éŸµæ¯ç¬¬ä¸€ä¸ªå­—æ¯ä¸Šï¼ˆé»˜è®¤é£æ ¼ï¼‰ã€‚å¦‚ï¼šä¸­å›½ -> ``zhÅng guÃ³``
    TONE = 1
    #: å£°è°ƒé£æ ¼2ï¼Œå³æ‹¼éŸ³å£°è°ƒåœ¨å„ä¸ªéŸµæ¯ä¹‹åï¼Œç”¨æ•°å­— [1-4] è¿›è¡Œè¡¨ç¤ºã€‚å¦‚ï¼šä¸­å›½ -> ``zho1ng guo2``
    TONE2 = 2
    #: å£°è°ƒé£æ ¼3ï¼Œå³æ‹¼éŸ³å£°è°ƒåœ¨å„ä¸ªæ‹¼éŸ³ä¹‹åï¼Œç”¨æ•°å­— [1-4] è¿›è¡Œè¡¨ç¤ºã€‚å¦‚ï¼šä¸­å›½ -> ``zhong1 guo2``
    TONE3 = 8
    #: å£°æ¯é£æ ¼ï¼Œåªè¿”å›å„ä¸ªæ‹¼éŸ³çš„å£°æ¯éƒ¨åˆ†ï¼ˆæ³¨ï¼šæœ‰çš„æ‹¼éŸ³æ²¡æœ‰å£°æ¯ï¼Œè¯¦è§ `#27`_ï¼‰ã€‚å¦‚ï¼šä¸­å›½ -> ``zh g``
    INITIALS = 3
    #: é¦–å­—æ¯é£æ ¼ï¼Œåªè¿”å›æ‹¼éŸ³çš„é¦–å­—æ¯éƒ¨åˆ†ã€‚å¦‚ï¼šä¸­å›½ -> ``z g``
    FIRST_LETTER = 4
    #: éŸµæ¯é£æ ¼ï¼Œåªè¿”å›å„ä¸ªæ‹¼éŸ³çš„éŸµæ¯éƒ¨åˆ†ï¼Œä¸å¸¦å£°è°ƒã€‚å¦‚ï¼šä¸­å›½ -> ``ong uo``
    FINALS = 5
    #: æ ‡å‡†éŸµæ¯é£æ ¼ï¼Œå¸¦å£°è°ƒï¼Œå£°è°ƒåœ¨éŸµæ¯ç¬¬ä¸€ä¸ªå­—æ¯ä¸Šã€‚å¦‚ï¼šä¸­å›½ -> ``Ång uÃ³``
    FINALS_TONE = 6
    #: éŸµæ¯é£æ ¼2ï¼Œå¸¦å£°è°ƒï¼Œå£°è°ƒåœ¨å„ä¸ªéŸµæ¯ä¹‹åï¼Œç”¨æ•°å­— [1-4] è¿›è¡Œè¡¨ç¤ºã€‚å¦‚ï¼šä¸­å›½ -> ``o1ng uo2``
    FINALS_TONE2 = 7
    #: éŸµæ¯é£æ ¼3ï¼Œå¸¦å£°è°ƒï¼Œå£°è°ƒåœ¨å„ä¸ªæ‹¼éŸ³ä¹‹åï¼Œç”¨æ•°å­— [1-4] è¿›è¡Œè¡¨ç¤ºã€‚å¦‚ï¼šä¸­å›½ -> ``ong1 uo2``
    FINALS_TONE3 = 9
    #: æ³¨éŸ³é£æ ¼ï¼Œå¸¦å£°è°ƒï¼Œé˜´å¹³ï¼ˆç¬¬ä¸€å£°ï¼‰ä¸æ ‡ã€‚å¦‚ï¼šä¸­å›½ -> ``ã„“ã„¨ã„¥ ã„ã„¨ã„›ËŠ``
    BOPOMOFO = 10
    #: æ³¨éŸ³é£æ ¼ï¼Œä»…é¦–å­—æ¯ã€‚å¦‚ï¼šä¸­å›½ -> ``ã„“ ã„``
    BOPOMOFO_FIRST = 11
    #: æ±‰è¯­æ‹¼éŸ³ä¸ä¿„è¯­å­—æ¯å¯¹ç…§é£æ ¼ï¼Œå£°è°ƒåœ¨å„ä¸ªæ‹¼éŸ³ä¹‹åï¼Œç”¨æ•°å­— [1-4] è¿›è¡Œè¡¨ç¤ºã€‚å¦‚ï¼šä¸­å›½ -> ``Ñ‡Ğ¶ÑƒĞ½1 Ğ³Ğ¾2``
    CYRILLIC = 12
    #: æ±‰è¯­æ‹¼éŸ³ä¸ä¿„è¯­å­—æ¯å¯¹ç…§é£æ ¼ï¼Œä»…é¦–å­—æ¯ã€‚å¦‚ï¼šä¸­å›½ -> ``Ñ‡ Ğ³``
    CYRILLIC_FIRST = 13
```
<a name="aI1Cf"></a>
### å¤„ç†ç‰¹æ®Šå­—ç¬¦
é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯¹äºæ–‡å­—ä¸­çš„ç‰¹æ®Šå­—ç¬¦ä¼šä¸åšä»»ä½•å¤„ç†ï¼ŒåŸæ ·è¿”å›:
```python
pinyin('ä½ å¥½â˜†â˜†')
# [['nÇ'], ['hÇo'], ['â˜†â˜†']]
```
ä¸è¿‡å¦‚æœæƒ³å¯¹è¿™äº›ç‰¹æ®Šå­—ç¬¦åšå¤„ç†ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œæ¯”å¦‚ï¼š<br />ignore  : å¿½ç•¥è¯¥å­—ç¬¦
```python
pinyin('ä½ å¥½â˜†â˜†', errors='ignore')
# [['nÇ'], ['hÇo']]
```
errors : æ›¿æ¢ä¸ºå»æ‰  \u  çš„ unicode ç¼–ç :
```python
pinyin('ä½ å¥½â˜†â˜†', errors='replace')
# [['nÇ'], ['hÇo'], ['26062606']]
```
callable å¯¹è±¡  : æä¾›ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œæ¥å—æ— æ‹¼éŸ³å­—ç¬¦(ä¸²)ä½œä¸ºå‚æ•°, æ”¯æŒçš„è¿”å›å€¼ç±»å‹:  `unicode`æˆ– `list`æˆ– `None`:
```python
pinyin('ä½ å¥½â˜†â˜†', errors=lambda x: 'star')
# [['nÇ'], ['hÇo'], ['star']]

pinyin('ä½ å¥½â˜†â˜†', errors=lambda x: None)
# [['nÇ'], ['hÇo']]
```
è¿”å›å€¼ç±»å‹ä¸º listæ—¶ï¼Œä¼šè‡ªåŠ¨ expend list:
```python
pinyin('ä½ å¥½â˜†â˜†', errors=lambda x: ['star' for _ in x])
# [['nÇ'], ['hÇo'], ['star'], ['star']]

# æŒ‡å®šå¤šéŸ³å­—
pinyin('ä½ å¥½â˜†â˜†', heteronym=True, errors=lambda x: [['star', 'â˜†'] for _ in x])
# [['nÇ'], ['hÇo'], ['star', 'â˜†'], ['star', 'â˜†']]
```
<a name="z0qe2"></a>
### è‡ªå®šä¹‰æ‹¼éŸ³åº“
å¦‚æœè§‰å¾—æ¨¡å—è¾“å‡ºæ•ˆæœä¸æ­£ç¡®ï¼Œæˆ–è€…æƒ³åšç‰¹æ®Šå¤„ç†ï¼Œå¯ä»¥é€šè¿‡  `load_single_dict()` æˆ–  `load_phrases_dict()`  ä»¥è‡ªå®šä¹‰æ‹¼éŸ³åº“çš„æ–¹å¼ä¿®æ­£ç»“æœï¼š
```python
from pypinyin import lazy_pinyin, load_phrases_dict, Style, load_single_dict
hans = 'æ¡”å­'
lazy_pinyin(hans, style=Style.TONE2)
# ['jie2', 'zi3']
load_phrases_dict({'æ¡”å­': [['jÃº'], ['zÇ']]}) # å¢åŠ  "æ¡”å­" è¯ç»„
lazy_pinyin(hans, style=Style.TONE2)
# ['ju2', 'zi3']

hans = 'è¿˜æ²¡'
lazy_pinyin(hans, style=Style.TONE2)
# ['hua2n', 'me2i']
load_single_dict({ord('è¿˜'): 'hÃ¡i,huÃ¡n'}) # è°ƒæ•´ "è¿˜" å­—çš„æ‹¼éŸ³é¡ºåº
lazy_pinyin('è¿˜æ²¡', style=Style.TONE2)
# ['ha2i', 'me2i']
```
