IO MACRO X,Y
   MOV AH,X
   LEA DX,Y
   INT 21H
   ENDM

DATAS SEGMENT USE16
   BUF DW 6F80H,98B0H,-74ABH,-0F88AH
   LEN=($-BUF)/2
   STR DB 7 DUP(0)
   CRLF DB 13,10,'$'
   TEN DW 10
DATAS ENDS

STACKS SEGMENT USE16
   ;此处输入堆栈段代码
STACKS ENDS

CODES SEGMENT USE16
   ASSUME CS:CODES,DS:DATAS,SS:STACKS

START:
    MOV AX,DATAS
    MOV DS,AX
    MOV BX,0
    MOV CX,LEN
L:  MOV AX,BUF[BX]
    MOV DI,0
    OR AX,AX
    JNS M
    MOV STR[DI],'-'
    NEG AX
    INC DI
M:  CALL TRAN;十六进制转十进制
    CALL DISP;显示
    ADD BX,2
    LOOP L
    IO 09H,CRLF
    MOV AH,4CH
    INT 21H

TRAN PROC NEAR
   PUSH CX
   PUSH BX
   PUSH CX
   PUSH DX
   MOV CX,0
L1: XOR DX,DX
   DIV TEN
   PUSH DX
   INC CX
   CMP AX,0
   JNZ L1
L2: POP AX
   ADD AL,30H
   MOV STR[DI],AL
   INC DI
   LOOP L2
   MOV STR[DI],10
   MOV STR[DI+1],13
   MOV STR[DI+2],'$'
   POP DX
   POP CX
   POP BX
   POP CX
   RET
TRAN ENDP

DISP PROC NEAR
   PUSH AX
   PUSH DX
   IO 09H,STR
   POP DX
   POP AX
   RET
DISP ENDP

CODES ENDS
   END START
