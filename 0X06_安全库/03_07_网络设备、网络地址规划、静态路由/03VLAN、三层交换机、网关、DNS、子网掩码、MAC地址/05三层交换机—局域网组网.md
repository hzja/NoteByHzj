# 网络 

## 交换机

### 1、什么是三层交换机？
**三层交换机**是在二层交换机的基础上，增加了路由选择功能的网络设备，能够基于 ASIC 和 FPGA 实现网络功能和转发分组。

**二层交换机**能够基于数据链路层的 MAC 地址，进行数据帧或 VLAN 的传输功能。**三层交换机**能够基于网络层的 IP 地址，实现路由选择以及分组过滤等功能。

![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088909234-08699bd6-8aaa-4cea-b555-b02664204516.webp#clientId=u8ecc51a6-c514-4&from=paste&id=ucb3eec87&originHeight=351&originWidth=461&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=uec6a2444-e171-4756-8ad4-2ea413f3124&title=)

**二层交换机**通过使用 VLAN 分隔广播域，位于同一个 VLAN 下的终端才能进行数据帧交互。对于不同 VLAN 的终端有通信需求时，就必须使用路由功能，也就是需要额外添加**路由器**。

![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088909229-3c0ea323-af47-4a8a-a432-39b05a51c291.webp#clientId=u8ecc51a6-c514-4&from=paste&id=ua9378967&originHeight=521&originWidth=452&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u572dab20-1168-4ee3-a396-fb3201f6301&title=)

二层交换机和路由器组合使用，才能完成**跨 VLAN** 的通信，但使用三层交换机就不需要其它网络设备，能够直接完成不同 VLAN 之间的通信。

![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088909218-0dcf0efa-d99a-45aa-a0eb-7f83f0a10d20.webp#clientId=u8ecc51a6-c514-4&from=paste&id=u6cd3da9e&originHeight=361&originWidth=381&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u659fe74b-68e1-43a1-97f4-470721653e5&title=)

现在，内部网络核心交换机都是使用三层交换机。**三层交换机**用于由以太网构成的 Intranet 内部转发分组，而**路由器**作为连接互联网和 Intranet 内网之间的网关来使用。



### 2、三层交换机和路由器有什么不同？
**三层交换机**一般只支持以太网的数据链路层协议和 IP 网络的网络层协议。<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088909215-7d346d17-fbff-4aa7-99ce-d982bac83794.webp#clientId=u8ecc51a6-c514-4&from=paste&id=ua0eff0db&originHeight=281&originWidth=781&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u39c481c6-1a49-4e03-9e75-a4447414fd7&title=)<br />**路由器**的物理层和数据链路层除了 IEEE 802 标准以外，还支持其它各种协议，包括 ATM、SDH、串口等。网络层和传输层也一样，支持 TCP/IP 协议簇以外的协议簇，比如 IPX 、AppleTalk 等。这些功能都是由运行在 CPU 上的软件来完成，对比三层交换机，速度会慢不少，但是也有很多功能必须由路由器 CPU 来处理，比如远程接入、安全功能等。
<a name="RzFlm"></a>
### 3、三层交换机的架构是怎样的？
三层交换机的**构成要素**有：控制平面、数据平面、背板和物理接口。高端路由器和防火墙也是同样的架构。三层交换机把硬件设备内部分成两个区域，即以路由选择、管理功能为主的**控制平面**和以数据转发功能为主的**数据平面**，从而实现高速转发分组的系统架构。<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088909235-69e67c2c-b287-4789-a641-6a70efcf001d.webp#clientId=u8ecc51a6-c514-4&from=paste&id=u44a0315f&originHeight=321&originWidth=561&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ue16d539e-1243-4423-ab29-29279cf0af0&title=)<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088910348-4ba16268-e109-4f09-bd4c-4e7f73b69432.webp#clientId=u8ecc51a6-c514-4&from=paste&id=u2589639f&originHeight=261&originWidth=761&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ucfa6127f-e772-4ee0-a001-4da8a43ccbc&title=)<br />当硬件内部结构分为控制平面和数据平面时，分组的传输需要使用 FIB（转发信息库）和邻接表的信息。这种利用 FIB 和邻接表信息的 IP 分组传输方式叫做**特快转发**。<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088909853-96d8cec3-2957-4125-b774-2b4b90ce9ee9.webp#clientId=u8ecc51a6-c514-4&from=paste&id=u4b41ddf1&originHeight=161&originWidth=761&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uf8420fd8-5f4a-4027-aad9-e58055e9d9e&title=)<br />路由器使用 CPU 完成分组转发，而三层交换机使用 ASCI 代替 CPU ，分组的转发更快。<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088909893-e65d3773-6f96-4a4b-a1b7-442aa2460482.webp#clientId=u8ecc51a6-c514-4&from=paste&id=u478bb950&originHeight=401&originWidth=781&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u2a7b622a-21c4-46a4-a949-52b6ae4c652&title=)<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088909882-2c43ae22-e6a2-443a-b6f8-eeda112c85f8.webp#clientId=u8ecc51a6-c514-4&from=paste&id=u0560bd62&originHeight=602&originWidth=742&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u96074221-6b36-47a0-9fc7-5f02d343726&title=)<br />三层交换机将 FIB 和邻接表合并成一个表项，这个表项叫做 FDB（转发数据库），注册在内存中并通过硬件处理完成高速检索。
<a name="K8Ylf"></a>
### 4、什么是多层交换？
除了二层交换机之外，三层以上功能的交换机统称为**多层交换机**。<br />拥有 IP 路由选择等网络功能、能够通过访问控制列表来对传输层的 TCP 端口编号进行访问控制的三层交换机，也叫做**四层交换机**。<br />能够支持到 TCP 层级访问控制的交换机叫做四层交换机。能够基于 HTTP 和 HTTPS 这里应用层参数进行负载均衡等操作，这类交换机叫做**七层交换机**。<br />有些厂家将处理到应用层的网络设备和路由器区分开来，作为不同类型的产品。但所谓的多层交换机，也就是基于 ASIC 和 FPGA 的硬件处理，高速进行各层业务处理的网络设备。
<a name="IEjBm"></a>
### 5、什么是负载均衡设备？
多个客户端同时连接一台服务器，可能导致服务器的处理能力超过负载。如果使用多台提供相同服务的服务器，通过使用**负载均衡设备**，就可以将客户端的请求分散到各个服务器进行处理。<br />负载均衡设备可以是**专用设备**，也可以是在服务器上运行的**应用程序**。专用设备会有以太网接口，可以说是多层交换机的一种。也存在拥有负载均衡功能的路由器。<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088909891-8ac18615-0ce0-4549-8dbe-2cfa7d31d72a.webp#clientId=u8ecc51a6-c514-4&from=paste&id=u49f0f8f8&originHeight=81&originWidth=81&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u689730dc-15bc-43fd-a311-087b6cd8627&title=)<br />负载均衡设备一般会分配虚拟 IP 地址，所有客户端的请求是通过**虚拟 IP 地址**完成的，通过负载均衡算法将客户端的请求转发到服务器的实际 IP 地址上。
<a name="sTbL9"></a>
#### 负载均衡设备作用
使用负载均衡设备可以提高**扩展性**和**可靠性**。<br />![](https://cdn.nlark.com/yuque/0/2022/png/396745/1641088910278-5a343af2-cccc-4888-849e-b312746cde93.png#clientId=u8ecc51a6-c514-4&from=paste&id=u165026e9&originHeight=141&originWidth=601&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uab4a5a67-a6c9-472d-adbe-cdc8d1e34d3&title=)<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088910509-e8082861-d2f7-40be-9381-ed3117ebbf7b.webp#clientId=u8ecc51a6-c514-4&from=paste&id=uae2dd4ca&originHeight=441&originWidth=510&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u0f47280b-292c-4b76-a9d1-62e1cf4281d&title=)<br />负载均衡设备不仅适用于服务器，**防火墙**或**代理服务器**这种安全设备也可以使用负载均衡设备。
<a name="Tz7eg"></a>
#### 负载均衡算法类型
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088910215-9e6095c3-7cf0-4864-8a2f-c1da39062520.webp#clientId=u8ecc51a6-c514-4&from=paste&id=u713f9ce1&originHeight=502&originWidth=761&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u0808ca15-62b1-4c7e-a2d4-0b5f3a265e9&title=)
<a name="Zfp0I"></a>
### 6、什么是 SSL 加速？
SSL 加速是负载均衡专用设备的一项功能，执行这个功能的内部装置叫做 **SSL 加速器**。<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088910228-5392308c-299b-4826-ad4c-46930404fafe.webp#clientId=u8ecc51a6-c514-4&from=paste&id=u36e176f5&originHeight=291&originWidth=678&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=uef7b9e22-441d-4128-965d-13a0861fc9f&title=)<br />在服务器进行 SSL 通信时，对传输的数据进行加密解密操作需要执行相当复杂的计算，这会导致服务器 CPU 的处理负载进一步加大。与不执行加密解密的 HTTP 通信对比，HTTPS 的处理负载是 HTTP 的 10 倍。<br />这时，通过使用 SSL 加速器对客户端的 HTTPS 请求进行解密，并转换成 HTTP 请求后再转发到实际的服务器上，这样就可以降低服务器 CPU 的处理负载。<br />这样一来，整个系统在提高服务器响应速度的同时，还能减少服务器的数量，在单位时间内能够转发更多 Web 服务内容。
<a name="lsG7H"></a>
### 7、根据性能分类，三层交换机有几种类型？
根据三层交换机的背板容量，可分为**高端交换机**、**中端交换机**和**低端交换机**。
<a name="aw497"></a>
#### 高端三层交换机
框式三层交换机由路由引擎、交换结构、线卡模块、风扇模块和电源模块组成，一般作为企业的核心交换机用在数据中心。<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088910621-d3860986-9fe4-42f5-8571-652fbb374407.webp#clientId=u8ecc51a6-c514-4&from=paste&id=u3ba250e9&originHeight=265&originWidth=454&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u055f39c0-4a62-4d67-9c17-bff8fbade2c&title=)<br />为了提高交换机的可靠性，除了线卡模块之外，其余模块都提供了**冗余结构**。电源或风扇模块通常采用 1+N 或 N+N 冗余结构，路由引擎通常采用 1+1 的冗余结构。三层交换机一般通过多台设备堆叠构成三层冗余结构，来提高整个系统的可用性。
<a name="noq4L"></a>
#### 中端三层交换机
中端三层交换机一般是箱式交换机或最大插槽数为 4 的框式交换机，用于企业核心交换机和接入交换机进行汇聚交换。<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088910631-270b2da5-89fc-40f8-acee-cbe418adee54.webp#clientId=u8ecc51a6-c514-4&from=paste&id=u648ad0e1&originHeight=230&originWidth=468&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u949cba94-4c78-49da-9794-08b0603e425&title=)
<a name="aujvl"></a>
#### 低端三层交换机
低端三层交换机一般为箱式交换机或桌面式交换机，作为企业的接入交换机使用，设备通常有 24 端口或 48 端口。有些作为 IP 电话或无线 LAN 的访问接入点，还能直接使用以太网的电源供电（ PoE ）。<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088910635-08293641-6457-48b6-8ef6-528f6f1e4773.webp#clientId=u8ecc51a6-c514-4&from=paste&id=u6539d438&originHeight=175&originWidth=446&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ud3ce038f-37aa-4265-90b6-43701460d64&title=)
<a name="RmjRM"></a>
### 8、三层交换机有哪些功能？
尽管各个厂家的三层交换机提供的功能不同，但是这些功能大致有几个类别：认证类、管理类、路由选择协议、QoS 、IP 隧道、VLAN 、STP 等。<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088911024-05231e9c-2b58-408f-b075-d0f56733eeff.webp#clientId=u8ecc51a6-c514-4&from=paste&id=u90fd0471&originHeight=441&originWidth=701&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u65c9c2b8-4d99-485a-bd03-b69ad6ede12&title=)<br />在三层交换机中，对分组进行管理的功能是由 CPU（**软件**）直接处理的。用户直接的通信，是由 ASIC（**硬件**）处理实现分组的高速转发的。<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088910843-f8c5ad1f-b426-460a-abbb-5c1fbac67bb2.webp#clientId=u8ecc51a6-c514-4&from=paste&id=u4bcdcc82&originHeight=542&originWidth=611&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u2062477d-b901-4faf-8979-9cc44865d5c&title=)
<a name="vNpe6"></a>
### 9、什么是 VLAN ？
由一台或几台集线器组成的一个广播域可以称为是一个扁平网络。相互连接的终端会接收网络发来的所有广播帧。随着连接终端数量的增加，广播数量也会增加，网络状况也就越混杂。<br />这种情况下，需要采用 **VLAN**（ Virtual Lan ）技术把整个扁平网络进行逻辑分段。一个 VLAN 对应一个广播域，不同 VLAN 的广播域互相隔离，因此能够控制广播域内的广播通信规模。<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088910969-2c9dc56f-4d4c-46f0-9617-0d8ade0f4d1e.webp#clientId=u8ecc51a6-c514-4&from=paste&id=u05516b8a&originHeight=781&originWidth=474&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u3642a7b2-dc05-4d37-b28a-bc4fa6030b1&title=)<br />交换机通过设置，可以轻易的修改物理端口的属性，让这个物理端口加入到某一个 VLAN 之中，而不需要改变对应的物理线路。<br />VLAN 之间的通信需要使用路由选择，不借助路由器或三层交换机就无法与不同 VLAN 的终端进行通信，因此安全性也有了保障。
<a name="UfHJx"></a>
### 10、什么是基于端口的 VLAN ？
**基于端口的 VLAN** 是在交换机的端口上设置 VLAN ID ，拥有相同 VLAN ID 的多个端口构成一个 VLAN 。通常交换机在初始状态下，所有端口默认 VLAN ID = 1（即 VLAN 1 ），可以对任意一个端口的 VLAN ID 进行设置。比如把修改某一个端口配置为 VLAN ID = 2 ，那这个端口就属于 VLAN 2 。
<a name="TqHte"></a>
### 11、什么是标签 VLAN ?
当 VLAN 需要跨越多个交换机时，会使用**中继端口**（ trunk port ）的**标签 VLAN**（ tag VLAN ）。tag VLAN 通过中继端口完成数据帧的接收和发送，其中数据帧需要添加 4 字节 **IEEE 802.1Q** 定义的头部信息（即 VLAN 标签信息）。为数据帧添加标签的过程叫做 tagging 。当 tagging 完成后，数据帧的最大长度从 1518 字节变成 1522 字节，其中有 12bit 的 VLAN ID 信息，也就是说，最多支持的 VLAN 数是 4096 个。<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088911365-ae686091-bf5c-439a-9614-11954ce26a71.webp#clientId=u8ecc51a6-c514-4&from=paste&id=u958936f5&originHeight=371&originWidth=602&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u5dad3e1a-5d22-4dbe-886b-0649da58091&title=)<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088910978-007d26bd-c1d6-4f56-93f9-5a771562172d.webp#clientId=u8ecc51a6-c514-4&from=paste&id=u0bd0b932&originHeight=551&originWidth=801&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u6149b05e-8333-4cc9-bc79-b1233287130&title=)<br />在以太网中，数据帧中 **TPID** 的值是 0x8100 。如果源地址后面的值不是 0x8100 ，那么就不是 TPID 信息，而是识别成“**长度/类型**”。当“长度/类型”的值为 0x05DC 以下时，表示数据帧的长度；在0x0600 以上时，表示数据帧的类型。数据帧类型的值分别是：IPv4 是 0x0800 ，ARP 是 0x0806 、IPv6 是 0x86DD 等。<br />不支持 IEEE 802.1Q 的交换机，由于无法识别 TPID ，会将 0x8100 视为数据帧类型，但是不存在 0x8100 类型的数据帧，交换机会作为错误帧直接丢弃。<br />IEEE 802.1Q 还定义了一个字段：**TCI** ，TCI 可以分为 3 个类型：PCP 、CFI 和 VID 。<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088911087-c024a72c-81d5-4535-ba79-59e007846718.webp#clientId=u8ecc51a6-c514-4&from=paste&id=ub8b199b2&originHeight=221&originWidth=761&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u731db577-f6fc-4388-97e7-a2dd4efd239&title=)<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088911291-8ce7ebb0-4dca-4f67-a33a-ecf0de945e46.webp#clientId=u8ecc51a6-c514-4&from=paste&id=u45abb4de&originHeight=431&originWidth=841&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u5fbd358e-65ad-4e65-8037-8ba1d8a3aef&title=)
<a name="mdN7u"></a>
### 12、什么是本征 VLAN ？
本征 VLAN（ **native VLAN** ）用于中继端口（ **trunk port** ）。如果数据帧在进入 trunk port 前，是没有标记的，那么 trunk port 会给它打上 native VLAN 的标记，这个数据帧就以 native VLAN 的身份传输。如果数据帧在进入 trunk 前，已经打上标记了，且 trunk port 允许这个 VLAN ID 通过，这个数据帧就通过。trunk port 不允许通过的 VLAN 数据帧会直接丢弃。交换机默认使用 VLAN ID 为 1 的 VLAN 作为 native VLAN 。native VLAN 是可以自定义的，通常是使用 VLAN 1 以外的 VLAN 作为本征 native VLAN ，作为管理 VLAN 。
<a name="jEUp7"></a>
### 13、什么是中继端口？
使用标签 VLAN（ tag VLAN ）向其它交换机传递 VLAN ID 时，首先设置中继端口（ **trunk port** ）。trunk port 能够属于多个 VLAN ，与其它交换机进行多个 VLAN 的数据帧收发通信。两台交换机 trunk port 之间的链路叫做中继链路（ **trunk link** ）。<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088911543-5200a398-f89b-4311-8edc-9b1c8f43c86a.webp#clientId=u8ecc51a6-c514-4&from=paste&id=ua3889c18&originHeight=285&originWidth=681&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=ud25cb878-7d7e-45dc-b659-faea8827599&title=)<br />与 trunk port 和 trunk link 对应的，是接入端口（ **access port** ）和接入链路（ **access link** ）这两个概念。access port 只属于一个 VLAN ，access link 也仅传输一个 VLAN 数据帧。
<a name="Izooh"></a>
### 14、什么是私有 VLAN ？
私有 VLAN（ Private VLAN ）也叫做 **PVLAN** ，是指在 VLAN 内部再构建一层 VLAN 的功能，也叫做多层 VLAN 。<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088911430-74bccefd-f51c-40a4-9f61-c77ef4264cd9.webp#clientId=u8ecc51a6-c514-4&from=paste&id=u3f82d1af&originHeight=372&originWidth=697&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=uc04b8349-ac50-4329-9605-951f374841e&title=)<br />PVLAN 能够进一步分割广播域，削减 VLAN 内部的广播流量并保障通信的安全性。酒店、公寓等场所使用这个功能，能够控制服务器或网关与终端的连接，让不同终端之间无法相互通信。<br />PVLAN 由**主 VLAN**（ Primary VLAN ）和**从 VLAN**（ Secondary VLAN ）组成，从 VLAN 与 1 个主 VLAN 关联。<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088911393-7d46a896-c667-478c-b4f8-1fdba05e4cd1.webp#clientId=u8ecc51a6-c514-4&from=paste&id=u316ee8ed&originHeight=241&originWidth=721&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u0589d867-d6d9-4b6f-8acf-6a3058606e8&title=)<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088911593-05b0d473-741d-4c1e-b0a5-fca685b6165b.webp#clientId=u8ecc51a6-c514-4&from=paste&id=u51fb837f&originHeight=181&originWidth=641&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ufca08aa2-4870-4dfe-90af-4cd00fcac83&title=)
<a name="A20Zt"></a>
### 15、静态 VLAN 和动态 VLAN 的区别是什么？
通过输入交换机命令，将一个交换机端口固定分配给某个 VLAN ，这种 VLAN 划分方式叫做**静态 VLAN** 。<br />相对的，根据连接端口的终端或用户信息自动分配某个 VLAN 的方式叫做**动态 VLAN** 。具体来说，就是交换机根据终端的 MAC 地址来分配，或者基于 802.1X 的认证来决定端口属于哪个 VLAN 。在动态 VLAN 中，无论终端与哪台交换机连接，都会获取固定的同一个 VLAN 。<br />通过交换机内部的数据库，可以实现基于 MAC 地址的认证，但大部分情况下，动态 VLAN 的实现都是使用 RADIUS 服务器。<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088912070-d4c0dcfe-3014-4959-a26a-13b6e5421cc1.webp#clientId=u8ecc51a6-c514-4&from=paste&id=u2c73b68d&originHeight=831&originWidth=561&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u4f69cebb-3ff2-4c73-93c9-3fad9ab1337&title=)
<a name="y47k9"></a>
### 16、VLAN 之间的是如何互通的？
<a name="KOO6H"></a>
#### 二层交换机
在**二层交换机**上设置多个 VLAN 后，单台交换机内，数据帧只能在相同 VLAN 内转发，不能在不同 VLAN 之间转发。<br />当需要在多个 VLAN 之间转发数据时，一般会使用 trunk link 连接路由器，通过**路由器**进行 VLAN 之间的路由选择。<br />![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1641088911775-39d21f1e-e625-4b5d-a9e9-e49df5abcb8e.webp#clientId=u8ecc51a6-c514-4&from=paste&id=ub996578a&originHeight=381&originWidth=701&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u374aa36c-3ca0-4029-ba3e-577f927fecc&title=)
<a name="BbelF"></a>
#### 三层交换机
**三层交换机**能够在交换机内部直接完成 VLAN 之间的路由选择。
