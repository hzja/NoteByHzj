路由器<br />随着接入网络的终端越来越多，网络规模越来越大，但是二层交换机的容量和性能有限，无法接入日益增多的终端。于是就有了三层网络设备**路由器**，连接不同网段的二层交换机，进而把全世界的网络都连接起来。接下来看看关于路由器的常见问题：
<a name="uVgjc"></a>
#### 1、什么是路由器？
**路由器**是负责网络层的工作的硬件设备，通过不同端口，连接不同的网段，识别目的地址，根据**路由表**进行数据包转发。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714493701-f0d014fb-14c5-4ead-91da-fb1111828c53.webp#clientId=u4d450d01-d284-4&from=paste&id=u4b76afc7&originHeight=464&originWidth=641&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u57721058-f81a-4bfd-81c4-0639cfcd5ca&title=)
<a name="jb5hj"></a>
#### 2、什么是路由选择？
路由器为数据包选择路径的过程叫做**路由选择**。<br />路由器从接口收到数据包后，根据目的地址的信息进行路由选择，按照选择结果将数据包从对应接口转发出去。<br />转发的路线叫做**路径**。<br />路由器在路由选择时，参考的信息叫做**路由表**。路由器通过这些信息判断数据包转发到哪个网络。<br />路由表由多个**路由表项**组成，路由表项既可以手动设置**静态路由**，也可以通过路由协议自动生成**动态路由**。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714493435-292dc9ed-7377-4534-adb2-5012b460b285.webp#clientId=u4d450d01-d284-4&from=paste&id=u8c3dc25b&originHeight=281&originWidth=681&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u4fdafe22-267b-4c47-a8f6-f7f27c6c686&title=)<br />路由选择在**网络层**完成，过程如下：<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714493478-eea54121-7efb-496a-ae1d-176f31ebb295.webp#clientId=u4d450d01-d284-4&from=paste&id=u05b94fa1&originHeight=531&originWidth=761&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u7fd0a7f7-2f47-413f-8f10-1bcedcde3b1&title=)
<a name="D5wBg"></a>
#### 3、什么是转发？
路由选择的过程需要根据目的 IP 地址的信息，判断将数据包转发到哪个网络。路由器的一个接口对应一个网络，发送到不同网络，是指路由器从某个接口收到数据，然后从另外的接口发送出去。<br />把数据包从接收接口到发送接口的发送过程叫做**转发**。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714493500-3ac851ac-587d-42b8-a848-e5c8ade531cf.webp#clientId=u4d450d01-d284-4&from=paste&id=ued7b0d60&originHeight=361&originWidth=761&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u4c8a59c0-a4a9-4227-960b-3fd7983a6d6&title=)
<a name="cYdIw"></a>
#### 4、路由器设备有哪些类型？
一种是在 PC 或 Service 中运行**路由器软件**当做一台路由器使用。<br />还有一种更常见、更普及的路由器，是安装路由器专用操作系统和配备专用硬件的设备，也叫做**硬件设备**。<br />与路由器软件对比，专用的硬件设备有许多优点：

- 提供更容易使用的接口
- 操作简单
- 可以在短时间完成加载
- 定制系统可以轻松的提高吞吐量
- 可靠性更高
- 对于路由器功能来说，成本更低
<a name="YdcyC"></a>
#### 5、根据性能分类，路由器有哪些类型？
路由器根据_性能_，可以分为高端路由器、中端路由器和低端路由器，以及价格便宜的家用路由器，共 4 种类型。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714493480-334d6210-b04f-4cfe-828b-1e2ce3c3f951.webp#clientId=u4d450d01-d284-4&from=paste&id=u13f8a7b4&originHeight=201&originWidth=601&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u31bf3c1f-dd1a-4ff1-aca9-9ff8c19e62b&title=)<br />**高端路由器**<br />高端路由器的性能最好，主要作为骨干网络的核心路由器使用，在数据中心、电信运营商网络中完成网络互连等功能。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714494616-1698a003-adcb-4237-9234-43a2a5d7368c.webp#clientId=u4d450d01-d284-4&from=paste&id=u91ed31da&originHeight=431&originWidth=178&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u5f18f622-66cd-4b48-a81e-994e848a386&title=)<br />这类路由器又叫做**框式路由器**，有可以插入多块扩展卡的卡槽。扩展卡的类型丰富，主要有路由引擎、交换结构、线卡等。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714494543-ead64444-a2a4-4e3e-8b4f-b0977f125adc.webp#clientId=u4d450d01-d284-4&from=paste&id=u55e4606d&originHeight=241&originWidth=601&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u81deb7d4-659f-4523-b745-c5d11d778be&title=)<br />框式路由器不仅可以控制接口的数量，还可以增强设备的交换容量，具有引擎冗余功能。<br />当某一个模块发生故障时，无需关闭路由器电源，在其它模块仍在工作状态下，只替换发生故障的扩展卡即可修复，这种操作叫做**热插拔**或**在线插拔**。<br />**中端路由器**<br />中端路由器通常作为企业的核心路由器，是整个企业网络的中心。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714494619-60fdb13e-9aca-43c6-9cc4-6f9b100b8416.webp#clientId=u4d450d01-d284-4&from=paste&id=u23ef23fd&originHeight=157&originWidth=222&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u8ea41e10-6939-4960-812b-0b0800c4083&title=)<br />中端路由器可分为两类，一类是在机框上配置固定数量接口的设备，无法额外添加端口，叫做**箱式路由器**；另一类是可以根据需要的端口，添加对应端口的可选模块，进而扩充端口数量的设备，叫做**模块式路由器**。<br />**低端路由器**<br />低端路由器用于中小企业或大型企业营业部、或分支机构。同中端路由器一样，也分成两类，一类是端口数量固定的**箱式路由器**，另一条是端口数量和类型可变的**模块式路由器**。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714494579-daa44357-a07e-48c2-9230-0926c2a3cb71.webp#clientId=u4d450d01-d284-4&from=paste&id=u50089041&originHeight=144&originWidth=222&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u48357668-2f6e-4480-81e6-eaf66bad8ce&title=)<br />还有一类是无法在机架内使用的，叫做**桌面式路由器**。
<a name="fM39A"></a>
#### 6、什么是家用路由器？
一般是小规模分支机构或家庭连接宽带使用的路由器，也叫做 **WAN 路由器**。还集成了无线网络功能，支持 WiFi 6 无线标准。<br />![](https://cdn.nlark.com/yuque/0/2021/png/396745/1638714500766-a77ebea4-b646-4b31-b4c7-6e7ebc106532.png#clientId=u4d450d01-d284-4&from=paste&id=u68a31f6f&originHeight=81&originWidth=81&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ucd437f0a-1ba1-4915-965e-dae24405473&title=)
<a name="nkMl0"></a>
#### 7、运营商用什么类型的路由器？
电信运营商在对企业或家庭提供网络服务时，搭建的网络规模会比企业网大很多，对路由器的功能和性能有更高的要求，也更加复杂。从电信运营商的角度分类，路由器可分为：核心路由器、边缘路由器和用户边缘路由器。

- **核心路由器**核心路由器位于_骨干网_中，用于构建核心网络。核心网络用于各个业务网络的互联，承载着高速转发各个网络之间流量的任务。
- **边缘路由器**边缘路由器是在_骨干网边缘_接入的路由器，用于接入用户网络线路，并连接骨干网。由于用户众多，边缘路由器需要高速转发，同时还要完成数据的优先级、包过滤、认证、加密等多个功能。
- **用户边缘路由器**用户边缘路由器是放在_用户_处的路由器，连接运营商的边缘路由器。

![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714495240-b5294ee1-1250-46be-bdba-1677fb0059e2.webp#clientId=u4d450d01-d284-4&from=paste&id=uaeb89a6a&originHeight=442&originWidth=761&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u9c45cf59-ba01-4767-8d51-9202ab28dd7&title=)
<a name="oYrKj"></a>
#### 8、企业用什么类型的路由器？
面向企业的路由器叫做企业路由器，根据网络中所在的位置和分工，可分为几类：

- **接入路由器**用户接入网络使用的路由器叫做接入路由器，由接入路由器组成的网络叫做**接入网**。它可以提供认证、接入控制等功能，通常部署在企业的分支机构或下属部门。在家里或出差时，接入公司网络使用的远程接入路由器，也是接入路由器的一种，使用拨号连接、PPTP 、IPsec 、SSL 等协议完成接入过程。
- **汇聚路由器**在大型网络中，会在核心层和接入层中间搭建一个汇聚层网络，形成 3 层网络结构。汇聚路由器负责在汇聚接入网的路由选择信息，完成包过滤等工作，实现多个网络的互连。
- **核心路由器**核心路由器是位于网络中心位置的路由器，和接入网或汇聚网实现数据高速传输。
- **家用路由器**家用路由器是内置 ADSL 调制解调器和 ONU 、使用 PPPOE 协议连接运营商网络的路由器。
- **移动路由器**出差或外出时，用来连接互联网的便携式路由器，也叫做**移动路由器**。这种路由器外形小巧轻便，有些配有有线 LAN 接口和无线 LAN 接入点，有些通过 USB 接口或流量卡连接互联网，有些还集成了流量卡和路由器的两种功能。
<a name="EdQ1H"></a>
#### 9、什么是 IP 地址？
IP协议常见的有两种：**IPv4** 和 **IPv6** 。<br />IPv4 地址用点 “ **.** ” 把地址等分成 4 个部分，使用十进制表示。IPv4 共 32 位二进制，每部分长度是 8 位，取值范围是 0~255 ，举个栗子：192.168.0.1 。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714495102-3d8c4e8a-4832-4a6f-bf99-683678cf0a7c.webp#clientId=u4d450d01-d284-4&from=paste&id=u1dc18433&originHeight=29&originWidth=201&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u97f99ce8-659c-4347-9855-86e6b00c076&title=)
<a name="PrOjP"></a>
#### 10、地址如何分类？
IP 地址分为五类，分别是 **A 类**、 **B 类**、 **C 类**、 **D 类** 、**E 类**。前面三类是根据固定的网络位和主机位区分的。_A 类地址_范围是 0.0.0.0 ~ 127.255.255.255 ，前面 8 位是网络位，剩余的是主机位。_B 类地址_范围是 128.0.0.0 ~ 191.255.255.255 ，前面 16 位是网络位，后面 16 位是主机位。_C 类地址_范围是 192.0.0.0 ~ 223.255.255.255 ，前面 24 位是网络位，后面 8 位是主机位。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714495173-5e74352f-81d8-4d51-8a9e-141ffec34c27.webp#clientId=u4d450d01-d284-4&from=paste&id=ud79e5530&originHeight=668&originWidth=681&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=ued39066e-a159-4dd3-841b-e34d938688f&title=)<br />还有用于组播的 _D 类地址_，范围是 224.0.0.0 ~ 239.255.255.255 ，用于研究的 _E 类地址_，范围是 240.0.0.0 ~ 255.255.255.255 。
<a name="OJB7Q"></a>
#### 11、什么是 CIDR ？
**CIDR** 不使用固定的地址分类，而是使用**可变长子网掩码**确定网络位。网络位之前只有 8 位、16 位或 24 位三种，使用 CIDR 后，可分配任意长度的网络位，主机位也可以是任意长度，就出现了新的子网掩码。子网掩码的网络位全是 1 ，主机位全是 0 。举个栗子：网络位长度为 24 为，子网掩码就是 255.255.255.0 ，还可以用 /24 表示。
<a name="GZsae"></a>
#### 12、什么是私有地址？什么是公网地址？
在内部网络使用的地址，就是**私有地址**。每个地址分类都有一段私有地址，给不同规模的内部网络使用。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714494895-0fc27ccd-05e3-4850-9ea7-8677a8a4a123.webp#clientId=u4d450d01-d284-4&from=paste&id=u6cb6174a&originHeight=321&originWidth=561&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u56f24dee-50a7-4267-ab8c-2ede0a9b72a&title=)<br />A 类到 C 类地址中，除了私有地址之外，所有地址都是**公网地址**。
<a name="zx9GN"></a>
#### 13、单播、广播、组播和任意波的区别是什么？
**单播**：向目的 IP 地址的_单台_主机发送数据。使用 IPv4 中的 A 类、B 类、C 类地址。<br />**广播**：向同网段内的_所有_主机发送数据。使用 255.255.255.255 或主机为全是 1 的地址。<br />**组播**：使用专用 IP 地址，向_特定_的多个主机发送相同的数据。使用 IPv4 中的 D 类地址。<br />**任意播**：一个任意播地址分配给多个主机，还有多条路由到达相同的目的地，选择_代价最小_的主机发送数据。只在 IPv6 中存在。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714495543-53fc9239-be02-43fd-9a4d-ccb7c66e33fb.webp#clientId=u4d450d01-d284-4&from=paste&id=ucd305342&originHeight=961&originWidth=481&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ufff5257e-940c-4d1f-a6a8-3aad097ebe4&title=)
<a name="Aqyzp"></a>
#### 14、接口有哪些类型？
IP 地址是网络层的逻辑地址。MAC 地址是数据链路层的物理地址，与物理接口一一对应，无法修改，也不存在重复的地址。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714495577-666ae7be-3957-4f77-bbcf-60df8dd13f96.webp#clientId=u4d450d01-d284-4&from=paste&id=u17f3500b&originHeight=341&originWidth=681&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u8006a34c-7d1d-4e5e-bd99-469e6249eca&title=)
<a name="IaPzR"></a>
#### 15、什么是 ARP ？
**ARP** 是通过 IPv4 地址获取 MAC 地址的网络协议。路由器在发送 IP 包时，会用 ARP 获取以太网帧需要的目的 MAC 地址。完成 ARP 解析后，解析结果会保存在 ARP 表中。这个表项有一定时限，这个时限叫做**老化时间**，超时后需要再次解析 ARP 。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714495839-d551dabb-971b-48c7-be80-83c57bf4d0fc.webp#clientId=u4d450d01-d284-4&from=paste&id=u987e964b&originHeight=311&originWidth=622&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u84c06e04-474b-42e1-b1ed-535a19ed6bd&title=)
<a name="Huff7"></a>
#### 16、什么是 DHCP ？
**DHCP** 是为主机（客户端）自动配置 IP 地址、子网掩码、域名、DNS 服务器、默认网关等信息的网络协议。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714495929-51fdb8bd-82aa-4c01-ab3f-b85ce1c6dffd.webp#clientId=u4d450d01-d284-4&from=paste&id=ud4b8b1bd&originHeight=595&originWidth=746&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u58ed20c1-d30d-4a7f-b972-63058015015&title=)<br />如果手动为每台主机配置 IP 地址，是非常繁琐的，而且容易出错。而使用 DHCP 就可以自动完成地址分配，非常的方便和快捷。
<a name="Rmxoc"></a>
#### 17、什么是 PPPoE ？
**PPPoE** 就是以太网上的点对点协议，在 LAN 上完成用户认证，并分配 IP 地址的网络协议。用于提供网络接入服务，让设备接入互联网。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714495912-5c92f65b-a4cd-4d2a-9480-65e32ad598d2.webp#clientId=u4d450d01-d284-4&from=paste&id=u17295f81&originHeight=452&originWidth=427&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u3ac09327-58fa-4c5f-b86d-64a998f1445&title=)
<a name="zJE9L"></a>
#### 18、路由表包含哪些信息？
路由表包含路由选择的必要信息，主要内容如下：

1. **目的 IP 地址**：IP 包的目的地址。
2. **子网掩码**：表示目的 IP 地址有多少位是网络位。
3. **网关**：IP 包下一跳的 IP 地址。
4. **网络接口**：IP 包从哪个路由器接口发送出去。
5. **度量值**：当有多条到达目的地的不同路径时，度量值越小表示优先级越高。

五个内容组成一条路由表项。
<a name="oJcxO"></a>
#### 19、什么是最长匹配原则？
如果路由表中出现多条到达同一个目的网络的表项时，选择子网掩码最长、度量值最小的表项，这就是**最长匹配原则**。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714496140-cff89a1f-c9dc-4522-b4f8-82b00a5ed33e.webp#clientId=u4d450d01-d284-4&from=paste&id=u0dadee48&originHeight=471&originWidth=659&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=ufbf51be2-02f2-4e45-a528-4bb2fee5b7d&title=)
<a name="Zi1lv"></a>
#### 20、什么是默认网关？
如果路由表中不存在满足条件的表项，那么会根据路由表中的默认路由表项进行转发。默认路由表项的 IP 地址是 0.0.0.0 ，子网掩码是 0.0.0.0 ，即 0.0.0.0/0 。默认路由表项又叫做**默认网关**。如果路由表中不存在默认网关，那么路由器会告知错误，并丢弃这个数据包。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714496364-46634dec-f76d-4930-8549-5858ff8b380f.webp#clientId=u4d450d01-d284-4&from=paste&id=u805e6952&originHeight=472&originWidth=851&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=uae009978-4c52-490b-81cc-307a4569824&title=)
<a name="nH0kX"></a>
#### 21、什么是静态路由？
手动在路由器上设置的路由表项就叫做**静态路由**。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714496474-91a3bfad-f6aa-49b8-afad-0b25c8079e0f.webp#clientId=u4d450d01-d284-4&from=paste&id=uea1018db&originHeight=191&originWidth=491&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u183e03b3-13a6-4115-910a-c50bef8cb6e&title=)
<a name="vp04P"></a>
#### 22、什么是动态路由？
当网络规模越来越大，路由器的数量越来越多时，通过手动配置路由表项是不可能的，这就要使用**动态路由协议**，在路由器之间交换信息自动生成路由表项。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714496514-8e810777-e2a7-4ec8-a396-a1b7fe61ef2a.webp#clientId=u4d450d01-d284-4&from=paste&id=u700847e2&originHeight=191&originWidth=491&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u5de22b02-2128-43cf-9128-3b88d91d0dd&title=)<br />如果网络使用动态路由，需要消耗一定的时间从其它路由器获取路由信息，路由表在这个过程中会逐渐增大，最终所有的路由器都获取到完整的路由表，这个过程叫做**收敛**。路由表从初始状态到收敛完成花费的时间叫做**收敛时间**，收敛时间越短，网络越稳定。通常，路由器数量越多，收敛时间越长，同时收敛时间还跟路由算法有关。算法不同，收敛时间的长短也不同。<br />使用动态路由时，有三种情况会发送路由器之间的路由信息交互：

- 首次运行动态路由协议时
- 网络中添加新的路由器或新的链路时
- 网络中路由器离线或链路端口导致网络故障时
<a name="DWejz"></a>
#### 23、动态路由有哪些类型？
随着 IP 网络的发展，网络规模已经很大了，无论哪种路由协议都不能完成全网的路由计算，因此网络分成了很多个**自治系统**（ AS ）。在自治系统内部运行的 IGP 和在 AS 之间运行的 EPG 两类。<br />其中，**EGP** 广泛使用的是 **BGP** 。<br />**IGP** 最常用的是 **RIP** 和 **OSPF** 。<br />根据不同的最优路径算法，IGP 可分为**距离矢量型**、**链路状态型**和**混合型**。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714496652-222172df-640b-484c-b201-50ef075a736a.webp#clientId=u4d450d01-d284-4&from=paste&id=u82aa4e87&originHeight=282&originWidth=721&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u6ac242aa-589d-4287-9474-5dfe843c2e8&title=)
<a name="Jqmcx"></a>
#### 24、什么是 RIP ？
**RIP** 是使用到达目的网络需要经过的跳数作为度量值，也就是需要经过多少个路由器。通常 RIP 每 30 秒更新一次路由信息。当网络规模太大时，会出现路径无法收敛的情况，定义了 16 跳的限制距离。当路由器收到度量值 16跳以上的信息，则认为网络不可达。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714496903-b3f326de-52fa-4c00-81ae-9693e3464677.webp#clientId=u4d450d01-d284-4&from=paste&id=u8afcf602&originHeight=381&originWidth=837&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u9ce64685-607c-4626-8d6e-a18ec93d4f8&title=)<br />RIP 除了 **RIPv1** 外，还有升级的 **RIPv2** 和 IPv6 使用的 **RIPng** 。<br />**RIPv1** 使用广播交换路由信息，是有类路由协议。**RIPv2**使用组播交换路由信息，是无类路由协议，还有路由信息的认证功能。<br />**RIPng** 使用组播交换路由信息，由于 IPv6 协议自带认证和加密功能，因此 RIPng 不需要携带认证功能。<br />由于距离矢量型路由协议依靠相邻路由器的信息进行路由选择，无法了解整个网络结构。为了防止环路，需要使用水平分隔技术或毒性逆转方法进行放环。
<a name="Yngu9"></a>
#### 25、什么是 OSPF？
**OSPF** 是用于大规模网络的 IGP ，是运营商和企业首选的动态路由协议。还有使用组播的 **MOSPF** 和对应 IPv6 的 **OSPFv3** 作为 OSPF 扩展的动态路由协议。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714497202-27fe94a5-05d3-4afa-9f15-d9c7390ab39a.webp#clientId=u4d450d01-d284-4&from=paste&id=u17a7b5ce&originHeight=201&originWidth=741&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u4c6da14f-c125-41d2-8b34-e646768ff7e&title=)<br />OSPF 会把网络分隔成多个区域，形成一级级联骨干区域 0 的结构。以**区域**为单位进行管理，能够将网络变化限制在区域内，缩短收敛时间。只有区域 0 网络叫做**单一区域 OSPF** ，由多个区域构成的网络叫做**多区域 OSPF** 。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714497112-521d2e8c-7f7c-4c17-9ed7-5fcacc750cce.webp#clientId=u4d450d01-d284-4&from=paste&id=u2f80592f&originHeight=586&originWidth=867&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u38b3fc94-890d-4514-9195-96c9617f6f6&title=)
<a name="DJtgL"></a>
#### 26、什么是 BGP ？
**BGP** 是 AS 直接进行路由选择的 EGP 。由于 BGP 需要获取大量的、可靠的网络信息，因此采用 TCP 协议的 179 端口进行数据传输。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714497142-0d432be0-2e79-4f4a-b80a-544aed8dccec.webp#clientId=u4d450d01-d284-4&from=paste&id=u799f3cbc&originHeight=241&originWidth=481&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ueb7177b5-ab79-485e-a297-97f1ddafa03&title=)<br />AS 之间通过 **AS 编号**区分，编号范围是 1 ~ 65535 。其中 64512 ~ 65535 是**私有 AS 编号**，和私有 IP 地址一样，可以在私有网络中使用。<br />BGP 的路由信息和 IGP 的路由信息不在一起管理，运行 BGP 的路由器会同时有 IGP 和 EGP _两张路由表_。
<a name="LFoD8"></a>
#### 27、什么是 IS-IS ？
**IS-IS** 也是用于大型网络的 IGP ，属于链路状态型的路由协议，也可以用在 AS 之间。<br />**IS-IS** 是经过 ISO 标准化的路由协议。**IS** 是指转发包的系统，也就是路由器。与 IS 对应的是 **ES** ，指无法进行路由选择的主机。
<a name="CPvrS"></a>
#### 28、什么是路由重分发？
当网络中运行多个路由协议时，各个路由协议的路由信息互相独立。但是在路由器上配置**路由重分发**，就可以在多个路由协议之间共享路由信息。比如：将通过 BGP 获取的外部 AS 路由信息加入到 OSPF 中，也能够将静态路由向其它路由协议分发路由信息。
<a name="HhsLJ"></a>
#### 29、什么是管理距离？
**管理距离**是用来表示路由信息的可信度，数值越小可信度越高。获取路由信息，通常有三种来源，一种是与路由器**直连**的网络，一种是配置的**静态**路由，还有一种是根据各种**动态**路由协议获取的路由。如果有多条相同的路由，会选择管理距离值最小的路由。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714497270-08e94abd-ebd7-4702-a10e-1d15ec74d28a.webp#clientId=u4d450d01-d284-4&from=paste&id=u155012bd&originHeight=401&originWidth=321&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u393fedbd-9bd2-4716-b8ad-8cb84540db8&title=)
<a name="Bkmsi"></a>
#### 30、什么是 IP 隧道？
通信协议被其它的通信协议封装后，进行转发的技术叫做**隧道技术**。在网络中的两台路由器配置隧道后，就可以在路由器之间建立一条**虚拟**的通信链路。<br />举个栗子：路由器 A 收到的原始数据包通过隧道协议封装后，转发到目的路由器 B 。路由器 B 进行解封装，还原原始数据包，并以原始数据包转发给实际的目的地。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714497647-beb63d32-f558-44c5-9578-ca08752eacb1.webp#clientId=u4d450d01-d284-4&from=paste&id=ub5baae9e&originHeight=273&originWidth=642&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u57414e4b-c79d-4709-84b0-4a8e70b6d4c&title=)
<a name="Adk0f"></a>
#### 31、什么是路由器冗余？
**路由器冗余**是即使有一部分路由器发生故障，也能够通过线路的切换来进行正常工作，达到网络不间断的效果。路由器通常用来接入互联网或者作为核心数据通信枢纽，一旦发生故障，会造成巨大的影响。但故障是无法完全杜绝的，这种情况下还要向用户提供不间断的业务，就需要将路由器冗余。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714497642-a5397ba4-7507-4cd5-8989-6bd70c3ae405.webp#clientId=u4d450d01-d284-4&from=paste&id=u18afe67d&originHeight=277&originWidth=81&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u0ff0b32c-10f8-4fb6-bc81-26a1e629ef1&title=)<br />**冷备份**：平时不使用的备份设备，当运行的设备发生故障时，使用备份设备进行替换。这种方式使用简单，但是需要一定的时间进行设备的替换和启动，这个过程会中断用户的网络。<br />**热备份**：主设备和备用设备同时运行，当主设备故障时，自动切换到备用设备。这种方式无需人工干预，系统自动切换，最快的切换速度在毫秒级。<br />**替换**：在冗余结构中，停止主设备运行，使用备用设备进行工作的过程叫做替换。<br />**回退**：替换后恢复到原来的运行状态，也就是运行的设备从备用设备切换到主设备的过程叫做回退。
<a name="YR5T7"></a>
#### 32、路由器冗余有哪些种类？
![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714498183-7ca1acfe-d573-43cb-9da7-941b076400ac.webp#clientId=u4d450d01-d284-4&from=paste&id=u2f0275b7&originHeight=371&originWidth=621&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u796f8adf-f12c-419a-b4f0-dd40098bc89&title=)<br />在使用**主备方式**时，会用到 **VRRP** 这种冗余协议，还有思科私有的 **HSRP** 冗余协议。<br />**双活方式**会使用到**负载均衡**技术，适用于两组主备结构，还可以运用到**等价多路径路由**或 **DNS 轮询**等技术。<br />由 1 台活跃设备和 1 台备用设备组成的冗余结构叫做 **1+1 冗余**结构，是最常见的热备方式，通常用于企业网的数据中心以及互联网网关中。<br />集群是由 N 台活跃设备和 1 台备用设备组成的 **N+1 冗余**结构。在运营商需要处理大流量转发的情况下，路由器大部分采用 N+1 集群的冗余模式。<br />由 N 台活跃设备和 N 台备用设备组成的冗余结构叫做 **2N 冗余**结构。
<a name="eDhyC"></a>
#### 33、什么是认证？
**认证**是指用户接入网络时，要求用户输入认证信息（用户名和密码）、验证认证信息是否正确、确认正确后允许用户接入网络的过程。认证信息不正确时，网络会拒绝用户的接入请求。常用的认证技术有 **RADIUS** 和 **TACACS+** 。
<a name="bOXDy"></a>
#### 34、什么是 QoS ？
**QoS** 提供保证通信质量的功能，主要分为带宽控制和优先级控制。使用优先级对流量进行分类的过程叫做**类别**，根据流量的每一个类别进行带宽控制或优先级控制的过程叫做 **CoS** 。
<a name="Me7IJ"></a>
#### 35、什么是用户界面？
路由器提供的方便管理路由器的**用户界面**（ UI ）。通过 UI 配置路由器、获取路由器信息、查看路由器的状态和流量统计信息等。<br />路由器的 UI 分为 **Web** 和 **CLI** 两类。<br />**Web** 通过 PC 的 Web 浏览器进行访问，可以提供可视化的配置和管理，又叫做 **GUI** 。路由器内置了 Web 服务器，通过 PC 的 **HTTP** 和 **HTTPS** 协议访问。<br />**CLI** 是通过终端软件访问路由器。PC 连接路由器有两种方式，一种是 PC 使用线缆直接连接路由器的管理接口，另一种是通过网络使用 **Telnet** 或 **SSH** 进行连接。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714497693-b1530e57-3ea8-4f61-aa7a-3a62914bf1d2.webp#clientId=u4d450d01-d284-4&from=paste&id=ufbdb6692&originHeight=241&originWidth=401&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u8e5de6e6-6f94-4e34-9076-2eec14348b3&title=)<br />路由器可以**限制访问** UI 的功能，让指定 IP 地址的终端才能连接。连接成功，还需要提供用户名和密码才能登录。路由器还可以指定账号的权限功能，包括 root 权限、读取权限、配置功能权限等。<br />从**网络安全**的角度来讲，能够访问路由器的 UI ，意味着可以查看和修改路由器的配置，禁止非管理人员的访问权限很重要。<br />为了防止信息等被窃听，建议使用 Web 中的 HTTPS 或 CLI 的 SSH 等支持**加密**的协议进行访问。
<a name="B14RT"></a>
#### 36、日志有什么作用？
如果路由器修改配置或发生异常，路由器的**日志**就会记录下来，并且根据事件的重要性进行**分类**。<br />路由器没有太多保存日志的空间，通常是将日志上传到 **Syslog 服务器**保存。
<a name="WTqA6"></a>
#### 37、告警有哪些类型？
路由器为了预防各种故障，配置了**告警**功能。常见的告警类型有：**温度告警**、**风扇告警**和**电源告警**等。
<a name="SF93V"></a>
#### 38、路由器有哪些常用命令？
![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714498192-04951e71-1f9e-4b92-b431-ce31049aa1c5.webp#clientId=u4d450d01-d284-4&from=paste&id=u1cd5e015&originHeight=281&originWidth=681&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ub4807d42-b908-43d6-b696-a7e2528213d&title=)
<a name="TNn8t"></a>
#### 39、什么是初始化？
新买的路由器在第一次配置前会保持出厂时的**初始状态**。<br />低端路由器或家用路由器的初始默认配置会包含一部分信息：用户名和密码、网络接口的私有 IP 地址、DHCP 服务功能等，只要使用 PC 直连就可以远程访问 UI ，完成后续配置。<br />大部分的企业路由器是**没有任何配置**的初始配置状态，需要配置网络接口的 IP 地址、子网掩码、默认网关、用户名和密码，保持以后就能够远程访问 Web 或 CLI 界面。<br />已经配置过且保存配置后，如果要重新进行配置，只需要输入**初始化命令**就可以让设备回到出厂时的默认配置状态。
<a name="mMxsn"></a>
#### 40、CLI 的模式有什么类型？
不同厂家设备的 CLI 都有不同的**模式**，有的模式只能只用特定命令用于管理，有的模式专门用于配置工作等。每个模式都需要密码认证，非指定用户无法看到显示信息或更改配置。<br />Cisco ISO 路由器使用的模式如下：<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1638714498335-68395616-c4b2-4a8e-a362-6c3b1e3d6af6.webp#clientId=u4d450d01-d284-4&from=paste&id=u657f3efb&originHeight=681&originWidth=581&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ud40000dc-6f0b-40bf-bab4-665ac2885b7&title=)
