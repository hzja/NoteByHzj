<a name="uljnJ"></a>
### 查询真实ip
1. 通过ip查看地址
2. 通过查看是否有WAF（是否使用云主机）
3. 反查该ip下绑定的其他域名
4. 使用国外主机进行解析
5. 查看历史域名解析记录
6. 查看公司RSS（Really Simple Syndication）邮件订阅，在邮件头中查看邮件服务器ip
7. 扫描旁站
8. fofa、shodan历史信息查看
9. 国内很多CDN厂商因为各种原因只做了国内的线路，而针对国外的线路可能几乎没有，因此我们使用国外的主机直接访问就可能获取到目标站点的真实ip。
10. https://dnsdb.io/zh-cn/
11. 可以查看域名解析记录，因为大多数站点天生就是自带CDN的，CDN后期加的，可以通过查看以前的解析记录获取真实的IP
12. 因为主站访问量大通常会做CDN加速，而分站的访问量小有时候就没有做CDN加速，可以获取分站的ip然后推测主站的ip，他们通常在一个网段下嘛。
13. 可以通过多地ping查看得到的ip是不是相同的
14. 可以通过nslookup工具解析域名ip，查看得到的ip是否是同一个
15. 如果得到的ip是不一样的那么就会确定目标站点存在CDN
16. [https://www.17ce.com](https://www.17ce.com)
17. [http://ping.chinaz.com/](http://ping.chinaz.com/)
18. 目前为了提高站点的访问速度以及降低主站服务器的压力大多数站点都会使用CDN（Content Delivery Network）内容分发系统
19. 内容分发系统可以简单理解为分布在不同区域的镜像站点（克隆站点）、或者缓存服务器，在你访问目标站点的时候针对哪些访问流量高的信息存放在各个缓存服务器上，以便于更好更快的为客户提供服务。
20. 采用CDN就导致我们不能直接获取到主站的真实ip
21. 如何查看站点是否使用了CDN技术了
22. 确定目标站点存在CDN如何绕过CDN获取真实IP呢？
23. 通过查到的真实ip可以进行：
<a name="Dv0aq"></a>
### 子域名收集（对学校、大型公司、大型政府门户网站、大型团体机构收集子域）

1. 子域名挖掘机Layer（该工具先通过域名解析解析子域名，解析不到就加载字典进行暴力枚举)
2. subDomainBrute(python2 环境）,该工具的字典较少没有子域名挖掘机挖掘的子域多。
3. OneForAll，该工具会生成一个表格文件，可视化做的不错。
4. 在线子域名收集网站
5. [https://hackertarget.com/find-dns-host-records/](https://hackertarget.com/find-dns-host-records/)
6. [https://dnsdumpster.com/](https://dnsdumpster.com/)
7. [https://phpinfo.me/domain](https://phpinfo.me/domain)
8. 这个时候就应该查看子域对应的容器，根据容器去选择需要测试的站点。
9. 因为高手一般会根据特定容器的特定版本找到相应的突破口。
10. 要关注常见容器暴露出来的漏洞。
11. 网站常见的容器：IIS、Apache、Tomcat、nginx、weblogic（端口7001/7002）、jobss、WebSphere、jetty、Glasshfish。
12. apache(32)===========>集成环境（phpstudy、upupw、宝塔等）
13. 主站的访问量比较大，安全性一般都比较高，难搞。。。
14. 而子站只针对公司内部特定的部门或者特定的群体，一般访问量少，安全性薄弱，一般容易突破。
15. 为什么要收集子域名：
16. 收集的子域名比较多的话应该优先测试哪个子域呢？
17. 常用的子域名收集工具
<a name="YRYXW"></a>
### whois查询

1. 注册人反查工具：
2. 爱站：[https://www.aizhan.com/](https://www.aizhan.com/)
3. 站长工具：[https://tool.chinaz.com/](https://tool.chinaz.com/)
4. 微步在线：[https://x.threatbook.cn/](https://x.threatbook.cn/)
5. ip138：[https://www.ip138.com/](https://www.ip138.com/)
6. 查询域名注册人员信息（没有做隐私保护前提下可以查询）
7. whois查询就是通过某种数据库查询域名的注册信息即注册人姓名、邮箱、地址（公司或者个人）、电话、域名之策时间等信息。
8. 通过查询到的信息可以进一步利用，例如社工库查密码、社工（社工域名的运营商即欺骗客服获取一些域名注册者的信息）、注册人反查（姓名、邮箱反查考）、构造爆破字典，测试弱口令等等。
<a name="UEXHq"></a>
### 备案信息查询

1. [https://www.beian88.com/](https://www.beian88.com/)
2. [http://beian.miit.gov.cn/publish/query/indexFirst.action](http://beian.miit.gov.cn/publish/query/indexFirst.action)
3. [https://www.tianyancha.com/](https://www.tianyancha.com/)
4. [http://www.beianbeian.com/](http://www.beianbeian.com/)
<a name="bW8hb"></a>
### 服务信息收集

1. nmap、portscan、masscan、zmap端口扫描，端口对应服务
2. 收集到端口信息后要对端口进行分析测试，端口对应的服务、是不是旁站等等。
3. 扫描完成后可以使用telnet连接一下扫描出来的端口，看看扫描结果的准确度怎么样
4. 如果不想大动干戈进行扫描的话可以对目标主机的端口进行telnet连接
5. 通过目标站点的服务版本找有没有暴露出来的漏洞进行利用
<a name="ASga1"></a>
### 服务器类型

1. 收集服务器平台、版本号
<a name="Yj4CW"></a>
### 网站容器以及版本号

1. IIS、Apache、Tomcat、nginx、jboss、jetty、weblogic、WebSphere、Glasshfsh
2. 谷歌插件：Wappalyzer
<a name="XAFbp"></a>
### 脚本类型

1. ASP、PHP、JSP、aspx等等
2. 谷歌插件：Wappalyzer
<a name="ps4Z0"></a>
### 数据库类型

1. access、sqlserver、mysql、oracle、postgresql等等
2. 谷歌插件：Wappalyzer
<a name="Gw0wG"></a>
### CMS（内容管理系统）类型

1. 利用思路：百度收集CMS版本的漏洞、默认的登录后台、默认登录密码。
<a name="wMnw0"></a>
### CMS识别工具

1. [https://www.yunsee.cn/](https://www.yunsee.cn/)
2. [http://whatweb.bugscaner.com/look/](http://whatweb.bugscaner.com/look/)
3. 御剑web指纹识别
4. [https://github.com/Ms0x0/Dayu](https://github.com/Ms0x0/Dayu)
<a name="WomDG"></a>
### WAF探测
<a name="Ry9hx"></a>
### 旁站

1. ip
2. 域名
3. 端口 portscan
4. 子目录  目录扫描工具、[http://www.5kik.com/c/](http://www.5kik.com/c/)
5. 可以通过域名反查ip，ip反查绑定域名然后获取目标服务器上建设的其他站点。
6. 搭建旁站的几种姿势
<a name="xb5pL"></a>
### C段
<a name="OHrNz"></a>
### 敏感目录

1. 字典爆破
2. 御剑、dirbuster、wwwscan、IIS_shortname_Scanner等等工具。
3. 蜘蛛爬行
4. 爬行菜刀、webrobot、burp等等工具。
5. 扫描的网站链接有可能会存在越权、帮助信息中可能包含敏感信息。
6. robots.txt文件（反机器人爬行网站，指明哪些网站目录不能被百度、谷歌等搜索引擎爬行）。通过查到的文件可能是敏感目录、后台目录等等信息。
7. 后台目录：弱口令、万能密码、爆破
8. 安装包：数据库信息、源码
9. 上传目录：截断、文件上传、文件包含
10. mysql管理接口：弱口令、爆破、万能密码、getshelll
11. 安装页面：二次安装绕过
12. phpinfo：暴露网站配置信息
13. 编辑器：
14. iis短文件：
15. 收集方向
16. 常用工具
