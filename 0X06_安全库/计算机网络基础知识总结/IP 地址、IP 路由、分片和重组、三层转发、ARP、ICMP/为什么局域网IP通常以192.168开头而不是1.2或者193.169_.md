网络 <br />**局域网 IP 通常以 192.168 开头，这事得怪路由器的生产厂商。**<br />配置路由器的人往往会使用路由器默认的 IP 地址作为网关，换成其他的 IP 地址既费脑子又费事。还别不相信，经常做网络维护的人设置 IP 地址，“192.168” 输入得贼溜。但这还不是根本原因。<br />![](https://cdn.nlark.com/yuque/0/2022/png/396745/1665820975905-75f7cf91-f2ad-4032-a735-7170636a9bb5.png#clientId=ubf68c1a7-fd4c-4&from=paste&id=ub19e9285&originHeight=451&originWidth=747&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u2e9fa858-5c1a-40cd-8c95-ff1edb04915&title=)<br />早期的宽带接入方式普遍采用的是同轴电缆，最早的 NAT 网关设备 (网关好比家里入户的大门，IP 地址就是门牌号) 默认 IP 地址就是 192.168.0.1，所以到了用户这里网关就只能使用 192.168.1.1。<br />![](https://cdn.nlark.com/yuque/0/2022/png/396745/1665820975942-9e6af10b-4023-4ce8-b849-0b3ad664ea16.png#clientId=ubf68c1a7-fd4c-4&from=paste&id=uaee1d495&originHeight=373&originWidth=620&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u83ef39d4-c748-4f5f-bf35-a4899b5f96a&title=)<br />路由器的制造商们为了便于维护和售后服务，就默认的在路由器内设置了 192.168.1.1，从而避开了 192.168.0.X 这个网段。设置 IP 地址从 1 开头也仅仅是为了避免造成 IP 地址的浪费。<br />![](https://cdn.nlark.com/yuque/0/2022/png/396745/1665820975896-05c75a90-265e-497d-a6b7-edf9d9003e0d.png#clientId=ubf68c1a7-fd4c-4&from=paste&id=uf000f500&originHeight=445&originWidth=700&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=uefcce950-fd31-4886-9292-3ebd5dc750a&title=)<br />局域网 IP 地址通常以 192.168 开头还真的只是习惯，192.168 并不是设置局域网 IP 地址的唯一选择。很多企业都选择 10. 或者 172.16 开头规划局域网。<br />![](https://cdn.nlark.com/yuque/0/2022/png/396745/1665820975891-c6a87ba3-a90f-4006-b5b4-245cf8426a8c.png#clientId=ubf68c1a7-fd4c-4&from=paste&id=u56073772&originHeight=221&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=ud6ddba09-cec9-4d7c-a79e-3f19d03caa5&title=)
<a name="WG6OK"></a>
## IP 地址的组成
对于电脑和网络设备而言 IP 地址和其他数据一样都是 0、1 这样的二进制组成，IP 地址由 32 位二进制组成，转换 4 段十进制数仅仅只是为了便于人分辨和使用。<br />![](https://cdn.nlark.com/yuque/0/2022/png/396745/1665820975952-cff6fa27-db1a-4a87-bda9-f26adc9b037c.png#clientId=ubf68c1a7-fd4c-4&from=paste&id=u7bddca96&originHeight=318&originWidth=946&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u14cb2000-99be-4862-b922-1648dadef4f&title=)<br />比如二级制的 1111 1111 转为十进制就是 255。<br />![](https://cdn.nlark.com/yuque/0/2022/png/396745/1665820976194-f635580b-bb67-48a5-a8cd-8178b133793a.png#clientId=ubf68c1a7-fd4c-4&from=paste&id=u13f4965f&originHeight=480&originWidth=950&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u810b324d-d404-4349-8394-b9114b8d864&title=)<br />IPV4 的 IP 地址在 1993 年时采用了 “分级式定址”，将 IP 地址分为 A、B、C、D、E 五个类别，每个类别的地址都是由它们的前 3 位来标识。A 类一般用于政府、B 类一般用于公司、C 类一般用于共用、D 类一般用于主播、E 类一般用于实验。<br />![](https://cdn.nlark.com/yuque/0/2022/png/396745/1665820976319-ae75b839-f771-49f5-9eac-2c25c2b528e6.png#clientId=ubf68c1a7-fd4c-4&from=paste&id=u6d4df7be&originHeight=358&originWidth=1080&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u20810dcd-ab53-4fa9-a1f1-c7212b5bc89&title=)<br />其实在 IP 地址分类之前，没有子网掩码一说，32 位的 IP 地址是由 8 位的网络地址（指定主机连接到哪个网络）和 “剩下的” 主机位（指定了主机在该网络内的地址）。这样分配 IP 地址在局域网出现之前是可行的，因为那时只有很少大一些的网络（ARPANET）。但局域网出现的早期，就已经显现出不够用了，所以才进行了分类，引入了掩码一说。<br />![](https://cdn.nlark.com/yuque/0/2022/png/396745/1665820976285-93c7f2b9-0e49-4fc7-b983-550fb4b8b553.png#clientId=ubf68c1a7-fd4c-4&from=paste&id=u189c1fa7&originHeight=257&originWidth=526&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u7b6538b8-af57-4b1e-a233-9444aff3deb&title=)<br />如今一个完整的 IP 地址离不开掩码，IP 地址与子网掩码进行按位与运算得到子网地址。每个 IP 地址都被分为两个部分，即网络地址和主机地址。这样做的目的是为了在路由器转发数据包时更方便的寻址。<br />![](https://cdn.nlark.com/yuque/0/2022/png/396745/1665820976408-20506792-7b65-4797-adcc-4159bac61971.png#clientId=ubf68c1a7-fd4c-4&from=paste&id=ucfa39846&originHeight=353&originWidth=831&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=uc1a939d0-8620-47a7-b57e-f764c8a9354&title=)<br />举个例子：<br />信件、包裹往往是同一个省的放在一起，然后同省中同一个市的再放在一起进行寄送。最终送件的派件员只需要查看街道和门牌号码。路由器先看数据包的中目的 IP 的网络地址，把这个数据包送到某个网络时后再根据该数据包中目的 IP 的主机部分从该网络中找到目的主机。所以可以认为网络地址 = 网络号，主机地址 = 主机号。这才是 IP 地址 “分级定址” 的真正意义所在。
<a name="MbgMh"></a>
### 为什么出现了 10.X.X.X、176.16.X.X 和 192.168.X.X 这样的局域网 IP 地址？
那是因为早在 1990 年代中期 IPV4 地址就已经面临了短缺的问题。于是乎就有人开动了大脑：IP 地址确实不能重复，重复了就意味着数据会送错。但可以确定一个私域的 IP 地址供大家免费在局域网内使用，这些私域 IP 地址可以在不同的局域网重复使用，只要确保在同一个局域网不出现 IP 地址重复就可以了。NAT 技术（网络地址转换）就在这样的场景下诞生了。<br />![](https://cdn.nlark.com/yuque/0/2022/png/396745/1665820976358-024392bb-8ca3-4518-8f8b-9262a50cef43.png#clientId=ubf68c1a7-fd4c-4&from=paste&id=u3c7d4906&originHeight=520&originWidth=800&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=u40637d75-5e35-4bec-b709-7619aefec06&title=)<br />这就好比程控电话，先拨打对外能正常接通的电话号码，再由程控交换机转接分机号。NAT 技术就像程控交换机的作用。这样很大程度上缓解了 IP 地址枯竭的问题。<br />![](https://cdn.nlark.com/yuque/0/2022/png/396745/1665820976438-dd508a0f-76c7-42ce-8ce8-03dd2db6fd01.png#clientId=ubf68c1a7-fd4c-4&from=paste&id=u797be88c&originHeight=524&originWidth=742&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=ubd51988f-f7ad-4d23-b2f4-59e5a1cbcbb&title=)<br />所以五类 IP 地址中 A、B、C 类地址划分了一部分作为私有 IP 地址，供大家免费使用。<br />家用路由默认出厂基本都是 192 开头的，因为子网内需要的 IP 地址数并不要求很多；而 10 和 17.16 开头的一般用于企业，因为可分配的 IP 地址数多。除此之外还有一些特殊的 IP 地址，比如：0.0.0.0 只能做源地址；255.255.255.255 是广播地址；127.x.x.x 为环回地址供本机使用。<br />![](https://cdn.nlark.com/yuque/0/2022/png/396745/1665820976603-f72b6b3b-0fbb-4933-97b2-4110a026790b.png#clientId=ubf68c1a7-fd4c-4&from=paste&id=u0880fcba&originHeight=368&originWidth=655&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&taskId=uee90b20d-cc4a-4e32-b785-28c1c0974e6&title=)
<a name="KNpmE"></a>
## 总结
与其说现在局域网 IP 通常以 192.168 开头而不是 1.2 或者 193.169 开头，是因为网络技术演变的结果。<br />所以这是人们的习惯使然，这就好比现在走路或者驾车是靠右行驶，如果有一天规定必须靠左行驶，那么肯定每个城市会乱套。而交通法规也是建立在原有的公信基础之上，才能成为行之有效的法规，IP 地址的规划也是一样的。
