测某个银行app的时候请求包响应包加密完全无法下手<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/1345801/1668753083849-ee0f7965-febd-4e2f-a2b7-13ba7a8f6e9a.png#clientId=u2d1e63e6-c67f-4&from=paste&height=566&id=ub8fa05a9&originHeight=707&originWidth=1901&originalType=binary&ratio=1&rotation=0&showTitle=false&size=117409&status=done&style=none&taskId=u47424c93-0b4a-4a1e-8eed-1ca5dded867&title=&width=1520.8)

我之前自己写的博客，IOS砸壳的笔记<br />[https://blog.csdn.net/weixin_41598660/article/details/112703621](https://blog.csdn.net/weixin_41598660/article/details/112703621)

砸壳成功后拿到的ipa，解压缩，然后找到对应的二进制文件，譬如aufengabc.app  → aufengabc  ，然后把aufengabc拖进去ida进行分析<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/1345801/1668696371859-5067a964-a702-4216-b707-e797ae6ae420.png#clientId=u813b6692-4d01-4&from=paste&height=398&id=u03f743fd&originHeight=498&originWidth=1071&originalType=binary&ratio=1&rotation=0&showTitle=false&size=101801&status=done&style=none&taskId=u166bcfb9-1e08-49ba-ac6f-38477a2fb79&title=&width=856.8)

一路默认导入就行，然后等左下角这个东西缓存完了，再进行搜索，不然会很卡。<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/1345801/1668696490801-ff6763a3-fa2b-44b8-b177-766e5918a597.png#clientId=u813b6692-4d01-4&from=paste&height=737&id=ue6702eeb&originHeight=921&originWidth=1299&originalType=binary&ratio=1&rotation=0&showTitle=false&size=548895&status=done&style=none&taskId=u624f23ce-1d54-40eb-a142-ad80a13c181&title=&width=1039.2)

可以通过这个Search中的text搜索<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/1345801/1668745137884-1f8bd330-361f-4ebc-8173-77da2bf4108a.png#clientId=u474c80cd-ba7c-4&from=paste&height=586&id=u6c7e5e04&originHeight=733&originWidth=841&originalType=binary&ratio=1&rotation=0&showTitle=false&size=101313&status=done&style=none&taskId=uc3aaec7e-7ee3-49e6-8ca0-51439288556&title=&width=672.8)

也可以通过functions名下进行encrypt、decrypt方法名搜索<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/1345801/1668745150778-2f8b0a4b-a602-4cde-8388-b0266102ff82.png#clientId=u474c80cd-ba7c-4&from=paste&height=557&id=u06471eb5&originHeight=696&originWidth=744&originalType=binary&ratio=1&rotation=0&showTitle=false&size=84660&status=done&style=none&taskId=uda4e0ec8-5137-44fa-b646-7d4d32bc064&title=&width=595.2)

点击后f5自动反编译源码，拿到加密的key后进行解密<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/1345801/1668696652587-5d3cf1c7-d5a7-4801-b791-0c3ca7c8e461.png#clientId=u813b6692-4d01-4&from=paste&height=522&id=u0464add4&originHeight=652&originWidth=1516&originalType=binary&ratio=1&rotation=0&showTitle=false&size=155084&status=done&style=none&taskId=u84d1f010-1e8e-4983-bf8e-93ae31dc464&title=&width=1212.8)<br />最后根据相应的aes算法的key逆向解出来明文<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/1345801/1668696692623-576039d5-ab21-40bb-a6cf-85206d2ff070.png#clientId=u813b6692-4d01-4&from=paste&height=652&id=u8e8c2f33&originHeight=815&originWidth=1407&originalType=binary&ratio=1&rotation=0&showTitle=false&size=204229&status=done&style=none&taskId=u8c59892e-c1d6-4d6f-bd44-5e36eb3d5b9&title=&width=1125.6)

tips：<br />ida搜索string的时候要从IDA View-A面板进行搜索才能全局搜索<br />比如全局搜索  / 就能获取到很多请求的路径，可能从中能获取到未授权的接口<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/1345801/1668752784737-c361d11c-be7f-4804-94ba-af5682109847.png#clientId=u2d1e63e6-c67f-4&from=paste&height=650&id=u9e531eca&originHeight=812&originWidth=1772&originalType=binary&ratio=1&rotation=0&showTitle=false&size=193983&status=done&style=none&taskId=u64e98163-c746-434a-9c17-8439bd3e23b&title=&width=1417.6)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/1345801/1668753400987-4fa916f2-a643-40f1-b539-5065abf7ec18.png#clientId=u2d1e63e6-c67f-4&from=paste&height=470&id=u95619dd3&originHeight=588&originWidth=1260&originalType=binary&ratio=1&rotation=0&showTitle=false&size=97072&status=done&style=none&taskId=uabe0668b-dede-45e0-b876-864461fc482&title=&width=1008)
