<a name="jqh0G"></a>
## 交换机与路由器
![image.png](https://cdn.nlark.com/yuque/0/2022/png/1345801/1661313099409-a872ccb8-7352-4e4e-b4a6-e0de24158328.png#clientId=uac13321e-47ec-4&from=paste&height=491&id=ubc48d0da&originHeight=614&originWidth=936&originalType=binary&ratio=1&rotation=0&showTitle=false&size=285217&status=done&style=none&taskId=uac14566e-f16c-4b05-abc7-318c3685229&title=&width=748.8)<br />路由器主要是用来联通互联网，可以把一个IP分配，给很多个主机运用，这些主机对外只表现出一个IP，交换机可以把很多主机连起来，这些主机对外各有各的IP，以mac作为地址寻址。  

192.168.1.200到100.100.100.100 ，需要路由器上配置100.100.100.1的网关(路由器一般都当作网关）<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/1345801/1661319559731-3bcd2ce3-d25f-4ef7-8386-e76ab46841d3.png#clientId=uac13321e-47ec-4&from=paste&height=404&id=u31635ea8&originHeight=505&originWidth=671&originalType=binary&ratio=1&rotation=0&showTitle=false&size=134691&status=done&style=none&taskId=ueb66d536-95c4-4ea1-8ed5-4d32fb1c808&title=&width=536.8)<br />通过查看路由表去判断是哪个接口通100段<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/1345801/1661320119987-5ded4fee-3bab-4cd1-9101-cd565dac10be.png#clientId=uac13321e-47ec-4&from=paste&height=552&id=u4c1b883e&originHeight=690&originWidth=1168&originalType=binary&ratio=1&rotation=0&showTitle=false&size=522871&status=done&style=none&taskId=u1f436021-cae5-4fe6-81cb-26fcb028cd1&title=&width=934.4)

<a name="q60H0"></a>
## 三层交换机
![image.png](https://cdn.nlark.com/yuque/0/2022/png/1345801/1661321911430-ac9a30c3-79c6-4cbb-9937-fbbf087c6d84.png#clientId=uac13321e-47ec-4&from=paste&height=416&id=ubf79db18&originHeight=520&originWidth=750&originalType=binary&ratio=1&rotation=0&showTitle=false&size=265805&status=done&style=none&taskId=u2ad506be-39a1-4bcf-aa67-2e5396797b6&title=&width=600)
<a name="LGjs0"></a>
## 子网掩码
由子网掩码来划分网段<br />192.168.*.* → 255.255.0.0<br />192.168.1.* →255.255.255.0<br /> 如果网络号相同就表示二台电脑在同一网段，可以直接通讯，不需要路由器帮忙  ![image.png](https://cdn.nlark.com/yuque/0/2022/png/1345801/1661314783536-b9d2ee58-911d-44d0-bfbc-2c19a3258675.png#clientId=uac13321e-47ec-4&from=paste&height=563&id=u2607a682&originHeight=704&originWidth=906&originalType=binary&ratio=1&rotation=0&showTitle=false&size=97449&status=done&style=none&taskId=uf4ac0916-9ac1-4569-ba97-2a0a9f8c80e&title=&width=724.8)<br />计算 ip的代码
```html
package main
import(
	"log"
	"iprange-master"
)

func main(){

	ip :="10.1.45.1/19"
	if ip !=""{
		list, err := iprange.ParseList(ip)
		if err != nil {
			log.Printf("error: %s", err)
		}
		log.Printf("%+v", list)
		rng := list.Expand()
		log.Printf("%+v",rng)
	}
}
```

<a name="ArPoJ"></a>
## vlan虚拟局域网进行隔离
vlan10和vlan20进行隔离，这样子pc1感染了木马病毒也不会传染到pc2<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/1345801/1661320676524-352a5aac-2483-46a9-aad2-11daab7d4b4b.png#clientId=uac13321e-47ec-4&from=paste&height=320&id=uf028a3e1&originHeight=400&originWidth=670&originalType=binary&ratio=1&rotation=0&showTitle=false&size=49368&status=done&style=none&taskId=u9d7d2805-2d14-478b-a42a-4c6e3cb1841&title=&width=536)

<a name="iu3X8"></a>
## trunk
不同交换机之间划分同vlan，比如下图的pc1和pc3是同vlan10 可以相通，通过trunk在交换机上配置标识来识别<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/1345801/1661321247350-b5d1d12a-d2c0-4e3a-9a28-9e7ba612f596.png#clientId=uac13321e-47ec-4&from=paste&height=350&id=u42d8a44d&originHeight=437&originWidth=1260&originalType=binary&ratio=1&rotation=0&showTitle=false&size=120964&status=done&style=none&taskId=u5c6bdb43-7391-4c85-9e86-cb220b5b225&title=&width=1008)

<a name="ABA4P"></a>
## ACL
在交换机上配置acl访问控制策略，使vlan 20可以访问vlan30但是不能访问vlan 10<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/1345801/1661322974443-90f83e92-9aa0-467d-9e24-1c79a0890d93.png#clientId=uac13321e-47ec-4&from=paste&height=382&id=u2f307042&originHeight=477&originWidth=575&originalType=binary&ratio=1&rotation=0&showTitle=false&size=96460&status=done&style=none&taskId=uf3cc211b-8f4e-48cd-8c71-dac98161ccf&title=&width=460)

<a name="GxhQb"></a>
## NAT(内网web和互联网web的转换
通过路由器私网地址转换为公网地址<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/1345801/1661323728159-f150266f-a3d0-4fd2-b496-b7bcb7da4541.png#clientId=uac13321e-47ec-4&from=paste&height=234&id=ue33694d1&originHeight=293&originWidth=718&originalType=binary&ratio=1&rotation=0&showTitle=false&size=74742&status=done&style=none&taskId=u2a9edc76-c2ae-4b11-9f90-93b6a2d4e7d&title=&width=574.4)<br />静态nat，比如箭头所示的是内网的web应用，通过配置静态nat，路由器转换公网后，互联网用户PC6访问公网web就是相当于访问内网的这个静态nat的web<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/1345801/1661324441982-d6a56cf3-4900-4792-9d8f-3e7609de8dfb.png#clientId=uac13321e-47ec-4&from=paste&height=486&id=u2bbae8df&originHeight=608&originWidth=1020&originalType=binary&ratio=1&rotation=0&showTitle=false&size=130183&status=done&style=none&taskId=uab1d2e67-07b4-49ca-94f0-d18e4f89336&title=&width=816)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/1345801/1661324537985-faa0da2c-6844-45be-b171-db69ffbd0aac.png#clientId=uac13321e-47ec-4&from=paste&height=129&id=u2c936422&originHeight=161&originWidth=925&originalType=binary&ratio=1&rotation=0&showTitle=false&size=54747&status=done&style=none&taskId=uda0b0faf-13dd-4989-997c-b4955b7bad1&title=&width=740)<br />[https://www.bilibili.com/video/BV1Lr4y1B7LP?p=17&spm_id_from=pageDriver&vd_source=d6ca406befa13042df520f83540ef25a](https://www.bilibili.com/video/BV1Lr4y1B7LP?p=17&spm_id_from=pageDriver&vd_source=d6ca406befa13042df520f83540ef25a)
