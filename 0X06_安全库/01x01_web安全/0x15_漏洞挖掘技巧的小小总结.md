<a name="8wlTe"></a>
# 漏洞挖掘技巧的小小总结
![](https://cdn.nlark.com/yuque/0/2020/png/1345801/1588601183022-70437f3f-b413-4c61-b07e-c988e1f13b87.png#align=left&display=inline&height=342&originHeight=582&originWidth=1269&status=done&style=none&width=746)
<a name="OUfH6"></a>
# 案例：
<a name="mxEN2"></a>
# Cors
注册完个人账号后来到个人信息中心<br />抓包后看Origin：<br />然后修改<br />案例一：<br />![](https://cdn.nlark.com/yuque/0/2020/png/1345801/1588601183166-b9e61252-aee9-4f39-bf29-8eca228dd8bf.png#align=left&display=inline&height=417&originHeight=474&originWidth=848&status=done&style=none&width=746)<br /> <br />案例二：<br />![](https://cdn.nlark.com/yuque/0/2020/png/1345801/1588601183406-4420f75b-9ca6-4320-8e15-699124e259d9.png#align=left&display=inline&height=273&originHeight=459&originWidth=1253&status=done&style=none&width=746)<br /> 
<a name="yxO2x"></a>
# CSRF绑定邮箱任意重置密码
首先注册个账号，进入个人中心，来到绑定邮箱的地方，输入自己的邮箱然后获取验证码，输入验证码之后抓包<br />接着生成CSRF的Poc，然后复制一下这个poc的地址<br />![](https://cdn.nlark.com/yuque/0/2020/png/1345801/1588601183572-f1d78e2e-0efe-4c37-bbd4-f39d72630fd6.png#align=left&display=inline&height=302&originHeight=319&originWidth=786&status=done&style=none&width=746)<br />这里一定一定要把包**丢掉**，如果不丢掉就无法验证该漏洞了，审核表哥注意一下，千万不要放包<br />![](https://cdn.nlark.com/yuque/0/2020/png/1345801/1588601183711-4e2d70eb-780c-44bf-bb6d-98c4677e4d52.png#align=left&display=inline&height=316&originHeight=377&originWidth=891&status=done&style=none&width=746)<br /> <br /> <br />![](https://cdn.nlark.com/yuque/0/2020/png/1345801/1588601183832-ccbf4114-482c-49a5-aff5-3bc40e7db30a.png#align=left&display=inline&height=351&originHeight=352&originWidth=748&status=done&style=none&width=746)<br /> <br />然后利用绑定的邮箱重置密码<br />![](https://cdn.nlark.com/yuque/0/2020/png/1345801/1588601183975-e7c752f4-d3e3-432a-b969-1b5d4e7b8c5f.png#align=left&display=inline&height=297&originHeight=452&originWidth=1139&status=done&style=none&width=746)<br />输入图形验证码，然后发送邮箱验证码，然后收到验证码之后，直接重置用户密码<br />![](https://cdn.nlark.com/yuque/0/2020/png/1345801/1588601184109-2c68aa03-ad45-4b25-942b-b50395df4f08.png#align=left&display=inline&height=456&originHeight=456&originWidth=440&status=done&style=none&width=440)<br />攻击者的思路：<br />1.首先恶意构造CSRF链接<br />2.诱导用户点击<br />3.用户点击之后，用户的账号被绑定攻击者的邮箱<br />4.攻击者根据自己的邮箱重置受害者的用户密码<br />劫持用户的权限<br /> 
<a name="6Okv5"></a>
# 任意账号注册
先打开漏洞URL，然后，输入要注册的账号，输入图形验证码，点一下获取验证码，等待一分钟，<br />抓包，再点击获取验证码，然后把里面的邮箱修改成自己的<br />![](https://cdn.nlark.com/yuque/0/2020/png/1345801/1588601184252-20ea0b93-c5e8-4098-a5fb-a9df5ec387ec.png#align=left&display=inline&height=284&originHeight=389&originWidth=1019&status=done&style=none&width=746)<br /> <br />然后，攻击者的邮箱就接收到了验证码，可以看的出验证码是一样的，然后直接注册就好了<br /> 
<a name="qg0qu"></a>
# BMP魔改图片攻击
![](https://cdn.nlark.com/yuque/0/2020/png/1345801/1588601184421-5341cf86-fd02-4c16-8b39-e8fc14858c29.png#align=left&display=inline&height=282&originHeight=386&originWidth=1023&status=done&style=none&width=746)<br />把img标签换成script，最后再闭合一下<br />![](https://cdn.nlark.com/yuque/0/2020/png/1345801/1588601184554-b7b5bb4a-6d25-497b-80b8-c25588b50274.png#align=left&display=inline&height=165&originHeight=216&originWidth=972&status=done&style=none&width=746)<br /> <br />然后上传，会弹出一个页面，点击预览按钮，触发XSS<br />![](https://cdn.nlark.com/yuque/0/2020/png/1345801/1588601184729-c1691cfb-66bd-4a61-ab45-4217eb5cb6b8.png#align=left&display=inline&height=322&originHeight=412&originWidth=955&status=done&style=none&width=746)<br /> 
<a name="13I1L"></a>
# Sql搜索注入
 <br />%' and '%1%'='%1<br />![](https://cdn.nlark.com/yuque/0/2020/png/1345801/1588601184910-6de75663-01ef-4929-8f5f-72f4d3510515.png#align=left&display=inline&height=545&originHeight=671&originWidth=920&status=done&style=none&width=746)<br />%' and '%1%'='%2<br />![](https://cdn.nlark.com/yuque/0/2020/png/1345801/1588601185037-5a30dac0-7605-4ce4-b57c-c2d6b43e1093.png#align=left&display=inline&height=458&originHeight=551&originWidth=895&status=done&style=none&width=746)<br /> 
<a name="uWZnb"></a>
# 日站心得:
上传处尝试xss（可能有存储）<br /> <br />判断注入处sleep，可能会有时间盲注<br /> <br />那就是查看源代码然后在源代码中搜索 (Ctrl+F) 常见的泄露点关键词”phone”,”email”,”ip”等等。当然不同情况还是需要不同对待的：<br />对于第一种泄露形式的检测相对容易但是可能利用可能相对吃力，在碰到企业后台或者是类似服务时，查看页面也引入的js文件，在文件中查找”.html”,”.do”,”.action”等关键词会帮助快速发觉此类问题，不过对于相对复杂的情况还是需要沉下心将每一个js耐心的看过去。<br /> <br />可以尝试抓包添加插入X-Forwarded-For:127.0.0.1 头进行sql注入<br /> <br />如果有注入，但是找不到网站路径的话，可以@@basedir来看看安装mysql的路径来判断下是否同一个路径。<br /> <br />逻辑漏洞:<br />确认订单的时候抓包看看有没有可修改的id，然后把包放掉，看页面可能存在一些信息泄露或者越权的问题<br /> <br /> <br />短信：<br />1.抓包后修改手机号重定向发送。<br />2.抓包后狂点发送，或者进行一些空格，逗号，\n符号之类进行绕过<br /> <br />密码重置：<br />来到密码重置页面，输入手机号，验证码，下一步，抓包，查看返回值，发现包中有验证码，直接能进行密码重置<br /> <br />越权类：<br />注意一些url中的id，包括不限于后台url中admin、user之类。<br />例如csdn的url  [https://blog.csdn.net/weixin_41598660，修改一下id说不定就能跳转到隔壁博客](https://blog.csdn.net/weixin_41598660，修改一下id说不定就能跳转到隔壁博客)了。<br />例如：注册两个账号，在某功能处，例如商店个人信息处，A账号抓包后修改成B账号的ID，把包放掉，看响应是否会有B账号的信息<br /> <br />敏感信息泄露：<br />Github语法搜索站点，是否会存在源码泄露，有的网站的github源码甚至会泄露出管理员的账号密码<br /> <br />在一些后台处，尝试弱口令无法登录的情况下，查看页面源码的js文件，或许会存在管理员账号密码的泄露<br /> <br />通过御剑一些其他的工具直接扫url，可能会有一些备份文件下载。<br /> 
