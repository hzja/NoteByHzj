网络性能<br />衡量网络性能的四大指标：**带宽、时延、抖动、丢包**。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1637550427811-a262279d-7638-42d4-94c6-d1363cfcd29c.webp#clientId=ub4e61554-d508-4&from=paste&id=u3ca82fbf&originHeight=346&originWidth=478&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ub049d094-0995-4313-8d86-f106470f07e&title=)<br />如果客户需要我们去**评估一个网络的性能**，就可以从这四方面去进行评估。
<a name="AdUKz"></a>
### 带宽
<a name="bdHNj"></a>
#### 1、带宽概念：
带宽在百度百科中定义：在单位时间内从网络中的某一点到另一点所能通过的**“最高数据率”**。<br />计算机网络的带宽是指网络可通过的最高数据率，即**每秒多少比特**（常用的单位是bps(bit per second)）。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1637550428003-fac8341b-098a-4f60-8fff-2925283a4a0a.webp#clientId=ub4e61554-d508-4&from=paste&id=u61089f5f&originHeight=84&originWidth=759&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ud3f37509-61fe-4129-a691-56722feb3e7&title=)<br />简单的讲：带宽可以比喻是高速公路，表示单位时间内的能通过的车辆数；<br />![](https://cdn.nlark.com/yuque/0/2021/gif/396745/1637550428294-66fd60a1-67ed-4c31-9514-222cd4e118ed.gif#clientId=ub4e61554-d508-4&from=paste&id=ue2a3e28c&originHeight=186&originWidth=234&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uee26b2fe-96cd-4efe-a7cb-80bc3d18cdf&title=)
<a name="gpcfu"></a>
#### 2、带宽的表示：
带宽通常用**bps**表示，表示每秒多少bit；<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1637550427706-347c712d-d547-4478-a652-75c87bc3eb6d.webp#clientId=ub4e61554-d508-4&from=paste&id=ub085e133&originHeight=96&originWidth=219&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u54c2d0b9-a1c2-4fef-8485-70a3c9df34c&title=)<br />描述带宽时常常把“**比特/秒**”省略。例如，带宽是100M，实际上是100Mbps，这里的Mbps是指兆位/s。<br />但是平时下载软件的速度的单位是**Byte/s（字节/秒**）。这里涉及到Byte和bit的换算，二进制数系统中每个0或1就是一个位(bit)，位是数据存储的最小单位，其中8bit就称为一个字节（Byte）。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1637550427810-f6cae07d-fcbb-468a-8359-cd7d3212ae3f.webp#clientId=ub4e61554-d508-4&from=paste&id=u0b371b40&originHeight=35&originWidth=200&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uc8b5504f-4c10-47b4-8873-c31842ea55f&title=)<br />因此在办理宽带的时候，**100M的带宽表示100Mbps，理论的的网络下载速度只有12.5M Bps，实际可能还不足10MBps**，这是因为受用户计算机性能、网络设备质量、资源使用情况、网络高峰期、网站服务能力、线路衰耗，信号衰减等多因素的影响，实际网速是无法到达理论网速的。
<a name="LDGj0"></a>
### 时延
**时延：**简单的说，时延就是指报文从网络的一端到另一端所需要的的时间；<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1637550431837-96a51352-23a5-4ce7-80fa-dcc9e483f0c9.webp#clientId=ub4e61554-d508-4&from=paste&id=ub4924d0a&originHeight=132&originWidth=759&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ucc69ae05-c6f0-4b83-9fe0-3119e757580&title=)<br />**举个例子：**在自己的电脑上ping 百度的地址；<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1637550432077-38db3b3c-9450-439d-b8f8-a2151e59ad15.webp#clientId=ub4e61554-d508-4&from=paste&id=ue1ced3b6&originHeight=132&originWidth=522&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=udba73f2e-1e82-47d0-a976-881fa02c32b&title=)<br />从ping的结果中，可以看到**时延为12ms**，这个时延就是指ICMP报文从电脑到百度的服务器所需要得**往返时延是12ms**；<br />（Ping指一个数据包从用户的设备发送到测速点，然后再立即从测速点返回用户设备的来回时间。也就是俗称的网络延时，以毫秒ms计算。）<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1637550432515-ae774cd0-d612-4260-9318-e55657f2a6d8.webp#clientId=ub4e61554-d508-4&from=paste&id=uf0919eb2&originHeight=509&originWidth=975&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uc69c82e1-15ce-4050-aa03-04ba1f1991f&title=)<br />**网络时延**包括了**处理时延、排队时延、发送时延、传播时延**这四大部分。在实际中主要考虑发送时延与传播时延。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1637550433000-03949199-f056-45f6-adb8-c496027a3e9b.webp#clientId=ub4e61554-d508-4&from=paste&id=uab3730bb&originHeight=293&originWidth=340&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uaa898818-85b0-4dac-8fcd-36bc6bd9d27&title=)<br />下面具体看下每一个时延的含义；<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1637550434931-7f21155d-c382-40e1-a1b6-0e7f7a33c7c0.webp#clientId=ub4e61554-d508-4&from=paste&id=u68a590dc&originHeight=341&originWidth=716&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u96729856-8031-4b14-bdeb-86da4564b8c&title=)
<a name="yisp2"></a>
#### 1、处理时延：
交换机、路由器等网络设备**在收到报文后要使用一定的时间进行处理**。比如解封装分析首部，提取数据，差错检验，路由选择等。<br />一般高速路由器的处理时延通常是微秒或更低的数量级。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1637550434655-c6b00212-e0de-4980-8bbd-b5b7a3d6427f.webp#clientId=ub4e61554-d508-4&from=paste&id=ub5ba40d6&originHeight=181&originWidth=759&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u2ace2d26-18de-4bff-a701-6667f949c3d&title=)
<a name="yKWNl"></a>
#### 2、排队时延
排队时延简单来说就是路由器或交换机等网络设备**处理数据包排队**所消耗的时间。<br />一个数据包的排队时延取决于当前队列中是否有其它报文在传输。<br />如果该队列是空的，并且当前没有其他报文在传输，则该报文的排队时延为0；反之，如果流量很大，并且许多其他报文也在等待传输，该排队时延将很大；<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1637550435259-cf4a061b-4120-467f-8617-7e5bfc89a962.webp#clientId=ub4e61554-d508-4&from=paste&id=uf914af49&originHeight=181&originWidth=759&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=udeeadbb2-dba6-4125-86a3-38af73bc44d&title=)<br />实际的排队时延通常在毫秒到微秒级。
<a name="EeF7c"></a>
#### 3、发送时延
发送时延简单讲就是路由器、交换机等网络设备**发送数据所需要的时间**，也就是路由器队列递交给网络链路所需要的时间。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1637550435760-5c1de313-e5d4-4c06-ae66-28dd1e530581.webp#clientId=ub4e61554-d508-4&from=paste&id=u1a5b882f&originHeight=181&originWidth=759&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u3178326d-025f-495e-93be-42af3217d79&title=)<br />如果用L比特表示分组的长度，用R bps表示从路由器A到路由器B的链路传输速率，发送时延则是L/R。<br />实际的发送时延通常在毫秒到微秒级。
<a name="TRmtd"></a>
#### 4、传播时延
传播时延是指报文在**实际的物理链路上传播数据所需要的时间**。<br />传播时延等于两台路由器之间的距离除以传播速率，即传播时延是D/S，其中D是两台路由器之间的距离，S是该链路的传播速率。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1637550435945-634e98b5-f120-4c84-87d7-930c35e2c41e.webp#clientId=ub4e61554-d508-4&from=paste&id=u47eba79d&originHeight=181&originWidth=759&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ucf4c63e8-722a-4f7c-a805-ddff9e19532&title=)<br />实际传播时延在毫秒级。
<a name="wEHFo"></a>
### 抖动
**抖动：**网络抖动是指**最大延迟与最小延迟的时间差**，比如访问一个网站的最大延迟是10ms，最小延迟为5ms，那么网络抖动就是5ms；<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1637550436183-a7111534-3459-439e-a498-a3fb661f1f85.webp#clientId=ub4e61554-d508-4&from=paste&id=u1bf328f0&originHeight=32&originWidth=200&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=udf9d322b-cd51-4e1b-9c3f-6d546a46a2a&title=)<br />**抖动可以用来评价网络的稳定性，抖动越小，网络越稳定**；<br />尤其是在打游戏的时候，需要网络具有较高的稳定性，否则会影响游戏体验。<br />![](https://cdn.nlark.com/yuque/0/2021/gif/396745/1637550435918-fcfc7287-2826-4db8-aa70-95057cfc3e88.gif#clientId=ub4e61554-d508-4&from=paste&id=u5b6bb9e1&originHeight=240&originWidth=274&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ueef94735-0293-4fd8-89cd-f833675c0d4&title=)<br />关于网络抖动产生的原因：如果网络发生拥塞后，排队时延会影响端到端的延迟，可能造成从路由器A到路由器B的延迟忽大忽小，造成网络的抖动；
<a name="BBUhH"></a>
### 丢包
**丢包：**简单来说丢包就是指一个或多个数据包的数据**无法通过网络到达目的地**，接收端如果发现数据丢失，会根据队列序号向发送端发出请求，进行丢包重传。<br />![](https://cdn.nlark.com/yuque/0/2021/webp/396745/1637550436697-48dfdcc5-239d-43eb-908f-e0b8b30b76c1.webp#clientId=ub4e61554-d508-4&from=paste&id=uc25fde1b&originHeight=302&originWidth=760&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u365cb6cf-a388-403f-b466-df0db1f5797&title=)<br />丢包的原因比较多，最常见的可能是网络发生拥塞，数据流量太大，网络设备处理不过来自然而然就有些数据包会丢了。<br />**丢包率**是指测试中所丢失数据包数量占所发送数据包的比率。比如发送100个数据包，丢失一个数据包，那么丢包率就是1%。
