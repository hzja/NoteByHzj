Kubernetes
<a name="HzCzN"></a>
### 1、K8S集群服务访问失败？
![2021-08-09-22-08-50-304737.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518463738-b64280be-be9c-4fe1-a3b0-0271669f2888.png#clientId=uc54cca44-055b-4&from=ui&id=u98f7bd06&originHeight=64&originWidth=778&originalType=binary&ratio=1&size=4153&status=done&style=none&taskId=u33bdb66f-fc95-4ad9-bc68-ed9ff13de32)![2021-08-09-22-08-50-392736.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518463769-484afe2d-4fee-4967-bc3e-b68b5112b5ee.png#clientId=uc54cca44-055b-4&from=ui&id=u0e6bcaa1&originHeight=323&originWidth=720&originalType=binary&ratio=1&size=15356&status=done&style=none&taskId=u989150a1-035d-4c8f-bdcf-8b6b3450a2f)<br />原因分析：证书不能被识别，其原因为：自定义证书，过期等。<br />解决方法：更新证书即可。
<a name="AVsHd"></a>
### 2、K8S集群服务访问失败？
```bash
curl: (7) Failed connect to 10.103.22.158:3000; Connection refused
```
原因分析：端口映射错误，服务正常工作，但不能提供服务。<br />解决方法：删除svc，重新映射端口即可。
```bash
kubectl delete svc nginx-deployment
```
<a name="qAb8l"></a>
### 3、K8S集群服务暴露失败？
```bash
Error from server (AlreadyExists): services "nginx-deployment" already exists
```
原因分析：该容器已暴露服务了。<br />解决方法：删除svc，重新映射端口即可。
<a name="S2qd2"></a>
### 4、外网无法访问K8S集群提供的服务？
原因分析：K8S集群的type为ClusterIP，未将服务暴露至外网。<br />解决方法：修改K8S集群的type为NodePort即可，于是可通过所有K8S集群节点访问服务。
```bash
kubectl edit svc nginx-deployment
```
<a name="NSf9H"></a>
### 5、pod状态为ErrImagePull？
```bash
readiness-httpget-pod
0/1     ErrImagePull   0          10s
```
![2021-08-09-22-08-50-462745.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518490906-f2d3843a-9cb6-4d22-8b3c-06835a690108.png#clientId=uc54cca44-055b-4&from=ui&id=uebb330bd&originHeight=87&originWidth=624&originalType=binary&ratio=1&size=4032&status=done&style=none&taskId=u21e5c62c-7731-42b1-b884-50ef2c03e35)<br />原因分析：image无法拉取；<br />![2021-08-09-22-08-50-583737.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518490924-7df6ad91-2116-47d0-b538-956a801f622e.png#clientId=uc54cca44-055b-4&from=ui&id=BFJN3&originHeight=35&originWidth=1080&originalType=binary&ratio=1&size=28870&status=done&style=none&taskId=u261c4da5-b298-4100-af1d-525b7703108)<br />![2021-08-09-22-08-50-703736.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518490961-92a5358b-3c0d-42f6-ad49-105ee2c23aac.png#clientId=uc54cca44-055b-4&from=ui&id=URaHS&originHeight=143&originWidth=1080&originalType=binary&ratio=1&size=94136&status=done&style=none&taskId=udfe4f58b-e708-42ab-9ea2-ec33e4ea7c9)<br />解决方法：更换镜像即可。
<a name="Q2GmM"></a>
### 6、创建init C容器后，其状态不正常？
```bash
NAME READY STATUS RESTARTS AGE
myapp-pod 0/1 Init:0/2 0 20s
```
原因分析：查看日志发现，pod一直出于初始化中；然后查看pod详细信息，定位pod创建失败的原因为：初始化容器未执行完毕。
```bash
Error from server (BadRequest): container "myapp-container" in pod "myapp-pod" is waiting to start: PodInitializing
```
![2021-08-09-22-08-50-883728.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518524320-24d2da1f-4ed9-4c89-b5b1-4801b472b3db.png#clientId=uc54cca44-055b-4&from=ui&id=uca8bcb0f&originHeight=663&originWidth=821&originalType=binary&ratio=1&size=25387&status=done&style=none&taskId=uf75c596e-9dd1-4995-ac12-68b8da71913)![2021-08-09-22-08-51-017959.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518524361-119339b0-0168-4687-b1d4-2ce5c2a822b7.png#clientId=uc54cca44-055b-4&from=ui&id=ucedf6322&originHeight=789&originWidth=821&originalType=binary&ratio=1&size=72644&status=done&style=none&taskId=u0549adb4-c3da-4865-bb57-58e0ab8c4aa)![2021-08-09-22-08-51-088958.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518524336-202da041-febf-4368-bc06-6a13fa7e71ad.png#clientId=uc54cca44-055b-4&from=ui&id=uf184e22f&originHeight=238&originWidth=673&originalType=binary&ratio=1&size=6212&status=done&style=none&taskId=u6589c073-62be-4750-9e48-ae8cbfda654)
```bash
waiting for myservice

Server: 10.96.0.10
Address: 10.96.0.10:53

** server can't find myservice.default.svc.cluster.local: NXDOMAIN

*** Can't find myservice.svc.cluster.local: No answer
*** Can't find myservice.cluster.local: No answer
*** Can't find myservice.default.svc.cluster.local: No answer
*** Can't find myservice.svc.cluster.local: No answer
*** Can't find myservice.cluster.local: No answer
```
解决方法：创建相关service，将SVC的name写入K8S集群的coreDNS服务器中，于是coreDNS就能对POD的initC容器执行过程中的域名解析了。
```bash
kubectl apply -f myservice.yaml
```
![2021-08-09-22-08-51-162958.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518557183-efa6e8e7-c579-4849-a905-b632170f8a61.png#clientId=uc54cca44-055b-4&from=ui&id=uc1eceabe&originHeight=103&originWidth=699&originalType=binary&ratio=1&size=5862&status=done&style=none&taskId=u6ac01c3c-a261-42c3-9cd6-f6312c68c4d)![2021-08-09-22-08-51-283961.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518557196-78960dce-00f4-4ab8-a2cf-e250369f2554.png#clientId=uc54cca44-055b-4&from=ui&id=u5b59f0ed&originHeight=108&originWidth=475&originalType=binary&ratio=1&size=3454&status=done&style=none&taskId=uacc84375-39aa-4834-85ff-86fd0c8154e)![2021-08-09-22-08-51-393961.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518557211-7d54fdd6-918a-4946-a739-35b7e15ae2ab.png#clientId=uc54cca44-055b-4&from=ui&id=u1f6b9c97&originHeight=188&originWidth=550&originalType=binary&ratio=1&size=5439&status=done&style=none&taskId=u8ad43d01-5248-4bbf-b010-aa3683f0751)
```bash
NAME READY STATUS RESTARTS AGE

myapp-pod 0/1 Init:1/2 0 27m
myapp-pod 0/1 PodInitializing 0 28m
myapp-pod 1/1 Running 0 28m
```
![2021-08-09-22-08-51-481956.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518579230-a0e626a8-b7b9-42ee-bbe4-f7bf4e97dd71.png#clientId=uc54cca44-055b-4&from=ui&id=u899ba345&originHeight=733&originWidth=1037&originalType=binary&ratio=1&size=25344&status=done&style=none&taskId=ub6f31d94-14b1-4bc4-9787-12e4e27359e)
<a name="rBms4"></a>
### 7、探测存活pod状态为CrashLoopBackOff？
原因分析：镜像问题，导致容器重启失败。<br />解决方法：更换镜像即可。<br />![2021-08-09-22-08-51-597961.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518619452-69720671-4d37-409f-848e-64ce3a949e75.png#clientId=uc54cca44-055b-4&from=ui&id=u472a0e83&originHeight=392&originWidth=708&originalType=binary&ratio=1&size=48440&status=done&style=none&taskId=ua470446f-b6ab-46c8-8f97-3aa76e9f016)![2021-08-09-22-08-51-676957.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518619465-4d340404-4dc5-4e59-b3d0-a1ac8d2fa2c2.png#clientId=uc54cca44-055b-4&from=ui&id=u313818eb&originHeight=107&originWidth=691&originalType=binary&ratio=1&size=4909&status=done&style=none&taskId=u6d83174b-5935-4a22-9130-6ac43b3ab12)
<a name="wilvI"></a>
### 8、POD创建失败？
```bash
readiness-httpget-pod 0/1 Pending 0 0s
readiness-httpget-pod 0/1 Pending 0 0s
readiness-httpget-pod 0/1 ContainerCreating 0 0s
readiness-httpget-pod 0/1 Error 0 2s
readiness-httpget-pod 0/1 Error 1 3s
readiness-httpget-pod 0/1 CrashLoopBackOff 1 4s
readiness-httpget-pod 0/1 Error 2 15s
readiness-httpget-pod 0/1 CrashLoopBackOff 2 26s
readiness-httpget-pod 0/1 Error 3 37s
readiness-httpget-pod 0/1 CrashLoopBackOff 3 52s
readiness-httpget-pod 0/1 Error 4 82s
```
原因分析：镜像问题导致容器无法启动。<br />![2021-08-09-22-08-51-762971.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518639822-d1aac293-2b36-4c34-b191-2f7452d7829f.png#clientId=uc54cca44-055b-4&from=ui&id=u176c2599&originHeight=405&originWidth=1012&originalType=binary&ratio=1&size=16833&status=done&style=none&taskId=u41a3f8f3-024e-4c0d-b60c-002ed385961)<br />解决方法：更换镜像。<br />![2021-08-09-22-08-51-889963.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518639824-8dbe9d1f-5719-4a30-bd34-6105c1958aa7.png#clientId=uc54cca44-055b-4&from=ui&id=DWEhr&originHeight=424&originWidth=706&originalType=binary&ratio=1&size=49241&status=done&style=none&taskId=uc054cb45-290d-4949-a838-baeee6fc999)<br />![2021-08-09-22-08-52-017957.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518639856-d901b67b-fb83-4d08-8f62-f961dde9ef18.png#clientId=uc54cca44-055b-4&from=ui&id=fZmPO&originHeight=424&originWidth=706&originalType=binary&ratio=1&size=49241&status=done&style=none&taskId=ufd540ee7-48d7-4773-997f-446ae78bb14)
<a name="R5K06"></a>
### 9、POD的ready状态未进入？
```bash
readiness-httpget-pod   
0/1     Running   0          116s
```
原因分析：POD的执行命令失败，无法获取资源。<br />![2021-08-09-22-08-52-199959.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518679047-35f46be2-c7f4-4348-9dca-0004cd9b9ea2.png#clientId=uc54cca44-055b-4&from=ui&id=u9846aee7&originHeight=327&originWidth=1080&originalType=binary&ratio=1&size=235905&status=done&style=none&taskId=u448106c4-fb1f-4190-a315-8e9c6f4f06a)<br />解决方法：进入容器内部，创建yaml定义的资源<br />![2021-08-09-22-08-52-274965.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518678983-0d660241-3662-4183-a9e3-0a21192eeab0.png#clientId=uc54cca44-055b-4&from=ui&id=iPXTM&originHeight=115&originWidth=755&originalType=binary&ratio=1&size=4051&status=done&style=none&taskId=u03245c5d-202a-4dbb-a7b0-04a22ee09f3)<br />![2021-08-09-22-08-52-363962.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518679000-64af0fd1-fb1b-4911-af4b-c75493557f5c.png#clientId=uc54cca44-055b-4&from=ui&id=CQIrk&originHeight=150&originWidth=735&originalType=binary&ratio=1&size=5013&status=done&style=none&taskId=uc0e5905a-6c94-4ade-a58a-1d3e4c9cbc7)
<a name="BhaQK"></a>
### 10、pod创建失败？
![2021-08-09-22-08-52-523971.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518679026-3bd63f06-d977-4b42-a87b-6a0b3a46a32b.png#clientId=uc54cca44-055b-4&from=ui&id=VDqB0&originHeight=237&originWidth=1080&originalType=binary&ratio=1&size=86204&status=done&style=none&taskId=ud6e43958-ae11-464e-80bf-31daffeba38)<br />原因分析：yml文件内容出错—-使用中文字符；<br />解决方法：修改myregistrykey内容即可。<br />![2021-08-09-22-08-52-624962.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518709843-a8e531df-9f4f-41e5-8b46-5bb2217d0123.png#clientId=uc54cca44-055b-4&from=ui&id=u912ab25f&originHeight=319&originWidth=715&originalType=binary&ratio=1&size=7554&status=done&style=none&taskId=u68cda78c-5f09-4641-a17a-c7fd988ad4b)
<a name="VfWj8"></a>
### 11、kube-flannel-ds-amd64-ndsf7插件pod的status为Init:0/1？
![2021-08-09-22-08-52-796958.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518709943-67b81d09-5e7f-4227-b41e-6cfb858bcebc.png#clientId=uc54cca44-055b-4&from=ui&id=FHpEQ&originHeight=252&originWidth=1080&originalType=binary&ratio=1&size=163950&status=done&style=none&taskId=ue790054a-0ae9-41bc-8db8-9fc64627097)<br />排查思路：`kubectl -n kube-system describe pod kube-flannel-ds-amd64-ndsf7` #查询pod描述信息；<br />![2021-08-09-22-08-52-918962.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518752958-08171650-388b-475c-8579-7db531d4931b.png#clientId=uc54cca44-055b-4&from=ui&id=uf14c8d7a&originHeight=123&originWidth=1080&originalType=binary&ratio=1&size=56694&status=done&style=none&taskId=u03f6dd1b-e401-4456-a9ba-1db8caf4dbc)<br />原因分析：k8s-slave1节点拉取镜像失败。<br />解决方法：登录k8s-slave1，重启docker服务，手动拉取镜像。<br />![2021-08-09-22-08-53-006960.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518752956-5b9a99b0-b527-43b5-ab6b-75359fe44cd9.png#clientId=uc54cca44-055b-4&from=ui&id=sGoDu&originHeight=211&originWidth=820&originalType=binary&ratio=1&size=9512&status=done&style=none&taskId=u1b5da3dc-0724-4eb7-b802-624957f6c0b)<br />k8s-master节点，重新安装插件即可。
```bash
kubectl create -f kube-flannel.yml;kubectl get nodes
```
![2021-08-09-22-08-53-084957.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518752967-1d5dc638-c453-45c4-ad8f-cb2fd842d514.png#clientId=uc54cca44-055b-4&from=ui&id=Rp2Xu&originHeight=105&originWidth=612&originalType=binary&ratio=1&size=4224&status=done&style=none&taskId=u14f97237-ddf0-4122-9f54-278a9379005)
<a name="NCr7O"></a>
### 12、K8S创建服务status为ErrImagePull？
![2021-08-09-22-08-53-179957.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518774340-b08c0730-f1c2-414a-ae09-0d8a400b31af.png#clientId=uc54cca44-055b-4&from=ui&id=u9c88686e&originHeight=64&originWidth=1080&originalType=binary&ratio=1&size=39655&status=done&style=none&taskId=u52b009de-2a06-48c5-9d38-583220f7da9)<br />排查思路：
```bash
kubectl describe pod test-nginx
```
![2021-08-09-22-08-53-318958.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518774390-738278a5-ac3a-4a2c-ab7b-bb17cc9f0c83.png#clientId=uc54cca44-055b-4&from=ui&id=jQxpD&originHeight=167&originWidth=1080&originalType=binary&ratio=1&size=86725&status=done&style=none&taskId=ua5b07c28-2ec7-48b5-bcf6-f2826392573)<br />原因分析：拉取镜像名称问题。<br />解决方法：删除错误pod；重新拉取镜像；
```bash
kubectl delete pod test-nginx;kubectl run test-nginx --image=10.0.0.81:5000/nginx:alpine
```
<a name="KdHu7"></a>
### 13、不能进入指定容器内部？
![2021-08-09-22-08-53-397959.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518774374-b1644350-96aa-4922-aee2-67c7ed741fec.png#clientId=uc54cca44-055b-4&from=ui&id=t4sM4&originHeight=46&originWidth=1013&originalType=binary&ratio=1&size=3805&status=done&style=none&taskId=ub2ecf3a8-35c7-4701-91d8-26ce22122de)<br />原因分析：yml文件comtainers字段重复，导致该pod没有该容器。<br />解决方法：去掉yml文件中多余的containers字段，重新生成pod。<br />![2021-08-09-22-08-53-461957.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518800927-8b4661e8-f467-4081-bd7f-21001cb8874b.png#clientId=uc54cca44-055b-4&from=ui&id=u993f0a2a&originHeight=94&originWidth=548&originalType=binary&ratio=1&size=3684&status=done&style=none&taskId=u03c89a9a-2759-4dfd-957e-aa496c5cecc)![2021-08-09-22-08-53-523972.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518800928-431a0141-5313-4ce7-a0a2-9d9658190468.png#clientId=uc54cca44-055b-4&from=ui&id=u3f66ee6e&originHeight=73&originWidth=851&originalType=binary&ratio=1&size=2724&status=done&style=none&taskId=uadf06cb5-dfa7-4b30-b2d0-ee99e9fd8ad)
<a name="GLKXC"></a>
### 14、创建PV失败？
![2021-08-09-22-08-53-739962.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518800993-0f977df1-af4b-4c6c-8b01-2d2844b301fc.png#clientId=uc54cca44-055b-4&from=ui&id=bzZGu&originHeight=240&originWidth=1080&originalType=binary&ratio=1&size=192617&status=done&style=none&taskId=ub7972946-22ef-4ad0-a429-914cde429d6)<br />原因分析：pv的name字段重复。<br />解决方法：修改pv的name字段即可。<br />![2021-08-09-22-08-53-793958.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518821735-974edff1-a633-4c27-ad8d-6a2c64686d19.png#clientId=uc54cca44-055b-4&from=ui&id=u4658e30c&originHeight=228&originWidth=1029&originalType=binary&ratio=1&size=8522&status=done&style=none&taskId=ue89bddcd-f80f-45d9-aef7-e6ea2a50f96)
<a name="IOyx7"></a>
### 15、pod无法挂载PVC？
![2021-08-09-22-08-53-851959.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518855448-57390195-b9b8-4141-88d8-6a169c9088ce.png#clientId=uc54cca44-055b-4&from=ui&id=bsEbD&originHeight=129&originWidth=1037&originalType=binary&ratio=1&size=6340&status=done&style=none&taskId=u1b203a1a-926f-484e-84b7-f0f8ae55231)<br />![2021-08-09-22-08-53-908957.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518855452-58ecc268-f45b-4a8d-9376-20e7831ae413.png#clientId=uc54cca44-055b-4&from=ui&id=rCQgC&originHeight=142&originWidth=754&originalType=binary&ratio=1&size=7007&status=done&style=none&taskId=uda9fbe50-badc-4942-bcfa-04a46d78d1c)<br />原因分析：pod无法挂载PVC。<br />![2021-08-09-22-08-54-001957.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518855491-234cefac-48e5-4c5b-8db0-47c65f66d9a7.png#clientId=uc54cca44-055b-4&from=ui&id=uaa07e3a2&originHeight=214&originWidth=1080&originalType=binary&ratio=1&size=109606&status=done&style=none&taskId=u1825e76a-c319-4119-bd39-d589e694acc)![2021-08-09-22-08-54-060959.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518855460-f74cfa3f-514d-44da-bcad-a75101f00679.png#clientId=uc54cca44-055b-4&from=ui&id=uee13d1d4&originHeight=200&originWidth=406&originalType=binary&ratio=1&size=4180&status=done&style=none&taskId=ud752b04e-2476-497c-85a4-5bc965b7425)<br />accessModes与可使用的PV不一致，导致无法挂载PVC，由于只能挂载大于1G且accessModes为RWO的PV，故只能成功创建1个pod，第2个pod一致pending，按序创建时则第3个pod一直未被创建；<br />解决方法：修改yml文件中accessModes或PV的accessModes即可。<br />![2021-08-09-22-08-54-507963.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518881636-51c00e36-80d6-42d3-82d3-5043b9d539fe.png#clientId=uc54cca44-055b-4&from=ui&id=uaa2a64f7&originHeight=366&originWidth=1080&originalType=binary&ratio=1&size=161311&status=done&style=none&taskId=u6f315d92-6446-497a-9fd1-a70cec873a8)
<a name="cBL1j"></a>
### 16、问题：pod使用PV后，无法访问其内容？
![2021-08-09-22-08-54-697959.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518904134-cac85c12-fe85-4c65-87de-efcf07fe2a8b.png#clientId=uc54cca44-055b-4&from=ui&id=u4d8d6f7a&originHeight=439&originWidth=1080&originalType=binary&ratio=1&size=203036&status=done&style=none&taskId=u7b434a6d-5ceb-4478-a8c0-9c53957e034)<br />原因分析：nfs卷中没有文件或权限不对。<br />![2021-08-09-22-08-54-776956.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518966100-496d11e4-56fd-4915-993e-a5362e73925d.png#clientId=uc54cca44-055b-4&from=ui&id=ud519aefd&originHeight=69&originWidth=867&originalType=binary&ratio=1&size=4674&status=done&style=none&taskId=ue2ef5fb9-bfe4-4573-a828-c2750c826c3)![2021-08-09-22-08-54-843958.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518966115-6a62d796-a17e-42b1-9256-612f9a18b8e9.png#clientId=uc54cca44-055b-4&from=ui&id=u2e863b12&originHeight=61&originWidth=382&originalType=binary&ratio=1&size=1645&status=done&style=none&taskId=ud6677cec-2816-4815-b564-08b6266742d)<br />解决方法：在nfs卷中创建文件并授予权限。<br />![2021-08-09-22-08-54-919961.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518966106-c9abbb87-bb4e-4954-a922-72e00ffc0092.png#clientId=uc54cca44-055b-4&from=ui&id=XHCiV&originHeight=250&originWidth=581&originalType=binary&ratio=1&size=6809&status=done&style=none&taskId=u23a662d9-5c5e-40f7-b6ab-1b4c6abcb70)<br />![2021-08-09-22-08-54-996960.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518966115-2d71f4f6-18c4-49fa-aa99-2b68119aecf4.png#clientId=uc54cca44-055b-4&from=ui&id=EnzuX&originHeight=70&originWidth=404&originalType=binary&ratio=1&size=2285&status=done&style=none&taskId=u1042e64d-5841-4ed4-aa4f-20f8140cf59)
<a name="T4XxK"></a>
### 17、查看节点状态失败？
```bash
Error from server (NotFound): the server could not find the requested resource (get services http:heapster:)
```
原因分析：没有heapster服务。<br />解决方法：安装promethus监控组件即可。<br />![2021-08-09-22-08-55-104963.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628518966120-6e88a345-4c68-47b2-bb3c-297561a65466.png#clientId=uc54cca44-055b-4&from=ui&id=MHuHX&originHeight=303&originWidth=838&originalType=binary&ratio=1&size=12291&status=done&style=none&taskId=ubb19e34a-f948-4839-bd0e-81e6104bf08)<br />![2021-08-09-22-08-55-223969.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628519009137-a7a93f21-d2ce-4b78-b173-d3ca3ab8c670.png#clientId=uc54cca44-055b-4&from=ui&id=uf4fc333f&originHeight=112&originWidth=652&originalType=binary&ratio=1&size=4866&status=done&style=none&taskId=u915d1892-4a70-4e0b-b6c9-c152ef8e386)
<a name="CVigp"></a>
### 18、pod一直处于pending’状态？
![2021-08-09-22-08-55-354975.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628519009168-4f02f8ee-bc98-4d58-b383-be82ddc53371.png#clientId=uc54cca44-055b-4&from=ui&id=FzWeD&originHeight=68&originWidth=1080&originalType=binary&ratio=1&size=38777&status=done&style=none&taskId=uddea42f7-1756-49bb-8404-bb3f37d2b0a)<br />原因分析：由于已使用同样镜像发布了pod，导致无节点可调度。<br />![2021-08-09-22-08-55-442959.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628519009165-e77e9d5f-8583-450c-b871-a6f47b2bb23c.png#clientId=uc54cca44-055b-4&from=ui&id=r2Kuo&originHeight=88&originWidth=698&originalType=binary&ratio=1&size=3169&status=done&style=none&taskId=u71c6e051-3c32-4163-b825-ca12e790ecd)<br />解决方法：删除所有pod后部署pod即可。<br />![2021-08-09-22-08-55-527958.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628519009169-d50de0ea-06e2-4761-9b4a-abcdde00b7f8.png#clientId=uc54cca44-055b-4&from=ui&id=vy10x&originHeight=336&originWidth=651&originalType=binary&ratio=1&size=11863&status=done&style=none&taskId=ua86bcdd8-735f-42e7-851c-c416b8c673d)
<a name="eO1cC"></a>
### 19、helm安装组件失败？
```bash
[root@k8s-master01 hello-world]# helm install

Error: This command needs 1 argument: chart nam

[root@k8s-master01 hello-world]# helm install ./
Error: no Chart.yaml exists in directory "/root/hello-world"
```
原因分析：文件名格式不对。<br />解决方法：`mv chart.yaml Chart.yaml`<br />![2021-08-09-22-08-55-635968.png](https://cdn.nlark.com/yuque/0/2021/png/396745/1628519009173-d82fb9cc-9ce0-4744-9143-6eb7ed4d9665.png#clientId=uc54cca44-055b-4&from=ui&id=pjeYo&originHeight=363&originWidth=728&originalType=binary&ratio=1&size=13528&status=done&style=none&taskId=uaba867cd-5762-467e-8bf5-3f9bd350812)
