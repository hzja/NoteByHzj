Spug 是面向中小型企业设计的轻量级 无Agent 的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。
<a name="GOVB8"></a>
## 特性

- **批量执行：**主机命令在线批量执行
- **在线终端：**主机支持浏览器在线终端登录
- **文件管理：**主机文件在线上传下载
- **任务计划：**灵活的在线任务计划
- **发布部署：**支持自定义发布部署流程
- **配置中心：**支持 KV、文本、json 等格式的配置
- **监控中心：**支持站点、端口、进程、自定义等监控
- **报警中心：**支持短信、邮件、钉钉、微信等报警方式
- **优雅美观：**基于 Ant Design 的 UI 界面
- **开源免费：**前后端代码完全开源
<a name="k4ck5"></a>
## 预览
<a name="mnOLb"></a>
### 主机管理
![image.png](https://cdn.nlark.com/yuque/0/2023/png/396745/1678933782097-887f1b06-ab53-4cfd-b098-bac8639fbfe7.png#averageHue=%23ebddb9&clientId=u5c315383-f433-4&from=paste&height=713&id=u5adf6fec&originHeight=1783&originWidth=3840&originalType=binary&ratio=2.5&rotation=0&showTitle=false&size=347739&status=done&style=none&taskId=ua5a7d3d9-bbbd-4bb8-84ce-d5626095136&title=&width=1536)
<a name="DsokA"></a>
### 主机在线终端
![image.png](https://cdn.nlark.com/yuque/0/2023/png/396745/1678933818775-5068a125-7ac6-4483-bef6-4866ac19f9e5.png#averageHue=%23616161&clientId=u5c315383-f433-4&from=paste&height=713&id=u7b332aaa&originHeight=1783&originWidth=3840&originalType=binary&ratio=2.5&rotation=0&showTitle=false&size=167055&status=done&style=none&taskId=u0b0476fd-d435-42f9-832d-b0e29e4591d&title=&width=1536)
<a name="iua1t"></a>
### 文件在线上传下载
![image.png](https://cdn.nlark.com/yuque/0/2023/png/396745/1678933839053-9b6e4ed4-ef4d-4b13-9dc0-0c6666398cfd.png#averageHue=%23cdcdca&clientId=u5c315383-f433-4&from=paste&height=713&id=u99a8e601&originHeight=1783&originWidth=3840&originalType=binary&ratio=2.5&rotation=0&showTitle=false&size=352290&status=done&style=none&taskId=ucf9506c0-ae74-4bab-8ee9-65893ed8082&title=&width=1536)
<a name="e1PxR"></a>
### 主机批量执行
![image.png](https://cdn.nlark.com/yuque/0/2023/png/396745/1678933869484-4358d82c-bdd0-47d6-bae3-197de027eedc.png#averageHue=%23cbb48f&clientId=u5c315383-f433-4&from=paste&height=713&id=u00063932&originHeight=1783&originWidth=3840&originalType=binary&ratio=2.5&rotation=0&showTitle=false&size=257253&status=done&style=none&taskId=ub4595b31-faa5-41f6-8647-a188feca7a5&title=&width=1536)<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/396745/1678933888821-86386d1d-23e1-43a1-a4b7-4ac3d9d546d4.png#averageHue=%23b4a67c&clientId=u5c315383-f433-4&from=paste&height=713&id=u84d23d04&originHeight=1783&originWidth=3840&originalType=binary&ratio=2.5&rotation=0&showTitle=false&size=254944&status=done&style=none&taskId=u39200526-c6c7-4423-bf8d-115e3d1347c&title=&width=1536)
<a name="Ni6hG"></a>
### 应用发布
![image.png](https://cdn.nlark.com/yuque/0/2023/png/396745/1678933909298-b3ed3a83-f165-4ed1-aa1b-f3b613b7a8db.png#averageHue=%23cebe9e&clientId=u5c315383-f433-4&from=paste&height=713&id=u6a0a2f2a&originHeight=1783&originWidth=3840&originalType=binary&ratio=2.5&rotation=0&showTitle=false&size=312557&status=done&style=none&taskId=ubb96272d-5cd7-4776-af43-1bd3e19bd8b&title=&width=1536)
<a name="yh9SC"></a>
### 监控报警
![image.png](https://cdn.nlark.com/yuque/0/2023/png/396745/1678933926298-da5d75d8-7ed4-4b4f-8bcb-bde875e6ea06.png#averageHue=%23bdad8f&clientId=u5c315383-f433-4&from=paste&height=713&id=ue45305d2&originHeight=1783&originWidth=3840&originalType=binary&ratio=2.5&rotation=0&showTitle=false&size=225541&status=done&style=none&taskId=ucb3cfe75-deb5-4793-9c5d-49a01c82270&title=&width=1536)
<a name="XXDFq"></a>
### 角色权限
![image.png](https://cdn.nlark.com/yuque/0/2023/png/396745/1678933945952-7bb09c53-328b-4dd1-a4b1-23a721bf8fde.png#averageHue=%23cacbbf&clientId=u5c315383-f433-4&from=paste&height=713&id=ue52dc003&originHeight=1783&originWidth=3840&originalType=binary&ratio=2.5&rotation=0&showTitle=false&size=214886&status=done&style=none&taskId=uc17c780b-79f8-4912-b1a8-2f4435cabd0&title=&width=1536)<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/396745/1678933959296-dcbb9bd8-c9a8-48c5-9b82-61265d290627.png#averageHue=%23605442&clientId=u5c315383-f433-4&from=paste&height=713&id=u579eb80d&originHeight=1783&originWidth=3840&originalType=binary&ratio=2.5&rotation=0&showTitle=false&size=487386&status=done&style=none&taskId=u80f839b4-128b-4476-b3bf-779c8d76870&title=&width=1536)
<a name="aaJh9"></a>
## Docker安装
<a name="EZJHB"></a>
### 安装docker
注意：如已安装 docker 则忽略。以下安装 docker 步骤适用于 Centos，其他系统安装请参考 Docker 官方文档。
```bash
yum install -y yum-utils
yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
yum install docker-ce docker-compose-plugin
systemctl enable docker
systemctl start docker
```
<a name="gzTPu"></a>
### 创建docker-compose.yml
```bash
vi docker-compose.yml
```
```yaml
version: "3.3"
services:
  db:
    image: mariadb:10.8.2
    container_name: spug-db
    restart: always
    command: --port 3306 --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci
    volumes:
      - /data/spug/mysql:/var/lib/mysql
    environment:
      - MYSQL_DATABASE=spug
      - MYSQL_USER=spug
      - MYSQL_PASSWORD=spug.cc
      - MYSQL_ROOT_PASSWORD=spug.cc
  spug:
    image: openspug/spug-service
    container_name: spug
    privileged: true
    restart: always
    volumes:
      - /data/spug/service:/data/spug
      - /data/spug/repos:/data/repos
    ports:
      # 如果80端口被占用可替换为其他端口，例如: - "8000:80"
      - "80:80"
    environment:
      - MYSQL_DATABASE=spug
      - MYSQL_USER=spug
      - MYSQL_PASSWORD=spug.cc
      - MYSQL_HOST=db
      - MYSQL_PORT=3306
    depends_on:
      - db
```
<a name="tQuxj"></a>
### 启动容器
```bash
docker compose up -d
```
注意：docker-compose 安装方式不同，也可能需要执行 `docker-compose up -d`
<a name="n7DLY"></a>
### 初始化
以下操作会创建一个用户名为 admin 密码为 spug.dev 的管理员账户，可自行替换管理员账户/密码。
```bash
docker exec spug init_spug admin spug.dev
```
<a name="fIB3P"></a>
### 访问测试
在浏览器中输入 http://localhost:80 访问。
<a name="EMBXQ"></a>
## 开源地址
[https://github.com/openspug/spug](https://github.com/openspug/spug)
