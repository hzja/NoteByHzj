<a name="ChQOU"></a>
## 路由器
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424917729-457498d2-a545-4c42-8830-df2eb9e739d0.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u45a4e714&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ub97f85e5-522e-4842-a0e1-ba917e4725b&title=)<br />dispaly version 显示系统软件版本及硬件信息<br />system-view 切换到系统视图<br />quit 返回<br />interface +接口 进入接口视图<br />ip address +IP +mask 配置IP和子网掩码<br />return 返回用户视图<br /><Ctrl+Z> 返回用户视图<br />sysname R1 修改路由器名称为R1<br />clock timezone BJ add 08:00:00 设置所在的时区为北京<br />clock datetime 11:23:24 2019-4-9 修改系统日期和时间为2019年4月9日11点23分24秒<br />header login information “hello” 设置登录时的标题文本为hello<br />header shell information “Welcom” 设置设备登陆成功后的标题文本信息为“Welcome”<br />display current-configuration 查看路由器当前配置<br />dispaly interface +接口 查看路由器接口的状态信息<br />save 保存当前配置<br />display ip interface brief 查看接口与IP相关摘要信息<br />display ip routing-table 查看路由表
<a name="tE9ws"></a>
## 命令行帮助：
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424917748-bc47ecb6-fa3f-434f-a422-012b784a9af3.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=ucf0588b6&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u1b29b58c-6eac-42a7-b269-e315b4496d8&title=)<br />获取该命令视图下所有的命令及其简单描述<br />interface ? 列出interface全部关键字或参数及其简单描述<br />rou? 列出以“rou”字符串开头的所有命令及其简单描述
<a name="mRxhL"></a>
## telnet远程登陆配置：
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424917750-80fe2f58-5ef0-42fd-abc5-7ba1224b1dbd.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u29e419e8&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u4a073bc2-6d89-4c82-bf50-ce652ca19c2&title=)<br />user-interface vty 0 4 进入0~4前五个的VTY用户界面进行整体配置<br />authentication-mode password 设置验证方式为密码<br />user privilege level 3 设置用户登陆级别<br />aaa 进入aaa视图<br />local-user admin password cipher hello privilege level 3 在aaa视图下设置账号密码 和用户级别<br />local-user admin service-type telnet 配置该用户接入类型为aaa<br />q 退回到用户视图<br />user-interface vty 0 4 进入到VTY用户视图<br />authentication-mode aaa 设置验证方式aaa
<a name="SRF0w"></a>
## 配置Stelnet：
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424917716-985d523e-2ad0-4e69-a036-5ecd03adf3a1.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u1aeccec4&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u47e120f2-e209-48ec-8b60-eb0af650f4d&title=)<br />配置SSH server：rsa local-key-pair create 生成本地RSA主机密钥对<br />display rsa local-key-pair public 查看本地密钥对中的公钥信息<br />user-interface vty 0 4 进入VTY用户视图<br />authentication-mode aaa 设置用户验证方式为aaa授权验证方式<br />protocol inbound ssh 指定VTY用户只支持ssh<br />q 返回到系统视图<br />aaa 进入aaa视图<br />local-user huawei1 password cipher huawei1 创建用户和设置用户密码<br />local-user huawei1 service-type ssh 配置本地用户接入类型为ssh<br />q 退回到用户视图<br />ssh user huawei1 authentication-type password 新建ssh用户指定ssh用户认证方式为password<br />aaa 进入aaa视图<br />local-user huawei1 privilege level 3 设置huawei1用户级别为3 级别范围0~15<br />stelnet server enable 开启ssh功能<br />display ssh user-information huawei1 查看ssh用户配置信息不指定用户默认查看所有用户<br />display ssh server status 查看ssh服务器全局配置信息
<a name="oMsPO"></a>
## 配置SSH-client：
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424917787-285dae1b-5b2e-4d9b-8392-1306dc630970.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u2890796a&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u60711de7-92a5-4cce-8bda-738db7c2f93&title=)<br />ssh client first-time enable 开启首次认证功能不对ssh服务器的RSA公钥进行有效性验证<br />stelnet 10.1.1.2 登陆R2<br />sys 进入到R2的系统视图<br />display ssh server session 查看ssh服务器端的当前会话连接信息
<a name="A6rR8"></a>
## 配置SFTP Server与Client
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424918126-7a84a42f-b6a9-4469-9b8b-35407a8f5e94.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u91513817&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u526e24f3-5852-4976-8702-4f2b68511cf&title=)<br />server：aaa 进入aaa视图<br />local-user huawei2 password cipher huawei2 设置用户名和密码<br />local-user huawei2 service-type ssh 配置本地用户的接入类型为ssh<br />local-user huawei2 privilege level 3 设置用户级别为3<br />local-user huawei2 ftp-directory flash: 指定FTP用户的可访问目录，如果不配置用户将无法登陆<br />ssh user huawei2 authentication-type password 新建ssh用户指定用户认证方式为密码<br />sftp server enable 开启sftp服务器功能<br />display ssh server status 查看ssh服务器配置信息<br />display ssh server session 查看ssh服务器端的当前会话连接信息<br />client：sftp 10.1.1.2 登陆S2
<a name="artPo"></a>
## 配置通过FTP进行文件操作
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424918179-5143b21b-fd38-4fea-b6fc-f0047827f683.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u41991635&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u54e51907-9794-4b7d-b1e1-ed37998c34c&title=)<br />ftp 10.0.2.1 连接远程ftp服务器<br />ls 查看FTP服务器文件夹状态<br />cd +文件夹名 进入文件夹<br />dir 查看详细的文件属性<br />get +文件名 下载文件到本地<br />put +旧文件名 +新文件名 上传文件到FTP服务器<br />配置路由器为ftp Server<br />sys 进入系统视图<br />aaa 进入aaa视图<br />local-user ftp password cipher huawei 设置用户名ftp和密码huawei<br />local-user ftp ftp-directory flash: 指定FTP用户的可访问目录，如果不配置用户将无法登陆<br />local-user ftp service-type ftp 设置服务类型为ftp<br />local-user ftp privilege level 15 设置用户优先级为15
<a name="VGp2l"></a>
## 配置交换机双工模式
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424918170-7f24ab9b-f682-4e72-b32a-eee49e3ed414.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u264ed9b9&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u242a7921-5ac9-4bea-9931-4a001cabad1&title=)<br />interface +接口 进入到某一接口<br />undo negotiation auto 命令关掉自协商功能<br />duplex full 指定双工模式为全双工<br />speed 10 配置接口速率为10Mbit/s<br />arp static 10.1.2.3 5489-9827-0ECD 配置静态arp表<br />arp-proxy enable 开启arp代理功能具体到接口
<a name="gXHJk"></a>
## 划分vlan
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424918305-55101744-e637-4247-973b-52c5867bbba1.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=uee3f4ba3&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ua45cbd52-0d40-4739-9df9-160e6d32f78&title=)<br />vlan 10 划分Vlan10<br />vlan batch 30 40 同时创建vlan30和40<br />dispaly vlan 查看vlan信息<br />int e0/0/1 进入某一个接口<br />port link-type access 配置接口类型为access<br />port default vlan 10 配置接口加入相应的vlan

int e0/0/1 进入某一个接口<br />port link-type trunk 配置接口类型为trunk<br />port trunk allow-pass vlan 10 20 允许vlan 10 20 的数据通过<br />port trunk allow-pass vlan all 允许所有vlan通过

int e0/0/1<br />undo port default vlan 恢复接口默认vlan<br />port link-type hybrid 修改接口类型为hybrid<br />port hybrid untagged vlan 20 命令交换机在该接口转发VLAN 20的帧时，剥离掉相应的VLAN Tag 20,以Untagged的方式发送给PC<br />port hybrid pvid vlan 20 设置hybrid接口的默认VLAN ID<br />port hybrid tagged vlan 10 20 设置该链路仅接收带有VLAN Tag 10 和 20 的帧
<a name="h9Rpr"></a>
## 配置路由器子接口封装VLAN
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424918329-4661f0e1-bdae-4f19-acc8-4b23143f29ae.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u976cdf54&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ua5b94f4a-b6ef-43b2-be9b-d31b4c2037d&title=)<br />interface GigabitEthernet 0/0/1.1 路由器上创建子接口<br />dot1q termination vid 10 配置子接口对一层tag报文的终结功能<br />arp broadcast enable 开启子接口的arp广播功能
<a name="wYeiA"></a>
## 三层交换机实现VLAN间路由
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424918821-09aec4f4-5330-4f62-af5c-9dd5dbbbad54.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u4171a9e0&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u07504f72-27a5-4895-9c00-9eb0d7e2726&title=)<br />vlan batch 10 20 创建VLAN 10 20<br />int g0/0/1<br />port link-type access 设置接口类型<br />port default vlan 10 划分接口g0/0/1到vlan 10<br />interface Vlanif 10 创建Vlanif接口设置其对应接口ID为10<br />ip address 192.168.1.254 24 设置其Vlanif 接口ip地址
<a name="o55aO"></a>
## STP配置和选路规则
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424918465-1518ae6d-d4fb-4d58-9f36-c04448ada493.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=ucf9cd8c4&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u9791603e-1e6c-40db-8342-a1b2f6e68a0&title=)<br />stp enable 在交换机上启用STP<br />stp mode stp<br />dis stp 查看stp配置<br />dis stp brief 查看接口摘要信息<br />stp priority 4096 修改交换机优先级为4096<br />stp root primary 设置交换机为主根交换机<br />stp root secondary 命令配置备份交换机<br />display stp interface Ethernet 0/0/2 查看e0/0/2接口的开销值<br />int e0/0/2<br />stp cost 2000 配置接口e0/0/2的带价值为2000<br />stp timer forward-delay 3000 修改ＳＴＰ的Forward Delay时间为3000cs也就是30s<br />stp bridge-diameter 3 命令设置网络的直径为3<br />stp mode rstp 启用RSTP使用RSTP可以缩短收敛时间<br />int e0/0/1<br />stp edged-port enable 配置接口e0/0/1为边缘端口不参与生成树的计算
<a name="HOKYk"></a>
## 配置MSTP多实例
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424918593-2845c3a2-601f-4fb3-8c22-0dcf058e39a2.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u572dcad4&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uecbff8a2-2aa7-4e32-ae29-9d304e11504&title=)<br />stp region-configuration 进入MST域视图<br />region-name huawei 配置MST域名为huawei<br />revision-level 1 配置MSTP的修订级别为1<br />instance 1 vlan 10 指定VLAN 10映射到MSTI 1<br />active region-configuration 激活MST域配置<br />display stp region-configuration 查看交换机上当前生效的MST域配置信息<br />dis stp instance 0 brief 查看实例0中的生成树状态和统计的摘要信息<br />stp instance 2 priority 0 配置交换机成位实例2中的根交换机
<a name="WLyKb"></a>
## GVRP基础配置
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424918709-3c85eddf-2efa-4bc7-828f-80b28b49dc14.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u5af76ea3&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u5ec3dce6-6340-48e0-b24e-631f9add952&title=)<br />int G0/0/1<br />port link-type trunk 配置接口类型为trunk<br />port trunk allow-pass vlan all 允许所有VLAN通过<br />int e0/0/1<br />port link-type access 配置接口类型为access<br />port default vlan 10 将接口e0/0/1划入VLAN 10<br />grvp 交换机上开启GVRP功能<br />int g0/0/1<br />gvrp 在接口g0/0/1开启gGVRP功能<br />还需在某个交换机的右侧接口手动配置VLAN实现双向注册GVRP
<a name="N8tnt"></a>
## 配置Eth-Trunk 1聚合链路
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424918744-7f3c81c8-c0ea-451b-9910-65d53915cbf2.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u66a93083&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uf3906f6b-9d3e-4d23-970f-7867496d1af&title=)<br />interface Eth-Trunk 1 创建Eth-Trunk 1 接口<br />mode manual load-balance 指定为手工负载分担模式<br />int g0/0/1 进入接口<br />eth-trunk 1 将接口g0/0/1加入到Eth-Trunk 1接口<br />display eth-trunk 1 查看Eth-Trunk 1接口状态<br />int g0/0/1 进入接口<br />undo eth-trunk 删除聚合链路接口下的g0/0/1<br />mode lacp-static 将工作模式改为静态LACP<br />然后将所有接口加入到聚合链路Eth-trunk 1<br />lacp priority 100 修改交换机优先级为一百 （值越低优先级越高）<br />interface Eth-Trunk 1<br />max active-linknumber 2 设置活动接口的上限阈值<br />接下来修改聚合链路中接口g0/0/1和g0/0/2的优先级
<a name="Sbu75"></a>
## 配置浮动静态路由实现路由备份（网络冗余）
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424918811-c3d6a6f0-0097-4c86-9ed4-c3d67564a3b1.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=ua9ba8afb&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ud28752ee-3072-4e30-acfc-ae1ed8629c2&title=)<br />ip route-static 192.168.20.0 24 10.0.12.2 preference 100 设置备份路由并将优先级设置为100<br />display ip routing-table protocol static 查看静态路由的路由信息
<a name="r4Qvh"></a>
## RIP路由协议配置
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424918990-2263705b-5d6a-4964-aeb5-ca78f1a314e1.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u7a8e42f6&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ucf509ed4-9f80-4b94-ae99-b6309b1d1cd&title=)<br />rip 创建开启协议进程<br />network + ip 对指定网段接口使能RIP功能IP地址是与路由器直连的网段<br />debugging rip 1 查看RIP定期更新情况<br />terminal debugging<br />terminal monitor 在屏幕上显示debug信息<br />undo debugging rip 1undo debug all 命令关闭debug调试功能<br />在上面的配置基础上配置RIP2<br />rip 进入子视图模式<br />version 2 配置版本<br />或者直接配置<br />rip 1<br />version 2<br />network + ip<br />rip简单认证<br />rip authentication-mode simple huawei 在需要的路由器上配置密码要相同
<a name="dotBD"></a>
## 配置RIPv2 MD5 密文验证
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424919064-444af29a-4ee4-4d6a-ba36-9bf8026fee1e.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=uedb9b63c&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u2bdbba8f-a5af-4251-813b-dc922d622de&title=)<br />rip authentication-mode md5 usual huawei 方式使用MD5密文验证，使用通用报文格式，两端报文格式必须一致<br />dis default-parameter rip 查看RIP配置信息
<a name="p4Vvp"></a>
## 配置RIPv2自动汇总路由（默认关闭）
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424919085-557825a4-9edb-4f0c-989c-10594a42d2fb.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u6a43d9d0&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uaa43c4d6-b9af-4d4b-9e64-b38d7075cc9&title=)<br />方法1：<br />rip 1<br />version 2<br />summary always<br />方法2：<br />int + 接口<br />undo rip split-horizon 关闭水平分割功能
<a name="GxxKj"></a>
## 配置RIPv2手动汇总
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424919181-481788fd-3e35-48b9-bd4d-cee85d224efa.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u68a9d31e&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uafa4b056-4ef6-4a33-b74a-0a3c3ecd944&title=)<br />（需停止RIPv2自动汇总功能）<br />int +接口<br />rip summary-address 3.3.0.0 255.255.252.0 手动汇总ip+掩码<br />配置RIP版本兼容<br />rip version 2 broadcast 命令路由器以广播的形式发送RIPv2报文<br />rip version 2 multicast 命令路由器以组播的形式发送RIPv2报文
<a name="qPHfi"></a>
## 配置RIP定时器,优先级
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424919518-bc692b25-65fd-4444-a499-8766a3ac6af5.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=ua755e018&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u3630dd9b-754a-4376-b95c-30a7eb7c827&title=)<br />int + 接口<br />undo rip output 让路由器停止发送RIP路由更新<br />display rip 1 database 检查RIP发布数据库中的所有路由激活<br />rip<br />timers rip 20 120 60 设置更新报文时间为20s，超时计时器为120s，垃圾收集计时器为60s<br />preference 90 修改RIP协议优先级为90
<a name="yv6VP"></a>
## 配置抑制接口
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424919363-216f1891-f441-4508-8691-b237dfd838b5.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u984b1876&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=udc88dfdf-03da-4c1d-bc6b-1edbe875551&title=)<br />（只接受RIP更新报文，不发送更新报文）<br />rip 1<br />silent-interface GigabitEthernet 0/0/0 设置要抑制的接口<br />配置RIP单播更新（由于配置了抑制接口，接口无法以广播或者组播的方式发送RIP更新报文）<br />rip 1<br />peer 172.16.1.100 IP地址为邻居路由器的IP地址<br />另一种方法（删除上面的配置）<br />undo rip output 禁止这个接口发送RIP报文<br />undo rip input 禁止这个接口接收RIP报文
<a name="KFPjc"></a>
## RIP与不连续子网（解决不连续子网问题）
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424919525-56083e4b-b31d-4752-8255-8e96f825455b.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=uc7de1069&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uc8d8afb0-fbe0-41cd-aa7d-477360a8b8b&title=)<br />方法1给接口配置第二个IP地址，应该取配置网段的子网，适合小型网络<br />ip address 10.0.23.2 sub<br />方法2使用RIPv2，关闭自动汇总<br />rip<br />version 2<br />undo summary<br />undo rip split-horizon 关闭水平分割功能（进入接口）<br />rip split-horizon 开启水平分割功能<br />rip poison-reverse 开启毒性逆转功能<br />增加度量值（进入接口）<br />rip metricin 2 增加度量值2端口出去的跳数<br />rip metricout 2 增加度量值2端口进来的跳数<br />Rip路由引入(需保证被引入的路由条目已经存在于当前设备中)<br />rip<br />import-route direct 直连路由，一般是本地接口的地址<br />rip<br />import-route static 静态路由，是引入的你在设备上配置的静态路由。
<a name="SB1tD"></a>
## OSPF单区域配置
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424919470-0fbd187d-b81d-4091-86b5-5a7fd27accf2.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u050d05b5&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u500d8164-5a85-4dac-9380-4c5520e3a41&title=)<br />ospf 1 进入ospf视图1代表进程号<br />area 0 创建区域并进入OSPF区域视图，输入要创建的区域ID，骨干区域即区域0<br />network +IP +匹配码<br />display ospf interface 命令查看OSPF接口通告是否正确、<br />display ospf peer 查看OSPF邻居状态<br />display ip routing-table protocol ospf 查看OSPF路由表
<a name="Jz2bK"></a>
## 配置OSPF区域明文认证
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424919595-18c0dff8-abaa-4315-a020-caa00f823ae1.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u9c69f846&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uc305a792-1802-47c4-a329-c1fc3e704f9&title=)<br />ospf 1<br />area 1<br />authentication-mode simple plain huawei plain是口令以明文方式显示<br />authentication-mode md5 1 huawei 配置区域密文认证
<a name="AZktu"></a>
## 配置链路认证
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424919798-43a77eb1-2e89-42cd-bc7e-ed9a7f773517.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=uf644023b&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uf50ad0be-050a-48bb-ba59-1c8e84a7866&title=)<br />int g0/0/1<br />ospf authentication-mode md5 1 huawei 在一条链路中的两个接口配置要相同
<a name="qS7fJ"></a>
## 配置抑制接口
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424919882-eb9b489f-ced3-4ce5-8794-539cb479369e.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=uc41620d6&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u34737ae7-a76b-4b35-b381-40fac2b848f&title=)<br />ospf 1<br />silent-interface GigabitEthernet 0/0/1 禁止接口g0/0/1接收和发送ospf报文<br />技巧对多个接口配置接口抑制<br />ospf 1<br />silent-interface all 抑制所有接口<br />un<br />display ip routing-table 10.0.1.1 查看10.0.1.1所在网段的路由条目<br />基于接口修改<br />int g0/0/0<br />ospf network-type p2mp 修改ospf的网络类型为多到多点<br />ospf network-type broadcast 修改ospf的网络类型为广播<br />ospf dr-priority 100 修改g0/0/0接口的DR优先级为100<br />reset ospf process 重启ospf进程<br />ospf cost 1000 修改ospf的开销值为1000<br />ospf timer hello 20 修改HELLO计时器为20s<br />ospf timer dead 80 修改dead计时器为80s<br />ospf 1<br />preference 110 修改ospf优先级为110 值越大优先级越低
<a name="WmQBM"></a>
## 路由引入
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424919870-be1c5a23-211b-4402-b6a4-1ad81964412a.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u07e7ae90&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u15655ad6-d9d7-4427-8140-100d9323cc9&title=)<br />ospf 1<br />import-route rip 1 在ospf进程中引入rip<br />default-route-advertise always 在ospf进程中引入默认路由<br />rip<br />import-route ospf 1 在rip进程中引入ospf<br />import-route ospf cost 3 ospf 引入rip时配置开销值<br />default-route originate 在RIP进程中发布默认路由
<a name="fcQVh"></a>
## vrrp(虚拟路由器冗余协议)基本配置
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424920026-ba5c1d0c-e417-47bf-856a-a8abc8ae29cb.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=ue7b9177c&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uf80ad218-00dd-4149-b4e0-983dd973462&title=)<br />int g0/0/0<br />vrrp vrid 1 virtual-ip 172.16.1.254 创建VRRP备份组，备份组号为1，配置虚拟IP为172.16.1.254<br />vrrp vrid 1 priority 120 修改优先级为120<br />display vrrp 查看vrrp信息<br />display vrrp brief<br />display vrrp interface g0/0/0 查看VRRP的工作状态
<a name="DUOjR"></a>
## 配置VRRP多备份组
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424920031-ef003d76-833e-4a01-a59a-8961e0bbd92e.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=uc9c27da5&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ufe56fbdc-46f8-40fe-b919-0012552fe33&title=)<br />int g0/0/0<br />vrrp vrid 1 virtual-ip 172.16.1.254 创建VRRP备份组，备份组号为1，配置虚拟IP为172.16.1.254<br />vrrp vrid 1 priority 120 修改优先级为120<br />vrrp vrid 2 virtual-ip 172.16.1.253 创建VRRP备份组，备份组号为2，配置虚拟IP为172.16.1.253<br />int g0/0/0<br />vrrp vrid 1 virtual-ip 172.16.1.254 创建VRRP备份组，备份组号为1，配置虚拟IP为172.16.1.254<br />vrrp vrid 2 virtual-ip 172.16.1.253 创建VRRP备份组，备份组号为2，配置虚拟IP为172.16.1.253<br />vrrp vrid 2 priority 120 修改优先级为120<br />vrrp vrid 2 preempt-mode disable 开启非抢占方式
<a name="sVNc8"></a>
## 配置VRRP的跟踪接口及认证
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424920214-5cbf5e5c-d700-414b-a1c3-3a5bccfbbf72.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u0b1e39a4&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u5e5e8a8b-b6e2-40bd-943d-30c34155114&title=)<br />int g0/0/1<br />vrrp vrid 1 track interface GigabitEthernet 0/0/0 reduced 50 监视上行接口G0/0/0，当此接口断掉时，裁减优先级50，使优先级为70<br />vrrp vrid 1 authentication-mode md5 huawei 认证配置
<a name="wBl4f"></a>
## 配置基本的访问控制表
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424920218-6b799a77-dbe1-4d8e-a7be-23a66d550d5e.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u720f6371&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u6921357d-f859-4dc4-b07d-03dfb979e08&title=)<br />acl 2000 创建一个编号型ACL，基本ACL的范围是2000~29999<br />rule 5 permit source 1.1.1.1 0 指定规则ID为5，允许数据源地址为1.1.1.1的报文通过，反掩码全为0，即精确匹配<br />rule 10 deny source any 指定ID为10，拒绝任意源地址的数据包通过<br />display acl all 查看设备上所有的访问控制列表
<a name="UnfMS"></a>
## 配置前缀列表
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424920293-a5e4472e-b16c-4777-a5c0-55dd29ae5978.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=ucca2a1ba&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ub95746bd-2eb6-457c-8d73-8c667f8048e&title=)<br />ip ip-prefix 1 index 10 deny 11.1.1.0 25 greater-equal 25 less-equal 25 ip-prefix-name：指定地址前缀列表名称，唯一标识一个IPv4地址前缀列表。deny：拒绝。greater-equal：指定掩码长度可以匹配范围的下限（也即最小长度）。less-equal：指定掩码长度匹配范围的上限<br />ip ip-prefix 1 index 20 permit 0.0.0.0 0 less-equal 32<br />rip<br />filter-policy ip-prefix 1 import 将前缀列表配置在过滤策略下<br />修改链路类型<br />link-protocol hdlc 修改链路类型为高级数据链路控制<br />ppp的pap认证<br />int Serial 4/0/0<br />ppp authentication-mode pap domain huawei 采用pap方式认证，认证采用域名为huawei<br />aaa 进入aaa视图<br />authentication-scheme huawei_1 创建认证方案为huawei_1<br />authentication-mode local 配置认证模式为本地认证<br />domain huaweiyu 创建域huaweiyu并进入视图<br />authentication-scheme huawei_1 配置域的认证方案为huawei_1<br />q 退回到aaa视图<br />local-user R1@huaweiyu password cipher Huawei 配置存储在本地，为对端认证方所使用的用户名为R1@huaweiyu,密码为Huawei<br />local-user R1@huaweiyu service-type ppp
<a name="LgVRC"></a>
## ppp的PAP认证配置
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424920564-4bacde72-3f57-4c4a-979b-db807e1c2de3.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u532c5aa5&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u46be04dc-efda-4391-a366-d46c3a02063&title=)<br />int Serial 4/0/0<br />undo ppp authentication-mode 删除以前的pap配置<br />去到另一端<br />undo ppp pap local-user 删除ppp本地用户<br />回到配置路由器<br />int Serial 4/0/0<br />authentication-mode CHAP 配置ppp认证模式为CHAP<br />aaa 进入aaa视图<br />loacal-user R1 password cipher huawei 用户设置为R1，密码设置为huawei<br />loacal-user R1 service-type ppp 设置服务类型为ppp<br />去到另外一端配置用户名和密码<br />int Serial 4/0/0<br />ppp chap user R1<br />ppp chap password cipher huawei
<a name="VIn7k"></a>
## 帧中继配置
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424920432-bd668dde-57df-4d49-b359-c734b903d392.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u04e1a205&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ue003066c-3449-4d50-88e1-e1c5bf272de&title=)<br />int Serial 1/0/0<br />link-protocol fr 修改链路协议<br />fr inarp 开启逆向地址解析功能<br />fr map 10.1.1.1 201 配置一条静态地址映射<br />dis fr pvc-info 查看PVC的建立情况
<a name="z9kj5"></a>
## 配置基于接口地址池DHCP
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424920592-b21b98ca-64c6-4478-a765-b82484465f37.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=uf012d40f&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u894f2491-faad-4914-96f9-44a077f1946&title=)<br />（动态主机配置协议）<br />[R1]dhcp enable 路由器上开启DHCP<br />[R1]int g0/0/0<br />[R1-GigabitEthernet0/0/0]dhcp select interface 开启接口DHCP功能<br />[R1-GigabitEthernet0/0/0]int g0/0/1<br />[R1-GigabitEthernet0/0/1]dhcp select interface<br />[R1-GigabitEthernet0/0/0]dhcp server lease day 2 配置DHCP服务器接口地址池中IP地址的租用有效期限为两天<br />[R1-GigabitEthernet0/0/0]dhcp server excluded-ip-address 192.168.1.1 192.168.1.10 设置不参与分配自动分配的IP地址范围<br />[R1-GigabitEthernet0/0/1]dhcp server dns-list 8.8.8.8 配置该接口地址池下的DNS服务器为PC分配DNS服务器地址<br />[R1]display ip pool 查看DHCP地址池中的地址分配情况
<a name="AtJVU"></a>
## 配置基于全局地址池的DHCP
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424920558-8cadac77-f782-4cc0-b18b-9e37b50edc99.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u53790601&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ua6d9ada4-2434-4acc-9393-13c33d58482&title=)<br />[R1]dhcp enable<br />[R1]ip pool huawei1 创建一个全局地址池<br />[R1-ip-pool-huawei1]network 192.168.1.0 命令配置全局地址池huawei1可动态分配的网段范围为192.168.1.0，默认使用24为掩码。<br />[R1-ip-pool-huawei1]lease day 2 配置DHCP全局地址池下的地址租期为2天<br />[R1-ip-pool-huawei1]gateway-list 192.168.1.254 配置dhcp客户端的出口网关地址<br />[R1-ip-pool-huawei1]excluded-ip-address 192.168.1.250 192.168.1.253 禁止分配这个范围的地址<br />[R1-ip-pool-huawei1]dns-list 8.8.8.8 配置DNS服务地址<br />[R1]int g0/0/0<br />[R1-GigabitEthernet0/0/0]dhcp select global 开启DHCP功能采用全局地址池为客户端分配地址
<a name="fNmh1"></a>
## 配置DHCP中继
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424920731-4b7fa960-2147-4be0-ba04-fea332de7064.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=ufb6360c8&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u2a60870c-ca5d-4769-b256-518a2da6e94&title=)<br />方法一直接指定DHCP服务器<br />[R1]dhcp enable 路由器开启DHCP功能<br />[R1]interface g0/0/1<br />[R1-GigabitEthernet0/0/1]dhcp select relay 开启DHCP中继功能<br />[R1-GigabitEthernet0/0/1]dhcp relay server-ip 100.1.1.1 指定DHCP服务器<br />方法二全局配置DHCP中继：<br />[R1]dhcp server group dhcp-group 创建DHCP服务器组dhcp-group<br />[R1-dhcp-server-group-dhcp-group]dhcp-server 100.1.1.1 配置DHCP服务器<br />[R1-dhcp-server-group-dhcp-group]int g0/0/1<br />[R1-GigabitEthernet0/0/1]dhcp select relay 开启DHCP中继功能<br />[R1-GigabitEthernet0/0/1]dhcp relay server-select dhcp-group 将接口加入到DHCP服务器组dhcp-group
<a name="KnLAv"></a>
## ipv6基础配置
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424920817-0b72759d-a8eb-4a6c-ae81-396d4ad7f5d2.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u631f113d&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u0e68281b-cbc4-4152-862f-49f35b1ebbc&title=)<br />[R1]ipv6 全局开启开启IPv6<br />[R1]interface g0/0/0<br />[R1-GigabitEthernet0/0/0]ipv6 enable 在接口下开启IPv6功能<br />[R1-GigabitEthernet0/0/0]ipv6 address auto link-local 接口上配置自动生成的链路本地地址<br />用EUI-64方式配置IPv6地址<br />[R1]int g 0/0/0<br />[R1]ipv6 address 2001:3:FD:: 64 eui-64
<a name="HnR6I"></a>
## net地址转换
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424920892-e0ae6615-2ce4-488b-bf73-c3da64370744.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u37314362&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ufb732742-49e0-406a-8d81-fe7dfec2fdf&title=)<br />静态<br />[R1]int g0/0/0<br />[R1-GigabitEthernet0/0/0]nat static global 202.169.10.5 inside 172.16.1.1 静态地址转换<br />[R1]display nat static 查看Nat静态配置信息<br />NAT Outbound<br />[R1]nat address-group 1 202.169.10.50 202.169.10.60 配置NAT地址池<br />[R1]ACL 2001 创建ACL 2001<br />[R1-acl-basic-2001]rule 5 permit source 172.17.1.0 0.0.0.255 设置规则<br />[R1]int g0/0/0<br />[R1-GigabitEthernet0/0/0]nat outbound 2001 address-group 1 no-pat 将ACL 2001 与地址池结合只允许ACL中规定地址段的IP可以进行地址转换<br />[R1]dis nat outbound 查看nat outbound 信息
<a name="CZYWp"></a>
## 配置NAT Easy — IP
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424920954-0736015d-6e2d-481b-9ff1-feab4bf4f6a9.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u9d509420&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ue39d0717-a95d-4719-8747-03c0a58e64c&title=)<br />[R1]interface g0/0/0<br />[R1-GigabitEthernet0/0/0]undo nat outbound 2001 address-group 1 no-pat 删除之前的配置<br />[R1-GigabitEthernet0/0/0]nat outbound 2001 配置Easy-IP特性，直接使用接口IP地址作为NAT转换后的地址
<a name="uYtXd"></a>
## 配置nat server
![](https://cdn.nlark.com/yuque/0/2022/webp/396745/1645424921029-a269627e-69b0-42fe-8035-1acc5b7d68c1.webp#clientId=uf6e20c2f-4a2d-4&from=paste&id=u81e71dc2&originHeight=10&originWidth=571&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u89d82632-7b84-45fc-a570-7d6a383d6ee&title=)<br />[R1-GigabitEthernet0/0/0]interface g0/0/0<br />[R1-GigabitEthernet0/0/0]nat server protocol tcp global 202.169.10.6 ftp inside 172.16.1.3 ftp 定义内部服务器的映射表，指定服务器通信类型为tcp，配置服务器使用公网IP地址为202.169.10.6，服务器内网地址为172.16.1.3，指定端口号为21用关键字ftp代替<br />[R1]nat alg ftp enable 开启ftp功能
