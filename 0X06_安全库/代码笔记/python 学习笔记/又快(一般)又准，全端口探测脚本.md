nimscan是我用过比较好用的，比较快，但是精准度上面还有问题，所有干脆自己开发了个又快又准的。
```python
import sys
import threading
import queue
import time
import socket

# 下面来通过多线程来处理Queue里面的任务：
def duankousaomiao(host,q):
    while True:
        if q.empty():
            return
        else:
            T = q.get()
            #print(T)
            server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            try:
                server.connect((host,T))
                server.settimeout(1.5)
                print("{}:{}".format(host,T),"--开放")
            except:
                pass
                #print("{}".format(T),"--没有开放")
            finally:
                server.close()
            
def main(host):
    q = queue.Queue()
    for i in range(1,65535):
        q.put(i)  # 把任务放进队列里

    thread_num = 5000
    threads = []
    for i in range(thread_num):
        t = threading.Thread(target=duankousaomiao, args=(host,q))
        threads.append(t)
    # 创建5个线程
    for i in range(thread_num):
        threads[i].start()
    for i in range(thread_num):
        threads[i].join()



if __name__ == "__main__":
    
    a = input("请输入需要扫描的ip：")
    t1 = time.time()
    main(a)
    t2 = time.time()
    print("扫描结束******用时",(t2-t1))
```
对比上看的话，nimscan依旧是最快的，但是精准度不行，python写的速度慢了点但是精准度还是可以的。**端口扫描最好还是在服务器上跑**<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1345801/1622447455608-b7489b22-a4d7-4d36-b722-c26d838673b9.png#align=left&display=inline&height=346&originHeight=691&originWidth=1415&size=162188&status=done&style=none&width=707.5)<br />脚本优化<br />使用了类和列表推导式进行优化，比原本的速度快了3秒
```python
import sys
import threading
import queue
import time
import socket

# 下面来通过多线程来处理Queue里面的任务：
class duankousaomiao(threading.Thread):
    def __init__(self,host,q):
        threading.Thread.__init__(self)
        self.q = q
        self.host = host

    def run(self):    
        while not self.q.empty():
            T = self.q.get()
            #print(T)
            server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            try:
                server.connect((self.host,T))
                server.settimeout(1)
                print("{}:{}".format(self.host,T),"--开放")
            except:
                pass
                #print("{}".format(T),"--没有开放")
            finally:
                #print(T)
                server.close()
class Port:
    def __init__(self,port,host,thread):
        self.port = int(port)+1
        self.host = host
        self.thread = int(thread)
        
    def main(self):
        q = queue.Queue()
        for i in range(1,self.port):
            q.put(i)  # 把任务放进队列里

        #thread_num = 5000
        threads = [duankousaomiao(self.host,q) for _ in range(self.thread)]
        # 创建5个线程
        for i in range(self.thread):
            threads[i].start()
        for i in range(self.thread):
            threads[i].join()

if __name__ == "__main__":
    
    a = input("请输入需要扫描的ip：")
    t1 = time.time()
    test = Port(65535,a,3000)
    test.main()
    t2 = time.time()
    print("扫描结束******用时",(t2-t1))
```
扫本地只需要20秒<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1345801/1622974914085-3be5f185-ddd3-4def-8531-7a3ec1c4aefb.png#align=left&display=inline&height=323&originHeight=323&originWidth=537&size=47392&status=done&style=none&width=537)
